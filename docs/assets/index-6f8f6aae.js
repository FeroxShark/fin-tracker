var wD=Object.defineProperty;var _D=(t,e,n)=>e in t?wD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(_D(t,typeof e!="symbol"?e+"":e,n),n);function xD(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var bD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tb={exports:{}},vd={},nb={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ac=Symbol.for("react.element"),SD=Symbol.for("react.portal"),ED=Symbol.for("react.fragment"),kD=Symbol.for("react.strict_mode"),ID=Symbol.for("react.profiler"),TD=Symbol.for("react.provider"),CD=Symbol.for("react.context"),DD=Symbol.for("react.forward_ref"),AD=Symbol.for("react.suspense"),MD=Symbol.for("react.memo"),PD=Symbol.for("react.lazy"),x0=Symbol.iterator;function RD(t){return t===null||typeof t!="object"?null:(t=x0&&t[x0]||t["@@iterator"],typeof t=="function"?t:null)}var ib={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sb=Object.assign,rb={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=rb,this.updater=n||ib}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ob(){}ob.prototype=Qo.prototype;function Lm(t,e,n){this.props=t,this.context=e,this.refs=rb,this.updater=n||ib}var Fm=Lm.prototype=new ob;Fm.constructor=Lm;sb(Fm,Qo.prototype);Fm.isPureReactComponent=!0;var b0=Array.isArray,ab=Object.prototype.hasOwnProperty,$m={current:null},lb={key:!0,ref:!0,__self:!0,__source:!0};function cb(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)ab.call(e,i)&&!lb.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:ac,type:t,key:r,ref:o,props:s,_owner:$m.current}}function OD(t,e){return{$$typeof:ac,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ac}function ND(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var S0=/\/+/g;function Af(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ND(""+t.key):e.toString(36)}function Pu(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ac:case SD:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+Af(o,0):i,b0(s)?(n="",t!=null&&(n=t.replace(S0,"$&/")+"/"),Pu(s,e,n,"",function(c){return c})):s!=null&&(Vm(s)&&(s=OD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(S0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",b0(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+Af(r,a);o+=Pu(r,e,n,l,s)}else if(l=RD(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+Af(r,a++),o+=Pu(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bc(t,e,n){if(t==null)return t;var i=[],s=0;return Pu(t,i,"","",function(r){return e.call(n,r,s++)}),i}function LD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Ru={transition:null},FD={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:$m};function ub(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Bc,forEach:function(t,e,n){Bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bc(t,function(){e++}),e},toArray:function(t){return Bc(t,function(e){return e})||[]},only:function(t){if(!Vm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Qo;pe.Fragment=ED;pe.Profiler=ID;pe.PureComponent=Lm;pe.StrictMode=kD;pe.Suspense=AD;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FD;pe.act=ub;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sb({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=$m.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ab.call(e,l)&&!lb.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:ac,type:t.type,key:s,ref:r,props:i,_owner:o}};pe.createContext=function(t){return t={$$typeof:CD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TD,_context:t},t.Consumer=t};pe.createElement=cb;pe.createFactory=function(t){var e=cb.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:DD,render:t}};pe.isValidElement=Vm;pe.lazy=function(t){return{$$typeof:PD,_payload:{_status:-1,_result:t},_init:LD}};pe.memo=function(t,e){return{$$typeof:MD,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};pe.unstable_act=ub;pe.useCallback=function(t,e){return Jt.current.useCallback(t,e)};pe.useContext=function(t){return Jt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Jt.current.useEffect(t,e)};pe.useId=function(){return Jt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Jt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};pe.useRef=function(t){return Jt.current.useRef(t)};pe.useState=function(t){return Jt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Jt.current.useTransition()};pe.version="18.3.1";nb.exports=pe;var P=nb.exports;const wd=eb(P),$D=xD({__proto__:null,default:wd},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VD=P,zD=Symbol.for("react.element"),BD=Symbol.for("react.fragment"),jD=Object.prototype.hasOwnProperty,UD=VD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HD={key:!0,ref:!0,__self:!0,__source:!0};function hb(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)jD.call(e,i)&&!HD.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:zD,type:t,key:r,ref:o,props:s,_owner:UD.current}}vd.Fragment=BD;vd.jsx=hb;vd.jsxs=hb;tb.exports=vd;var A=tb.exports,Fp={},db={exports:{}},wn={},fb={exports:{}},pb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,R){var H=N.length;N.push(R);e:for(;0<H;){var U=H-1>>>1,C=N[U];if(0<s(C,R))N[U]=R,N[H]=C,H=U;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var R=N[0],H=N.pop();if(H!==R){N[0]=H;e:for(var U=0,C=N.length,$=C>>>1;U<$;){var X=2*(U+1)-1,le=N[X],ue=X+1,rt=N[ue];if(0>s(le,H))ue<C&&0>s(rt,le)?(N[U]=rt,N[ue]=H,U=ue):(N[U]=le,N[X]=H,U=X);else if(ue<C&&0>s(rt,H))N[U]=rt,N[ue]=H,U=ue;else break e}}return R}function s(N,R){var H=N.sortIndex-R.sortIndex;return H!==0?H:N.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var R=n(c);R!==null;){if(R.callback===null)i(c);else if(R.startTime<=N)i(c),R.sortIndex=R.expirationTime,e(l,R);else break;R=n(c)}}function b(N){if(g=!1,w(N),!p)if(n(l)!==null)p=!0,ie(S);else{var R=n(c);R!==null&&q(b,R.startTime-N)}}function S(N,R){p=!1,g&&(g=!1,m(_),_=-1),f=!0;var H=d;try{for(w(R),h=n(l);h!==null&&(!(h.expirationTime>R)||N&&!M());){var U=h.callback;if(typeof U=="function"){h.callback=null,d=h.priorityLevel;var C=U(h.expirationTime<=R);R=t.unstable_now(),typeof C=="function"?h.callback=C:h===n(l)&&i(l),w(R)}else i(l);h=n(l)}if(h!==null)var $=!0;else{var X=n(c);X!==null&&q(b,X.startTime-R),$=!1}return $}finally{h=null,d=H,f=!1}}var I=!1,k=null,_=-1,x=5,E=-1;function M(){return!(t.unstable_now()-E<x)}function O(){if(k!==null){var N=t.unstable_now();E=N;var R=!0;try{R=k(!0,N)}finally{R?K():(I=!1,k=null)}}else I=!1}var K;if(typeof y=="function")K=function(){y(O)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,J=ce.port2;ce.port1.onmessage=O,K=function(){J.postMessage(null)}}else K=function(){v(O,0)};function ie(N){k=N,I||(I=!0,K())}function q(N,R){_=v(function(){N(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ie(S))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(d){case 1:case 2:case 3:var R=3;break;default:R=d}var H=d;d=R;try{return N()}finally{d=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,R){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=d;d=N;try{return R()}finally{d=H}},t.unstable_scheduleCallback=function(N,R,H){var U=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,N){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=H+C,N={id:u++,callback:R,priorityLevel:N,startTime:H,expirationTime:C,sortIndex:-1},H>U?(N.sortIndex=H,e(c,N),n(l)===null&&N===n(c)&&(g?(m(_),_=-1):g=!0,q(b,H-U))):(N.sortIndex=C,e(l,N),p||f||(p=!0,ie(S))),N},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(N){var R=d;return function(){var H=d;d=R;try{return N.apply(this,arguments)}finally{d=H}}}})(pb);fb.exports=pb;var WD=fb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD=P,mn=WD;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gb=new Set,pl={};function Nr(t,e){Co(t,e),Co(t+"Capture",e)}function Co(t,e){for(pl[t]=e,t=0;t<e.length;t++)gb.add(e[t])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$p=Object.prototype.hasOwnProperty,qD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E0={},k0={};function GD(t){return $p.call(k0,t)?!0:$p.call(E0,t)?!1:qD.test(t)?k0[t]=!0:(E0[t]=!0,!1)}function YD(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QD(t,e,n,i){if(e===null||typeof e>"u"||YD(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zm=/[\-:]([a-z])/g;function Bm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zm,Bm);Tt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zm,Bm);Tt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zm,Bm);Tt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function jm(t,e,n,i){var s=Tt.hasOwnProperty(e)?Tt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QD(e,n,s,i)&&(n=null),i||s===null?GD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $i=KD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jc=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Um=Symbol.for("react.strict_mode"),Vp=Symbol.for("react.profiler"),mb=Symbol.for("react.provider"),yb=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),zp=Symbol.for("react.suspense"),Bp=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),vb=Symbol.for("react.offscreen"),I0=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=I0&&t[I0]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Mf;function Ma(t){if(Mf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mf=e&&e[1]||""}return`
`+Mf+t}var Pf=!1;function Rf(t,e){if(!t||Pf)return"";Pf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ma(t):""}function XD(t){switch(t.tag){case 5:return Ma(t.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return t=Rf(t.type,!1),t;case 11:return t=Rf(t.type.render,!1),t;case 1:return t=Rf(t.type,!0),t;default:return""}}function jp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case to:return"Fragment";case eo:return"Portal";case Vp:return"Profiler";case Um:return"StrictMode";case zp:return"Suspense";case Bp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yb:return(t.displayName||"Context")+".Consumer";case mb:return(t._context.displayName||"Context")+".Provider";case Hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wm:return e=t.displayName||null,e!==null?e:jp(t.type)||"Memo";case Gi:e=t._payload,t=t._init;try{return jp(t(e))}catch{}}return null}function JD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jp(e);case 8:return e===Um?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZD(t){var e=wb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=ZD(t))}function _b(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=wb(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Up(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function T0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xb(t,e){e=e.checked,e!=null&&jm(t,"checked",e,!1)}function Hp(t,e){xb(t,e);var n=Es(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wp(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function C0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wp(t,e,n){(e!=="number"||uh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pa=Array.isArray;function po(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function D0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Pa(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function bb(t,e){var n=Es(e.value),i=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function A0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hc,Eb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hc=Hc||document.createElement("div"),Hc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eA=["Webkit","ms","Moz","O"];Object.keys(qa).forEach(function(t){eA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qa[e]=qa[t]})});function kb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qa.hasOwnProperty(t)&&qa[t]?(""+e).trim():e+"px"}function Ib(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=kb(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var tA=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gp(t,e){if(e){if(tA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qp=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xp=null,go=null,mo=null;function M0(t){if(t=uc(t)){if(typeof Xp!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Ed(e),Xp(t.stateNode,t.type,e))}}function Tb(t){go?mo?mo.push(t):mo=[t]:go=t}function Cb(){if(go){var t=go,e=mo;if(mo=go=null,M0(t),e)for(t=0;t<e.length;t++)M0(e[t])}}function Db(t,e){return t(e)}function Ab(){}var Of=!1;function Mb(t,e,n){if(Of)return t(e,n);Of=!0;try{return Db(t,e,n)}finally{Of=!1,(go!==null||mo!==null)&&(Ab(),Cb())}}function ml(t,e){var n=t.stateNode;if(n===null)return null;var i=Ed(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Jp=!1;if(Mi)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){Jp=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{Jp=!1}function nA(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ga=!1,hh=null,dh=!1,Zp=null,iA={onError:function(t){Ga=!0,hh=t}};function sA(t,e,n,i,s,r,o,a,l){Ga=!1,hh=null,nA.apply(iA,arguments)}function rA(t,e,n,i,s,r,o,a,l){if(sA.apply(this,arguments),Ga){if(Ga){var c=hh;Ga=!1,hh=null}else throw Error(L(198));dh||(dh=!0,Zp=c)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P0(t){if(Lr(t)!==t)throw Error(L(188))}function oA(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return P0(s),t;if(r===i)return P0(s),e;r=r.sibling}throw Error(L(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Rb(t){return t=oA(t),t!==null?Ob(t):null}function Ob(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ob(t);if(e!==null)return e;t=t.sibling}return null}var Nb=mn.unstable_scheduleCallback,R0=mn.unstable_cancelCallback,aA=mn.unstable_shouldYield,lA=mn.unstable_requestPaint,Je=mn.unstable_now,cA=mn.unstable_getCurrentPriorityLevel,qm=mn.unstable_ImmediatePriority,Lb=mn.unstable_UserBlockingPriority,fh=mn.unstable_NormalPriority,uA=mn.unstable_LowPriority,Fb=mn.unstable_IdlePriority,_d=null,ii=null;function hA(t){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(_d,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:pA,dA=Math.log,fA=Math.LN2;function pA(t){return t>>>=0,t===0?32:31-(dA(t)/fA|0)|0}var Wc=64,Kc=4194304;function Ra(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Ra(a):(r&=o,r!==0&&(i=Ra(r)))}else o=n&~s,o!==0?i=Ra(o):r!==0&&(i=Ra(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ln(e),s=1<<n,i|=t[n],e&=~s;return i}function gA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Ln(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=gA(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function eg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $b(){var t=Wc;return Wc<<=1,!(Wc&4194240)&&(Wc=64),t}function Nf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function yA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function Gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ln(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ke=0;function Vb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zb,Ym,Bb,jb,Ub,tg=!1,qc=[],us=null,hs=null,ds=null,yl=new Map,vl=new Map,Qi=[],vA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function O0(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":yl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(e.pointerId)}}function da(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=uc(e),e!==null&&Ym(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wA(t,e,n,i,s){switch(e){case"focusin":return us=da(us,t,e,n,i,s),!0;case"dragenter":return hs=da(hs,t,e,n,i,s),!0;case"mouseover":return ds=da(ds,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return yl.set(r,da(yl.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,vl.set(r,da(vl.get(r)||null,t,e,n,i,s)),!0}return!1}function Hb(t){var e=sr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=Pb(n),e!==null){t.blockedOn=e,Ub(t.priority,function(){Bb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Qp=i,n.target.dispatchEvent(i),Qp=null}else return e=uc(n),e!==null&&Ym(e),t.blockedOn=n,!1;e.shift()}return!0}function N0(t,e,n){Ou(t)&&n.delete(e)}function _A(){tg=!1,us!==null&&Ou(us)&&(us=null),hs!==null&&Ou(hs)&&(hs=null),ds!==null&&Ou(ds)&&(ds=null),yl.forEach(N0),vl.forEach(N0)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,tg||(tg=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,_A)))}function wl(t){function e(s){return fa(s,t)}if(0<qc.length){fa(qc[0],t);for(var n=1;n<qc.length;n++){var i=qc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(us!==null&&fa(us,t),hs!==null&&fa(hs,t),ds!==null&&fa(ds,t),yl.forEach(e),vl.forEach(e),n=0;n<Qi.length;n++)i=Qi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)Hb(n),n.blockedOn===null&&Qi.shift()}var yo=$i.ReactCurrentBatchConfig,gh=!0;function xA(t,e,n,i){var s=ke,r=yo.transition;yo.transition=null;try{ke=1,Qm(t,e,n,i)}finally{ke=s,yo.transition=r}}function bA(t,e,n,i){var s=ke,r=yo.transition;yo.transition=null;try{ke=4,Qm(t,e,n,i)}finally{ke=s,yo.transition=r}}function Qm(t,e,n,i){if(gh){var s=ng(t,e,n,i);if(s===null)Wf(t,e,i,mh,n),O0(t,i);else if(wA(s,t,e,n,i))i.stopPropagation();else if(O0(t,i),e&4&&-1<vA.indexOf(t)){for(;s!==null;){var r=uc(s);if(r!==null&&zb(r),r=ng(t,e,n,i),r===null&&Wf(t,e,i,mh,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Wf(t,e,i,null,n)}}var mh=null;function ng(t,e,n,i){if(mh=null,t=Km(i),t=sr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mh=t,null}function Wb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cA()){case qm:return 1;case Lb:return 4;case fh:case uA:return 16;case Fb:return 536870912;default:return 16}default:return 16}}var ns=null,Xm=null,Nu=null;function Kb(){if(Nu)return Nu;var t,e=Xm,n=e.length,i,s="value"in ns?ns.value:ns.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Nu=s.slice(t,1<i?1-i:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gc(){return!0}function L0(){return!1}function _n(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Gc:L0,this.isPropagationStopped=L0,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gc)},persist:function(){},isPersistent:Gc}),e}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jm=_n(Xo),cc=Ke({},Xo,{view:0,detail:0}),SA=_n(cc),Lf,Ff,pa,xd=Ke({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pa&&(pa&&t.type==="mousemove"?(Lf=t.screenX-pa.screenX,Ff=t.screenY-pa.screenY):Ff=Lf=0,pa=t),Lf)},movementY:function(t){return"movementY"in t?t.movementY:Ff}}),F0=_n(xd),EA=Ke({},xd,{dataTransfer:0}),kA=_n(EA),IA=Ke({},cc,{relatedTarget:0}),$f=_n(IA),TA=Ke({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),CA=_n(TA),DA=Ke({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AA=_n(DA),MA=Ke({},Xo,{data:0}),$0=_n(MA),PA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OA[t])?!!e[t]:!1}function Zm(){return NA}var LA=Ke({},cc,{key:function(t){if(t.key){var e=PA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zm,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FA=_n(LA),$A=Ke({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V0=_n($A),VA=Ke({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zm}),zA=_n(VA),BA=Ke({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),jA=_n(BA),UA=Ke({},xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HA=_n(UA),WA=[9,13,27,32],ey=Mi&&"CompositionEvent"in window,Ya=null;Mi&&"documentMode"in document&&(Ya=document.documentMode);var KA=Mi&&"TextEvent"in window&&!Ya,qb=Mi&&(!ey||Ya&&8<Ya&&11>=Ya),z0=String.fromCharCode(32),B0=!1;function Gb(t,e){switch(t){case"keyup":return WA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var no=!1;function qA(t,e){switch(t){case"compositionend":return Yb(e);case"keypress":return e.which!==32?null:(B0=!0,z0);case"textInput":return t=e.data,t===z0&&B0?null:t;default:return null}}function GA(t,e){if(no)return t==="compositionend"||!ey&&Gb(t,e)?(t=Kb(),Nu=Xm=ns=null,no=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qb&&e.locale!=="ko"?null:e.data;default:return null}}var YA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YA[t.type]:e==="textarea"}function Qb(t,e,n,i){Tb(i),e=yh(e,"onChange"),0<e.length&&(n=new Jm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Qa=null,_l=null;function QA(t){aS(t,0)}function bd(t){var e=ro(t);if(_b(e))return t}function XA(t,e){if(t==="change")return e}var Xb=!1;if(Mi){var Vf;if(Mi){var zf="oninput"in document;if(!zf){var U0=document.createElement("div");U0.setAttribute("oninput","return;"),zf=typeof U0.oninput=="function"}Vf=zf}else Vf=!1;Xb=Vf&&(!document.documentMode||9<document.documentMode)}function H0(){Qa&&(Qa.detachEvent("onpropertychange",Jb),_l=Qa=null)}function Jb(t){if(t.propertyName==="value"&&bd(_l)){var e=[];Qb(e,_l,t,Km(t)),Mb(QA,e)}}function JA(t,e,n){t==="focusin"?(H0(),Qa=e,_l=n,Qa.attachEvent("onpropertychange",Jb)):t==="focusout"&&H0()}function ZA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bd(_l)}function eM(t,e){if(t==="click")return bd(e)}function tM(t,e){if(t==="input"||t==="change")return bd(e)}function nM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:nM;function xl(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!$p.call(e,s)||!zn(t[s],e[s]))return!1}return!0}function W0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function K0(t,e){var n=W0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W0(n)}}function Zb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eS(){for(var t=window,e=uh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uh(t.document)}return e}function ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iM(t){var e=eS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zb(n.ownerDocument.documentElement,n)){if(i!==null&&ty(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=K0(n,r);var o=K0(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sM=Mi&&"documentMode"in document&&11>=document.documentMode,io=null,ig=null,Xa=null,sg=!1;function q0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sg||io==null||io!==uh(i)||(i=io,"selectionStart"in i&&ty(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xa&&xl(Xa,i)||(Xa=i,i=yh(ig,"onSelect"),0<i.length&&(e=new Jm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=io)))}function Yc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var so={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},Bf={},tS={};Mi&&(tS=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Sd(t){if(Bf[t])return Bf[t];if(!so[t])return t;var e=so[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tS)return Bf[t]=e[n];return t}var nS=Sd("animationend"),iS=Sd("animationiteration"),sS=Sd("animationstart"),rS=Sd("transitionend"),oS=new Map,G0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(t,e){oS.set(t,e),Nr(e,[t])}for(var jf=0;jf<G0.length;jf++){var Uf=G0[jf],rM=Uf.toLowerCase(),oM=Uf[0].toUpperCase()+Uf.slice(1);Rs(rM,"on"+oM)}Rs(nS,"onAnimationEnd");Rs(iS,"onAnimationIteration");Rs(sS,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(rS,"onTransitionEnd");Co("onMouseEnter",["mouseout","mouseover"]);Co("onMouseLeave",["mouseout","mouseover"]);Co("onPointerEnter",["pointerout","pointerover"]);Co("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Y0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,rA(i,e,void 0,t),t.currentTarget=null}function aS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Y0(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Y0(s,a,c),r=l}}}if(dh)throw t=Zp,dh=!1,Zp=null,t}function Me(t,e){var n=e[cg];n===void 0&&(n=e[cg]=new Set);var i=t+"__bubble";n.has(i)||(lS(e,t,2,!1),n.add(i))}function Hf(t,e,n){var i=0;e&&(i|=4),lS(n,t,i,e)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function bl(t){if(!t[Qc]){t[Qc]=!0,gb.forEach(function(n){n!=="selectionchange"&&(aM.has(n)||Hf(n,!1,t),Hf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qc]||(e[Qc]=!0,Hf("selectionchange",!1,e))}}function lS(t,e,n,i){switch(Wb(e)){case 1:var s=xA;break;case 4:s=bA;break;default:s=Qm}n=s.bind(null,e,n,t),s=void 0,!Jp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wf(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=sr(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}Mb(function(){var c=r,u=Km(n),h=[];e:{var d=oS.get(t);if(d!==void 0){var f=Jm,p=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":f=FA;break;case"focusin":p="focus",f=$f;break;case"focusout":p="blur",f=$f;break;case"beforeblur":case"afterblur":f=$f;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=F0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=kA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=zA;break;case nS:case iS:case sS:f=CA;break;case rS:f=jA;break;case"scroll":f=SA;break;case"wheel":f=HA;break;case"copy":case"cut":case"paste":f=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=V0}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=c,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=ml(y,m),b!=null&&g.push(Sl(y,b,w)))),v)break;y=y.return}0<g.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Qp&&(p=n.relatedTarget||n.fromElement)&&(sr(p)||p[Pi]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?sr(p):null,p!==null&&(v=Lr(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=F0,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=V0,b="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?d:ro(f),w=p==null?d:ro(p),d=new g(b,y+"leave",f,n,u),d.target=v,d.relatedTarget=w,b=null,sr(u)===c&&(g=new g(m,y+"enter",p,n,u),g.target=w,g.relatedTarget=v,b=g),v=b,f&&p)t:{for(g=f,m=p,y=0,w=g;w;w=Wr(w))y++;for(w=0,b=m;b;b=Wr(b))w++;for(;0<y-w;)g=Wr(g),y--;for(;0<w-y;)m=Wr(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Wr(g),m=Wr(m)}g=null}else g=null;f!==null&&Q0(h,d,f,g,!1),p!==null&&v!==null&&Q0(h,v,p,g,!0)}}e:{if(d=c?ro(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=XA;else if(j0(d))if(Xb)S=tM;else{S=ZA;var I=JA}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=eM);if(S&&(S=S(t,c))){Qb(h,S,n,u);break e}I&&I(t,d,c),t==="focusout"&&(I=d._wrapperState)&&I.controlled&&d.type==="number"&&Wp(d,"number",d.value)}switch(I=c?ro(c):window,t){case"focusin":(j0(I)||I.contentEditable==="true")&&(io=I,ig=c,Xa=null);break;case"focusout":Xa=ig=io=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,q0(h,n,u);break;case"selectionchange":if(sM)break;case"keydown":case"keyup":q0(h,n,u)}var k;if(ey)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else no?Gb(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(qb&&n.locale!=="ko"&&(no||_!=="onCompositionStart"?_==="onCompositionEnd"&&no&&(k=Kb()):(ns=u,Xm="value"in ns?ns.value:ns.textContent,no=!0)),I=yh(c,_),0<I.length&&(_=new $0(_,t,null,n,u),h.push({event:_,listeners:I}),k?_.data=k:(k=Yb(n),k!==null&&(_.data=k)))),(k=KA?qA(t,n):GA(t,n))&&(c=yh(c,"onBeforeInput"),0<c.length&&(u=new $0("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=k))}aS(h,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=ml(t,n),r!=null&&i.unshift(Sl(t,r,s)),r=ml(t,e),r!=null&&i.push(Sl(t,r,s))),t=t.return}return i}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q0(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=ml(n,r),l!=null&&o.unshift(Sl(n,l,a))):s||(l=ml(n,r),l!=null&&o.push(Sl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lM=/\r\n?/g,cM=/\u0000|\uFFFD/g;function X0(t){return(typeof t=="string"?t:""+t).replace(lM,`
`).replace(cM,"")}function Xc(t,e,n){if(e=X0(e),X0(t)!==e&&n)throw Error(L(425))}function vh(){}var rg=null,og=null;function ag(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lg=typeof setTimeout=="function"?setTimeout:void 0,uM=typeof clearTimeout=="function"?clearTimeout:void 0,J0=typeof Promise=="function"?Promise:void 0,hM=typeof queueMicrotask=="function"?queueMicrotask:typeof J0<"u"?function(t){return J0.resolve(null).then(t).catch(dM)}:lg;function dM(t){setTimeout(function(){throw t})}function Kf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),wl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);wl(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Jo,El="__reactProps$"+Jo,Pi="__reactContainer$"+Jo,cg="__reactEvents$"+Jo,fM="__reactListeners$"+Jo,pM="__reactHandles$"+Jo;function sr(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pi]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z0(t);t!==null;){if(n=t[Xn])return n;t=Z0(t)}return e}t=n,n=t.parentNode}return null}function uc(t){return t=t[Xn]||t[Pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Ed(t){return t[El]||null}var ug=[],oo=-1;function Os(t){return{current:t}}function Oe(t){0>oo||(t.current=ug[oo],ug[oo]=null,oo--)}function Ae(t,e){oo++,ug[oo]=t.current,t.current=e}var ks={},Ut=Os(ks),ln=Os(!1),vr=ks;function Do(t,e){var n=t.type.contextTypes;if(!n)return ks;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function wh(){Oe(ln),Oe(Ut)}function ew(t,e,n){if(Ut.current!==ks)throw Error(L(168));Ae(Ut,e),Ae(ln,n)}function cS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(L(108,JD(t)||"Unknown",s));return Ke({},n,i)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ks,vr=Ut.current,Ae(Ut,t),Ae(ln,ln.current),!0}function tw(t,e,n){var i=t.stateNode;if(!i)throw Error(L(169));n?(t=cS(t,e,vr),i.__reactInternalMemoizedMergedChildContext=t,Oe(ln),Oe(Ut),Ae(Ut,t)):Oe(ln),Ae(ln,n)}var mi=null,kd=!1,qf=!1;function uS(t){mi===null?mi=[t]:mi.push(t)}function gM(t){kd=!0,uS(t)}function Ns(){if(!qf&&mi!==null){qf=!0;var t=0,e=ke;try{var n=mi;for(ke=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}mi=null,kd=!1}catch(s){throw mi!==null&&(mi=mi.slice(t+1)),Nb(qm,Ns),s}finally{ke=e,qf=!1}}return null}var ao=[],lo=0,xh=null,bh=0,bn=[],Sn=0,wr=null,wi=1,_i="";function qs(t,e){ao[lo++]=bh,ao[lo++]=xh,xh=t,bh=e}function hS(t,e,n){bn[Sn++]=wi,bn[Sn++]=_i,bn[Sn++]=wr,wr=t;var i=wi;t=_i;var s=32-Ln(i)-1;i&=~(1<<s),n+=1;var r=32-Ln(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,wi=1<<32-Ln(e)+s|n<<s|i,_i=r+t}else wi=1<<r|n<<s|i,_i=t}function ny(t){t.return!==null&&(qs(t,1),hS(t,1,0))}function iy(t){for(;t===xh;)xh=ao[--lo],ao[lo]=null,bh=ao[--lo],ao[lo]=null;for(;t===wr;)wr=bn[--Sn],bn[Sn]=null,_i=bn[--Sn],bn[Sn]=null,wi=bn[--Sn],bn[Sn]=null}var gn=null,fn=null,ze=!1,On=null;function dS(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,fn=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wr!==null?{id:wi,overflow:_i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gn=t,fn=null,!0):!1;default:return!1}}function hg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dg(t){if(ze){var e=fn;if(e){var n=e;if(!nw(t,e)){if(hg(t))throw Error(L(418));e=fs(n.nextSibling);var i=gn;e&&nw(t,e)?dS(i,n):(t.flags=t.flags&-4097|2,ze=!1,gn=t)}}else{if(hg(t))throw Error(L(418));t.flags=t.flags&-4097|2,ze=!1,gn=t}}}function iw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function Jc(t){if(t!==gn)return!1;if(!ze)return iw(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ag(t.type,t.memoizedProps)),e&&(e=fn)){if(hg(t))throw fS(),Error(L(418));for(;e;)dS(t,e),e=fs(e.nextSibling)}if(iw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=gn?fs(t.stateNode.nextSibling):null;return!0}function fS(){for(var t=fn;t;)t=fs(t.nextSibling)}function Ao(){fn=gn=null,ze=!1}function sy(t){On===null?On=[t]:On.push(t)}var mM=$i.ReactCurrentBatchConfig;function ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var i=n.stateNode}if(!i)throw Error(L(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Zc(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sw(t){var e=t._init;return e(t._payload)}function pS(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=ys(m,y),m.index=0,m.sibling=null,m}function r(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,w,b){return y===null||y.tag!==6?(y=ep(w,m.mode,b),y.return=m,y):(y=s(y,w),y.return=m,y)}function l(m,y,w,b){var S=w.type;return S===to?u(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gi&&sw(S)===y.type)?(b=s(y,w.props),b.ref=ga(m,y,w),b.return=m,b):(b=Uu(w.type,w.key,w.props,null,m.mode,b),b.ref=ga(m,y,w),b.return=m,b)}function c(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=tp(w,m.mode,b),y.return=m,y):(y=s(y,w.children||[]),y.return=m,y)}function u(m,y,w,b,S){return y===null||y.tag!==7?(y=dr(w,m.mode,b,S),y.return=m,y):(y=s(y,w),y.return=m,y)}function h(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ep(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case jc:return w=Uu(y.type,y.key,y.props,null,m.mode,w),w.ref=ga(m,null,y),w.return=m,w;case eo:return y=tp(y,m.mode,w),y.return=m,y;case Gi:var b=y._init;return h(m,b(y._payload),w)}if(Pa(y)||ua(y))return y=dr(y,m.mode,w,null),y.return=m,y;Zc(m,y)}return null}function d(m,y,w,b){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jc:return w.key===S?l(m,y,w,b):null;case eo:return w.key===S?c(m,y,w,b):null;case Gi:return S=w._init,d(m,y,S(w._payload),b)}if(Pa(w)||ua(w))return S!==null?null:u(m,y,w,b,null);Zc(m,w)}return null}function f(m,y,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,a(y,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jc:return m=m.get(b.key===null?w:b.key)||null,l(y,m,b,S);case eo:return m=m.get(b.key===null?w:b.key)||null,c(y,m,b,S);case Gi:var I=b._init;return f(m,y,w,I(b._payload),S)}if(Pa(b)||ua(b))return m=m.get(w)||null,u(y,m,b,S,null);Zc(y,b)}return null}function p(m,y,w,b){for(var S=null,I=null,k=y,_=y=0,x=null;k!==null&&_<w.length;_++){k.index>_?(x=k,k=null):x=k.sibling;var E=d(m,k,w[_],b);if(E===null){k===null&&(k=x);break}t&&k&&E.alternate===null&&e(m,k),y=r(E,y,_),I===null?S=E:I.sibling=E,I=E,k=x}if(_===w.length)return n(m,k),ze&&qs(m,_),S;if(k===null){for(;_<w.length;_++)k=h(m,w[_],b),k!==null&&(y=r(k,y,_),I===null?S=k:I.sibling=k,I=k);return ze&&qs(m,_),S}for(k=i(m,k);_<w.length;_++)x=f(k,m,_,w[_],b),x!==null&&(t&&x.alternate!==null&&k.delete(x.key===null?_:x.key),y=r(x,y,_),I===null?S=x:I.sibling=x,I=x);return t&&k.forEach(function(M){return e(m,M)}),ze&&qs(m,_),S}function g(m,y,w,b){var S=ua(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var I=S=null,k=y,_=y=0,x=null,E=w.next();k!==null&&!E.done;_++,E=w.next()){k.index>_?(x=k,k=null):x=k.sibling;var M=d(m,k,E.value,b);if(M===null){k===null&&(k=x);break}t&&k&&M.alternate===null&&e(m,k),y=r(M,y,_),I===null?S=M:I.sibling=M,I=M,k=x}if(E.done)return n(m,k),ze&&qs(m,_),S;if(k===null){for(;!E.done;_++,E=w.next())E=h(m,E.value,b),E!==null&&(y=r(E,y,_),I===null?S=E:I.sibling=E,I=E);return ze&&qs(m,_),S}for(k=i(m,k);!E.done;_++,E=w.next())E=f(k,m,_,E.value,b),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?_:E.key),y=r(E,y,_),I===null?S=E:I.sibling=E,I=E);return t&&k.forEach(function(O){return e(m,O)}),ze&&qs(m,_),S}function v(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===to&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case jc:e:{for(var S=w.key,I=y;I!==null;){if(I.key===S){if(S=w.type,S===to){if(I.tag===7){n(m,I.sibling),y=s(I,w.props.children),y.return=m,m=y;break e}}else if(I.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gi&&sw(S)===I.type){n(m,I.sibling),y=s(I,w.props),y.ref=ga(m,I,w),y.return=m,m=y;break e}n(m,I);break}else e(m,I);I=I.sibling}w.type===to?(y=dr(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=Uu(w.type,w.key,w.props,null,m.mode,b),b.ref=ga(m,y,w),b.return=m,m=b)}return o(m);case eo:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(m,y.sibling),y=s(y,w.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=tp(w,m.mode,b),y.return=m,m=y}return o(m);case Gi:return I=w._init,v(m,y,I(w._payload),b)}if(Pa(w))return p(m,y,w,b);if(ua(w))return g(m,y,w,b);Zc(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(m,y.sibling),y=s(y,w),y.return=m,m=y):(n(m,y),y=ep(w,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return v}var Mo=pS(!0),gS=pS(!1),Sh=Os(null),Eh=null,co=null,ry=null;function oy(){ry=co=Eh=null}function ay(t){var e=Sh.current;Oe(Sh),t._currentValue=e}function fg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function vo(t,e){Eh=t,ry=co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(ry!==t)if(t={context:t,memoizedValue:e,next:null},co===null){if(Eh===null)throw Error(L(308));co=t,Eh.dependencies={lanes:0,firstContext:t}}else co=co.next=t;return e}var rr=null;function ly(t){rr===null?rr=[t]:rr.push(t)}function mS(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,ly(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yi=!1;function cy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,we&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ri(t,n)}return s=i.interleaved,s===null?(e.next=e,ly(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ri(t,n)}function Fu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Gm(t,n)}}function rw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kh(t,e,n,i){var s=t.updateQueue;Yi=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ke({},h,d);break e;case 2:Yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);xr|=o,t.lanes=o,t.memoizedState=h}}function ow(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(L(191,s));s.call(i)}}}var hc={},si=Os(hc),kl=Os(hc),Il=Os(hc);function or(t){if(t===hc)throw Error(L(174));return t}function uy(t,e){switch(Ae(Il,e),Ae(kl,t),Ae(si,hc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qp(e,t)}Oe(si),Ae(si,e)}function Po(){Oe(si),Oe(kl),Oe(Il)}function vS(t){or(Il.current);var e=or(si.current),n=qp(e,t.type);e!==n&&(Ae(kl,t),Ae(si,n))}function hy(t){kl.current===t&&(Oe(si),Oe(kl))}var Ue=Os(0);function Ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gf=[];function dy(){for(var t=0;t<Gf.length;t++)Gf[t]._workInProgressVersionPrimary=null;Gf.length=0}var $u=$i.ReactCurrentDispatcher,Yf=$i.ReactCurrentBatchConfig,_r=0,He=null,at=null,gt=null,Th=!1,Ja=!1,Tl=0,yM=0;function Mt(){throw Error(L(321))}function fy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function py(t,e,n,i,s,r){if(_r=r,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?xM:bM,t=n(i,s),Ja){r=0;do{if(Ja=!1,Tl=0,25<=r)throw Error(L(301));r+=1,gt=at=null,e.updateQueue=null,$u.current=SM,t=n(i,s)}while(Ja)}if($u.current=Ch,e=at!==null&&at.next!==null,_r=0,gt=at=He=null,Th=!1,e)throw Error(L(300));return t}function gy(){var t=Tl!==0;return Tl=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?He.memoizedState=gt=t:gt=gt.next=t,gt}function An(){if(at===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=gt===null?He.memoizedState:gt.next;if(e!==null)gt=e,at=t;else{if(t===null)throw Error(L(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},gt===null?He.memoizedState=gt=t:gt=gt.next=t}return gt}function Cl(t,e){return typeof e=="function"?e(t):e}function Qf(t){var e=An(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var i=at,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((_r&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,He.lanes|=u,xr|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,zn(i,e.memoizedState)||(on=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,He.lanes|=r,xr|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xf(t){var e=An(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);zn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function wS(){}function _S(t,e){var n=He,i=An(),s=e(),r=!zn(i.memoizedState,s);if(r&&(i.memoizedState=s,on=!0),i=i.queue,my(SS.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Dl(9,bS.bind(null,n,i,s,e),void 0,null),yt===null)throw Error(L(349));_r&30||xS(n,e,s)}return s}function xS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bS(t,e,n,i){e.value=n,e.getSnapshot=i,ES(e)&&kS(t)}function SS(t,e,n){return n(function(){ES(e)&&kS(t)})}function ES(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function kS(t){var e=Ri(t,1);e!==null&&Fn(e,t,1,-1)}function aw(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e.queue=t,t=t.dispatch=_M.bind(null,He,t),[e.memoizedState,t]}function Dl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function IS(){return An().memoizedState}function Vu(t,e,n,i){var s=Yn();He.flags|=t,s.memoizedState=Dl(1|e,n,void 0,i===void 0?null:i)}function Id(t,e,n,i){var s=An();i=i===void 0?null:i;var r=void 0;if(at!==null){var o=at.memoizedState;if(r=o.destroy,i!==null&&fy(i,o.deps)){s.memoizedState=Dl(e,n,r,i);return}}He.flags|=t,s.memoizedState=Dl(1|e,n,r,i)}function lw(t,e){return Vu(8390656,8,t,e)}function my(t,e){return Id(2048,8,t,e)}function TS(t,e){return Id(4,2,t,e)}function CS(t,e){return Id(4,4,t,e)}function DS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AS(t,e,n){return n=n!=null?n.concat([t]):null,Id(4,4,DS.bind(null,e,t),n)}function yy(){}function MS(t,e){var n=An();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function PS(t,e){var n=An();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function RS(t,e,n){return _r&21?(zn(n,e)||(n=$b(),He.lanes|=n,xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function vM(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var i=Yf.transition;Yf.transition={};try{t(!1),e()}finally{ke=n,Yf.transition=i}}function OS(){return An().memoizedState}function wM(t,e,n){var i=ms(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},NS(t))LS(e,n);else if(n=mS(t,e,n,i),n!==null){var s=Gt();Fn(n,t,i,s),FS(n,e,i)}}function _M(t,e,n){var i=ms(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(NS(t))LS(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,zn(a,o)){var l=e.interleaved;l===null?(s.next=s,ly(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=mS(t,e,s,i),n!==null&&(s=Gt(),Fn(n,t,i,s),FS(n,e,i))}}function NS(t){var e=t.alternate;return t===He||e!==null&&e===He}function LS(t,e){Ja=Th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Gm(t,n)}}var Ch={readContext:Dn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},xM={readContext:Dn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:lw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4194308,4,DS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vu(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Yn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=wM.bind(null,He,t),[i.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:aw,useDebugValue:yy,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=aw(!1),e=t[0];return t=vM.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=He,s=Yn();if(ze){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),yt===null)throw Error(L(349));_r&30||xS(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,lw(SS.bind(null,i,r,t),[t]),i.flags|=2048,Dl(9,bS.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=Yn(),e=yt.identifierPrefix;if(ze){var n=_i,i=wi;n=(i&~(1<<32-Ln(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bM={readContext:Dn,useCallback:MS,useContext:Dn,useEffect:my,useImperativeHandle:AS,useInsertionEffect:TS,useLayoutEffect:CS,useMemo:PS,useReducer:Qf,useRef:IS,useState:function(){return Qf(Cl)},useDebugValue:yy,useDeferredValue:function(t){var e=An();return RS(e,at.memoizedState,t)},useTransition:function(){var t=Qf(Cl)[0],e=An().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:_S,useId:OS,unstable_isNewReconciler:!1},SM={readContext:Dn,useCallback:MS,useContext:Dn,useEffect:my,useImperativeHandle:AS,useInsertionEffect:TS,useLayoutEffect:CS,useMemo:PS,useReducer:Xf,useRef:IS,useState:function(){return Xf(Cl)},useDebugValue:yy,useDeferredValue:function(t){var e=An();return at===null?e.memoizedState=t:RS(e,at.memoizedState,t)},useTransition:function(){var t=Xf(Cl)[0],e=An().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:_S,useId:OS,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Td={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Gt(),s=ms(t),r=Di(i,s);r.payload=e,n!=null&&(r.callback=n),e=ps(t,r,s),e!==null&&(Fn(e,t,s,i),Fu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Gt(),s=ms(t),r=Di(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=ps(t,r,s),e!==null&&(Fn(e,t,s,i),Fu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),i=ms(t),s=Di(n,i);s.tag=2,e!=null&&(s.callback=e),e=ps(t,s,i),e!==null&&(Fn(e,t,i,n),Fu(e,t,i))}};function cw(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!xl(n,i)||!xl(s,r):!0}function $S(t,e,n){var i=!1,s=ks,r=e.contextType;return typeof r=="object"&&r!==null?r=Dn(r):(s=cn(e)?vr:Ut.current,i=e.contextTypes,r=(i=i!=null)?Do(t,s):ks),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Td,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function uw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Td.enqueueReplaceState(e,e.state,null)}function gg(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},cy(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Dn(r):(r=cn(e)?vr:Ut.current,s.context=Do(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(pg(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Td.enqueueReplaceState(s,s.state,null),kh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ro(t,e){try{var n="",i=e;do n+=XD(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function Jf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var EM=typeof WeakMap=="function"?WeakMap:Map;function VS(t,e,n){n=Di(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ah||(Ah=!0,Ig=i),mg(t,e)},n}function zS(t,e,n){n=Di(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){mg(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){mg(t,e),typeof i!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new EM;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=$M.bind(null,t,e,n),e.then(t,t))}function dw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fw(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Di(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var kM=$i.ReactCurrentOwner,on=!1;function Wt(t,e,n,i){e.child=t===null?gS(e,null,n,i):Mo(e,t.child,n,i)}function pw(t,e,n,i,s){n=n.render;var r=e.ref;return vo(e,s),i=py(t,e,n,i,r,s),n=gy(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Oi(t,e,s)):(ze&&n&&ny(e),e.flags|=1,Wt(t,e,i,s),e.child)}function gw(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!ky(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,BS(t,e,r,i,s)):(t=Uu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(o,i)&&t.ref===e.ref)return Oi(t,e,s)}return e.flags|=1,t=ys(r,i),t.ref=e.ref,t.return=e,e.child=t}function BS(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(xl(r,i)&&t.ref===e.ref)if(on=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,Oi(t,e,s)}return yg(t,e,n,i,s)}function jS(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ho,dn),dn|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(ho,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,Ae(ho,dn),dn|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,Ae(ho,dn),dn|=i;return Wt(t,e,s,n),e.child}function US(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yg(t,e,n,i,s){var r=cn(n)?vr:Ut.current;return r=Do(e,r),vo(e,s),n=py(t,e,n,i,r,s),i=gy(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Oi(t,e,s)):(ze&&i&&ny(e),e.flags|=1,Wt(t,e,n,s),e.child)}function mw(t,e,n,i,s){if(cn(n)){var r=!0;_h(e)}else r=!1;if(vo(e,s),e.stateNode===null)zu(t,e),$S(e,n,i),gg(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=cn(n)?vr:Ut.current,c=Do(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&uw(e,o,i,c),Yi=!1;var d=e.memoizedState;o.state=d,kh(e,i,o,s),l=e.memoizedState,a!==i||d!==l||ln.current||Yi?(typeof u=="function"&&(pg(e,n,u,i),l=e.memoizedState),(a=Yi||cw(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,yS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pn(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=cn(n)?vr:Ut.current,l=Do(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&uw(e,o,i,l),Yi=!1,d=e.memoizedState,o.state=d,kh(e,i,o,s);var p=e.memoizedState;a!==h||d!==p||ln.current||Yi?(typeof f=="function"&&(pg(e,n,f,i),p=e.memoizedState),(c=Yi||cw(e,n,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return vg(t,e,n,i,r,s)}function vg(t,e,n,i,s,r){US(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&tw(e,n,!1),Oi(t,e,r);i=e.stateNode,kM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Mo(e,t.child,null,r),e.child=Mo(e,null,a,r)):Wt(t,e,a,r),e.memoizedState=i.state,s&&tw(e,n,!0),e.child}function HS(t){var e=t.stateNode;e.pendingContext?ew(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ew(t,e.context,!1),uy(t,e.containerInfo)}function yw(t,e,n,i,s){return Ao(),sy(s),e.flags|=256,Wt(t,e,n,i),e.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function _g(t){return{baseLanes:t,cachePool:null,transitions:null}}function WS(t,e,n){var i=e.pendingProps,s=Ue.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Ue,s&1),t===null)return dg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ad(o,i,0,null),t=dr(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=_g(n),e.memoizedState=wg,t):vy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return IM(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ys(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=ys(a,r):(r=dr(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?_g(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=wg,i}return r=t.child,t=r.sibling,i=ys(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function vy(t,e){return e=Ad({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,i){return i!==null&&sy(i),Mo(e,t.child,null,n),t=vy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IM(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=Jf(Error(L(422))),eu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Ad({mode:"visible",children:i.children},s,0,null),r=dr(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Mo(e,t.child,null,o),e.child.memoizedState=_g(o),e.memoizedState=wg,r);if(!(e.mode&1))return eu(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(L(419)),i=Jf(r,i,void 0),eu(t,e,o,i)}if(a=(o&t.childLanes)!==0,on||a){if(i=yt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Ri(t,s),Fn(i,t,s,-1))}return Ey(),i=Jf(Error(L(421))),eu(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VM.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,fn=fs(s.nextSibling),gn=e,ze=!0,On=null,t!==null&&(bn[Sn++]=wi,bn[Sn++]=_i,bn[Sn++]=wr,wi=t.id,_i=t.overflow,wr=e),e=vy(e,i.children),e.flags|=4096,e)}function vw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),fg(t.return,e,n)}function Zf(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function KS(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Wt(t,e,i.children,n),i=Ue.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vw(t,n,e);else if(t.tag===19)vw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ae(Ue,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zf(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zf(e,!0,n,null,r);break;case"together":Zf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Oi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TM(t,e,n){switch(e.tag){case 3:HS(e),Ao();break;case 5:vS(e);break;case 1:cn(e.type)&&_h(e);break;case 4:uy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ae(Sh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ae(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?WS(t,e,n):(Ae(Ue,Ue.current&1),t=Oi(t,e,n),t!==null?t.sibling:null);Ae(Ue,Ue.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return KS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Ue,Ue.current),i)break;return null;case 22:case 23:return e.lanes=0,jS(t,e,n)}return Oi(t,e,n)}var qS,xg,GS,YS;qS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xg=function(){};GS=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,or(si.current);var r=null;switch(n){case"input":s=Up(t,s),i=Up(t,i),r=[];break;case"select":s=Ke({},s,{value:void 0}),i=Ke({},i,{value:void 0}),r=[];break;case"textarea":s=Kp(t,s),i=Kp(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=vh)}Gp(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pl.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};YS=function(t,e,n,i){n!==i&&(e.flags|=4)};function ma(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function CM(t,e,n){var i=e.pendingProps;switch(iy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return cn(e.type)&&wh(),Pt(e),null;case 3:return i=e.stateNode,Po(),Oe(ln),Oe(Ut),dy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Jc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Dg(On),On=null))),xg(t,e),Pt(e),null;case 5:hy(e);var s=or(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)GS(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(L(166));return Pt(e),null}if(t=or(si.current),Jc(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[Xn]=e,i[El]=r,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(s=0;s<Oa.length;s++)Me(Oa[s],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":T0(i,r),Me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Me("invalid",i);break;case"textarea":D0(i,r),Me("invalid",i)}Gp(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Xc(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Xc(i.textContent,a,t),s=["children",""+a]):pl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",i)}switch(n){case"input":Uc(i),C0(i,r,!0);break;case"textarea":Uc(i),A0(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=vh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Xn]=e,t[El]=i,qS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yp(n,i),n){case"dialog":Me("cancel",t),Me("close",t),s=i;break;case"iframe":case"object":case"embed":Me("load",t),s=i;break;case"video":case"audio":for(s=0;s<Oa.length;s++)Me(Oa[s],t);s=i;break;case"source":Me("error",t),s=i;break;case"img":case"image":case"link":Me("error",t),Me("load",t),s=i;break;case"details":Me("toggle",t),s=i;break;case"input":T0(t,i),s=Up(t,i),Me("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ke({},i,{value:void 0}),Me("invalid",t);break;case"textarea":D0(t,i),s=Kp(t,i),Me("invalid",t);break;default:s=i}Gp(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?Ib(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Eb(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gl(t,l):typeof l=="number"&&gl(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(pl.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Me("scroll",t):l!=null&&jm(t,r,l,o))}switch(n){case"input":Uc(t),C0(t,i,!1);break;case"textarea":Uc(t),A0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Es(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?po(t,!!i.multiple,r,!1):i.defaultValue!=null&&po(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)YS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(L(166));if(n=or(Il.current),or(si.current),Jc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Xn]=e,(r=i.nodeValue!==n)&&(t=gn,t!==null))switch(t.tag){case 3:Xc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xc(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Xn]=e,e.stateNode=i}return Pt(e),null;case 13:if(Oe(Ue),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&fn!==null&&e.mode&1&&!(e.flags&128))fS(),Ao(),e.flags|=98560,r=!1;else if(r=Jc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(L(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Xn]=e}else Ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),r=!1}else On!==null&&(Dg(On),On=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?lt===0&&(lt=3):Ey())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Po(),xg(t,e),t===null&&bl(e.stateNode.containerInfo),Pt(e),null;case 10:return ay(e.type._context),Pt(e),null;case 17:return cn(e.type)&&wh(),Pt(e),null;case 19:if(Oe(Ue),r=e.memoizedState,r===null)return Pt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)ma(r,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ih(t),o!==null){for(e.flags|=128,ma(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ue,Ue.current&1|2),e.child}t=t.sibling}r.tail!==null&&Je()>Oo&&(e.flags|=128,i=!0,ma(r,!1),e.lanes=4194304)}else{if(!i)if(t=Ih(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ma(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ze)return Pt(e),null}else 2*Je()-r.renderingStartTime>Oo&&n!==1073741824&&(e.flags|=128,i=!0,ma(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Je(),e.sibling=null,n=Ue.current,Ae(Ue,i?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Sy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?dn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function DM(t,e){switch(iy(e),e.tag){case 1:return cn(e.type)&&wh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Po(),Oe(ln),Oe(Ut),dy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hy(e),null;case 13:if(Oe(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Ue),null;case 4:return Po(),null;case 10:return ay(e.type._context),null;case 22:case 23:return Sy(),null;case 24:return null;default:return null}}var tu=!1,Lt=!1,AM=typeof WeakSet=="function"?WeakSet:Set,W=null;function uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){qe(t,e,i)}else n.current=null}function bg(t,e,n){try{n()}catch(i){qe(t,e,i)}}var ww=!1;function MM(t,e){if(rg=gh,t=eS(),ty(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(og={focusedElem:t,selectionRange:n},gh=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Pn(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(b){qe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return p=ww,ww=!1,p}function Za(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&bg(e,n,r)}s=s.next}while(s!==i)}}function Cd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Sg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QS(t){var e=t.alternate;e!==null&&(t.alternate=null,QS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[El],delete e[cg],delete e[fM],delete e[pM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XS(t){return t.tag===5||t.tag===3||t.tag===4}function _w(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vh));else if(i!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function kg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(kg(t,e,n),t=t.sibling;t!==null;)kg(t,e,n),t=t.sibling}var xt=null,Rn=!1;function Ui(t,e,n){for(n=n.child;n!==null;)JS(t,e,n),n=n.sibling}function JS(t,e,n){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(_d,n)}catch{}switch(n.tag){case 5:Lt||uo(n,e);case 6:var i=xt,s=Rn;xt=null,Ui(t,e,n),xt=i,Rn=s,xt!==null&&(Rn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Rn?(t=xt,n=n.stateNode,t.nodeType===8?Kf(t.parentNode,n):t.nodeType===1&&Kf(t,n),wl(t)):Kf(xt,n.stateNode));break;case 4:i=xt,s=Rn,xt=n.stateNode.containerInfo,Rn=!0,Ui(t,e,n),xt=i,Rn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&bg(n,e,o),s=s.next}while(s!==i)}Ui(t,e,n);break;case 1:if(!Lt&&(uo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){qe(n,e,a)}Ui(t,e,n);break;case 21:Ui(t,e,n);break;case 22:n.mode&1?(Lt=(i=Lt)||n.memoizedState!==null,Ui(t,e,n),Lt=i):Ui(t,e,n);break;default:Ui(t,e,n)}}function xw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AM),e.forEach(function(i){var s=zM.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Rn=!1;break e;case 3:xt=a.stateNode.containerInfo,Rn=!0;break e;case 4:xt=a.stateNode.containerInfo,Rn=!0;break e}a=a.return}if(xt===null)throw Error(L(160));JS(r,o,s),xt=null,Rn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZS(e,t),e=e.sibling}function ZS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),qn(t),i&4){try{Za(3,t,t.return),Cd(3,t)}catch(g){qe(t,t.return,g)}try{Za(5,t,t.return)}catch(g){qe(t,t.return,g)}}break;case 1:Mn(e,t),qn(t),i&512&&n!==null&&uo(n,n.return);break;case 5:if(Mn(e,t),qn(t),i&512&&n!==null&&uo(n,n.return),t.flags&32){var s=t.stateNode;try{gl(s,"")}catch(g){qe(t,t.return,g)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&xb(s,r),Yp(a,o);var c=Yp(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Ib(s,h):u==="dangerouslySetInnerHTML"?Eb(s,h):u==="children"?gl(s,h):jm(s,u,h,c)}switch(a){case"input":Hp(s,r);break;case"textarea":bb(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?po(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?po(s,!!r.multiple,r.defaultValue,!0):po(s,!!r.multiple,r.multiple?[]:"",!1))}s[El]=r}catch(g){qe(t,t.return,g)}}break;case 6:if(Mn(e,t),qn(t),i&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(g){qe(t,t.return,g)}}break;case 3:if(Mn(e,t),qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(g){qe(t,t.return,g)}break;case 4:Mn(e,t),qn(t);break;case 13:Mn(e,t),qn(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(xy=Je())),i&4&&xw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||u,Mn(e,t),Lt=c):Mn(e,t),qn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(W=t,u=t.child;u!==null;){for(h=W=u;W!==null;){switch(d=W,f=d.child,d.tag){case 0:case 11:case 14:case 15:Za(4,d,d.return);break;case 1:uo(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){qe(i,n,g)}}break;case 5:uo(d,d.return);break;case 22:if(d.memoizedState!==null){Sw(h);continue}}f!==null?(f.return=d,W=f):Sw(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kb("display",o))}catch(g){qe(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){qe(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mn(e,t),qn(t),i&4&&xw(t);break;case 21:break;default:Mn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XS(n)){var i=n;break e}n=n.return}throw Error(L(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(gl(s,""),i.flags&=-33);var r=_w(t);kg(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=_w(t);Eg(t,a,o);break;default:throw Error(L(161))}}catch(l){qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PM(t,e,n){W=t,eE(t)}function eE(t,e,n){for(var i=(t.mode&1)!==0;W!==null;){var s=W,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||tu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=tu;var c=Lt;if(tu=o,(Lt=l)&&!c)for(W=s;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?Ew(s):l!==null?(l.return=o,W=l):Ew(s);for(;r!==null;)W=r,eE(r),r=r.sibling;W=s,tu=a,Lt=c}bw(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,W=r):bw(t)}}function bw(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Cd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Lt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&ow(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ow(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&wl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Lt||e.flags&512&&Sg(e)}catch(d){qe(e,e.return,d)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Sw(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Ew(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cd(4,e)}catch(l){qe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){qe(e,s,l)}}var r=e.return;try{Sg(e)}catch(l){qe(e,r,l)}break;case 5:var o=e.return;try{Sg(e)}catch(l){qe(e,o,l)}}}catch(l){qe(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var RM=Math.ceil,Dh=$i.ReactCurrentDispatcher,wy=$i.ReactCurrentOwner,Tn=$i.ReactCurrentBatchConfig,we=0,yt=null,nt=null,kt=0,dn=0,ho=Os(0),lt=0,Al=null,xr=0,Dd=0,_y=0,el=null,sn=null,xy=0,Oo=1/0,gi=null,Ah=!1,Ig=null,gs=null,nu=!1,is=null,Mh=0,tl=0,Tg=null,Bu=-1,ju=0;function Gt(){return we&6?Je():Bu!==-1?Bu:Bu=Je()}function ms(t){return t.mode&1?we&2&&kt!==0?kt&-kt:mM.transition!==null?(ju===0&&(ju=$b()),ju):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Wb(t.type)),t):1}function Fn(t,e,n,i){if(50<tl)throw tl=0,Tg=null,Error(L(185));lc(t,n,i),(!(we&2)||t!==yt)&&(t===yt&&(!(we&2)&&(Dd|=n),lt===4&&Xi(t,kt)),un(t,i),n===1&&we===0&&!(e.mode&1)&&(Oo=Je()+500,kd&&Ns()))}function un(t,e){var n=t.callbackNode;mA(t,e);var i=ph(t,t===yt?kt:0);if(i===0)n!==null&&R0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&R0(n),e===1)t.tag===0?gM(kw.bind(null,t)):uS(kw.bind(null,t)),hM(function(){!(we&6)&&Ns()}),n=null;else{switch(Vb(i)){case 1:n=qm;break;case 4:n=Lb;break;case 16:n=fh;break;case 536870912:n=Fb;break;default:n=fh}n=lE(n,tE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tE(t,e){if(Bu=-1,ju=0,we&6)throw Error(L(327));var n=t.callbackNode;if(wo()&&t.callbackNode!==n)return null;var i=ph(t,t===yt?kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ph(t,i);else{e=i;var s=we;we|=2;var r=iE();(yt!==t||kt!==e)&&(gi=null,Oo=Je()+500,hr(t,e));do try{LM();break}catch(a){nE(t,a)}while(1);oy(),Dh.current=r,we=s,nt!==null?e=0:(yt=null,kt=0,e=lt)}if(e!==0){if(e===2&&(s=eg(t),s!==0&&(i=s,e=Cg(t,s))),e===1)throw n=Al,hr(t,0),Xi(t,i),un(t,Je()),n;if(e===6)Xi(t,i);else{if(s=t.current.alternate,!(i&30)&&!OM(s)&&(e=Ph(t,i),e===2&&(r=eg(t),r!==0&&(i=r,e=Cg(t,r))),e===1))throw n=Al,hr(t,0),Xi(t,i),un(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(L(345));case 2:Gs(t,sn,gi);break;case 3:if(Xi(t,i),(i&130023424)===i&&(e=xy+500-Je(),10<e)){if(ph(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lg(Gs.bind(null,t,sn,gi),e);break}Gs(t,sn,gi);break;case 4:if(Xi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Ln(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*RM(i/1960))-i,10<i){t.timeoutHandle=lg(Gs.bind(null,t,sn,gi),i);break}Gs(t,sn,gi);break;case 5:Gs(t,sn,gi);break;default:throw Error(L(329))}}}return un(t,Je()),t.callbackNode===n?tE.bind(null,t):null}function Cg(t,e){var n=el;return t.current.memoizedState.isDehydrated&&(hr(t,e).flags|=256),t=Ph(t,e),t!==2&&(e=sn,sn=n,e!==null&&Dg(e)),t}function Dg(t){sn===null?sn=t:sn.push.apply(sn,t)}function OM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!zn(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xi(t,e){for(e&=~_y,e&=~Dd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),i=1<<n;t[n]=-1,e&=~i}}function kw(t){if(we&6)throw Error(L(327));wo();var e=ph(t,0);if(!(e&1))return un(t,Je()),null;var n=Ph(t,e);if(t.tag!==0&&n===2){var i=eg(t);i!==0&&(e=i,n=Cg(t,i))}if(n===1)throw n=Al,hr(t,0),Xi(t,e),un(t,Je()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,sn,gi),un(t,Je()),null}function by(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Oo=Je()+500,kd&&Ns())}}function br(t){is!==null&&is.tag===0&&!(we&6)&&wo();var e=we;we|=1;var n=Tn.transition,i=ke;try{if(Tn.transition=null,ke=1,t)return t()}finally{ke=i,Tn.transition=n,we=e,!(we&6)&&Ns()}}function Sy(){dn=ho.current,Oe(ho)}function hr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uM(n)),nt!==null)for(n=nt.return;n!==null;){var i=n;switch(iy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wh();break;case 3:Po(),Oe(ln),Oe(Ut),dy();break;case 5:hy(i);break;case 4:Po();break;case 13:Oe(Ue);break;case 19:Oe(Ue);break;case 10:ay(i.type._context);break;case 22:case 23:Sy()}n=n.return}if(yt=t,nt=t=ys(t.current,null),kt=dn=e,lt=0,Al=null,_y=Dd=xr=0,sn=el=null,rr!==null){for(e=0;e<rr.length;e++)if(n=rr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}rr=null}return t}function nE(t,e){do{var n=nt;try{if(oy(),$u.current=Ch,Th){for(var i=He.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Th=!1}if(_r=0,gt=at=He=null,Ja=!1,Tl=0,wy.current=null,n===null||n.return===null){lt=1,Al=e,nt=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=dw(o);if(f!==null){f.flags&=-257,fw(f,o,a,r,e),f.mode&1&&hw(r,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){hw(r,c,e),Ey();break e}l=Error(L(426))}}else if(ze&&a.mode&1){var v=dw(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),fw(v,o,a,r,e),sy(Ro(l,a));break e}}r=l=Ro(l,a),lt!==4&&(lt=2),el===null?el=[r]:el.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var m=VS(r,l,e);rw(r,m);break e;case 1:a=l;var y=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gs===null||!gs.has(w)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=zS(r,a,e);rw(r,b);break e}}r=r.return}while(r!==null)}rE(n)}catch(S){e=S,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(1)}function iE(){var t=Dh.current;return Dh.current=Ch,t===null?Ch:t}function Ey(){(lt===0||lt===3||lt===2)&&(lt=4),yt===null||!(xr&268435455)&&!(Dd&268435455)||Xi(yt,kt)}function Ph(t,e){var n=we;we|=2;var i=iE();(yt!==t||kt!==e)&&(gi=null,hr(t,e));do try{NM();break}catch(s){nE(t,s)}while(1);if(oy(),we=n,Dh.current=i,nt!==null)throw Error(L(261));return yt=null,kt=0,lt}function NM(){for(;nt!==null;)sE(nt)}function LM(){for(;nt!==null&&!aA();)sE(nt)}function sE(t){var e=aE(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?rE(t):nt=e,wy.current=null}function rE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DM(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,nt=null;return}}else if(n=CM(n,e,dn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);lt===0&&(lt=5)}function Gs(t,e,n){var i=ke,s=Tn.transition;try{Tn.transition=null,ke=1,FM(t,e,n,i)}finally{Tn.transition=s,ke=i}return null}function FM(t,e,n,i){do wo();while(is!==null);if(we&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(yA(t,r),t===yt&&(nt=yt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,lE(fh,function(){return wo(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Tn.transition,Tn.transition=null;var o=ke;ke=1;var a=we;we|=4,wy.current=null,MM(t,n),ZS(n,t),iM(og),gh=!!rg,og=rg=null,t.current=n,PM(n),lA(),we=a,ke=o,Tn.transition=r}else t.current=n;if(nu&&(nu=!1,is=t,Mh=s),r=t.pendingLanes,r===0&&(gs=null),hA(n.stateNode),un(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Ah)throw Ah=!1,t=Ig,Ig=null,t;return Mh&1&&t.tag!==0&&wo(),r=t.pendingLanes,r&1?t===Tg?tl++:(tl=0,Tg=t):tl=0,Ns(),null}function wo(){if(is!==null){var t=Vb(Mh),e=Tn.transition,n=ke;try{if(Tn.transition=null,ke=16>t?16:t,is===null)var i=!1;else{if(t=is,is=null,Mh=0,we&6)throw Error(L(331));var s=we;for(we|=4,W=t.current;W!==null;){var r=W,o=r.child;if(W.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var u=W;switch(u.tag){case 0:case 11:case 15:Za(8,u,r)}var h=u.child;if(h!==null)h.return=u,W=h;else for(;W!==null;){u=W;var d=u.sibling,f=u.return;if(QS(u),u===c){W=null;break}if(d!==null){d.return=f,W=d;break}W=f}}}var p=r.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}W=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,W=o;else e:for(;W!==null;){if(r=W,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Za(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,W=m;break e}W=r.return}}var y=t.current;for(W=y;W!==null;){o=W;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,W=w;else e:for(o=y;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cd(9,a)}}catch(S){qe(a,a.return,S)}if(a===o){W=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,W=b;break e}W=a.return}}if(we=s,Ns(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(_d,t)}catch{}i=!0}return i}finally{ke=n,Tn.transition=e}}return!1}function Iw(t,e,n){e=Ro(n,e),e=VS(t,e,1),t=ps(t,e,1),e=Gt(),t!==null&&(lc(t,1,e),un(t,e))}function qe(t,e,n){if(t.tag===3)Iw(t,t,n);else for(;e!==null;){if(e.tag===3){Iw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(gs===null||!gs.has(i))){t=Ro(n,t),t=zS(e,t,1),e=ps(e,t,1),t=Gt(),e!==null&&(lc(e,1,t),un(e,t));break}}e=e.return}}function $M(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(kt&n)===n&&(lt===4||lt===3&&(kt&130023424)===kt&&500>Je()-xy?hr(t,0):_y|=n),un(t,e)}function oE(t,e){e===0&&(t.mode&1?(e=Kc,Kc<<=1,!(Kc&130023424)&&(Kc=4194304)):e=1);var n=Gt();t=Ri(t,e),t!==null&&(lc(t,e,n),un(t,n))}function VM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oE(t,n)}function zM(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(L(314))}i!==null&&i.delete(e),oE(t,n)}var aE;aE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,TM(t,e,n);on=!!(t.flags&131072)}else on=!1,ze&&e.flags&1048576&&hS(e,bh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;zu(t,e),t=e.pendingProps;var s=Do(e,Ut.current);vo(e,n),s=py(null,e,i,t,s,n);var r=gy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(i)?(r=!0,_h(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cy(e),s.updater=Td,e.stateNode=s,s._reactInternals=e,gg(e,i,t,n),e=vg(null,e,i,!0,r,n)):(e.tag=0,ze&&r&&ny(e),Wt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(zu(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=jM(i),t=Pn(i,t),s){case 0:e=yg(null,e,i,t,n);break e;case 1:e=mw(null,e,i,t,n);break e;case 11:e=pw(null,e,i,t,n);break e;case 14:e=gw(null,e,i,Pn(i.type,t),n);break e}throw Error(L(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pn(i,s),yg(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pn(i,s),mw(t,e,i,s,n);case 3:e:{if(HS(e),t===null)throw Error(L(387));i=e.pendingProps,r=e.memoizedState,s=r.element,yS(t,e),kh(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Ro(Error(L(423)),e),e=yw(t,e,i,n,s);break e}else if(i!==s){s=Ro(Error(L(424)),e),e=yw(t,e,i,n,s);break e}else for(fn=fs(e.stateNode.containerInfo.firstChild),gn=e,ze=!0,On=null,n=gS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ao(),i===s){e=Oi(t,e,n);break e}Wt(t,e,i,n)}e=e.child}return e;case 5:return vS(e),t===null&&dg(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,ag(i,s)?o=null:r!==null&&ag(i,r)&&(e.flags|=32),US(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&dg(e),null;case 13:return WS(t,e,n);case 4:return uy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Mo(e,null,i,n):Wt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pn(i,s),pw(t,e,i,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Ae(Sh,i._currentValue),i._currentValue=o,r!==null)if(zn(r.value,o)){if(r.children===s.children&&!ln.current){e=Oi(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Di(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),fg(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fg(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,vo(e,n),s=Dn(s),i=i(s),e.flags|=1,Wt(t,e,i,n),e.child;case 14:return i=e.type,s=Pn(i,e.pendingProps),s=Pn(i.type,s),gw(t,e,i,s,n);case 15:return BS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pn(i,s),zu(t,e),e.tag=1,cn(i)?(t=!0,_h(e)):t=!1,vo(e,n),$S(e,i,s),gg(e,i,s,n),vg(null,e,i,!0,t,n);case 19:return KS(t,e,n);case 22:return jS(t,e,n)}throw Error(L(156,e.tag))};function lE(t,e){return Nb(t,e)}function BM(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,i){return new BM(t,e,n,i)}function ky(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jM(t){if(typeof t=="function")return ky(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hm)return 11;if(t===Wm)return 14}return 2}function ys(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uu(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")ky(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case to:return dr(n.children,s,r,e);case Um:o=8,s|=8;break;case Vp:return t=kn(12,n,e,s|2),t.elementType=Vp,t.lanes=r,t;case zp:return t=kn(13,n,e,s),t.elementType=zp,t.lanes=r,t;case Bp:return t=kn(19,n,e,s),t.elementType=Bp,t.lanes=r,t;case vb:return Ad(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mb:o=10;break e;case yb:o=9;break e;case Hm:o=11;break e;case Wm:o=14;break e;case Gi:o=16,i=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=kn(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function dr(t,e,n,i){return t=kn(7,t,i,e),t.lanes=n,t}function Ad(t,e,n,i){return t=kn(22,t,i,e),t.elementType=vb,t.lanes=n,t.stateNode={isHidden:!1},t}function ep(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function tp(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UM(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nf(0),this.expirationTimes=Nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iy(t,e,n,i,s,r,o,a,l){return t=new UM(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=kn(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cy(r),t}function HM(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function cE(t){if(!t)return ks;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(cn(n))return cS(t,n,e)}return e}function uE(t,e,n,i,s,r,o,a,l){return t=Iy(n,i,!0,t,s,r,o,a,l),t.context=cE(null),n=t.current,i=Gt(),s=ms(n),r=Di(i,s),r.callback=e??null,ps(n,r,s),t.current.lanes=s,lc(t,s,i),un(t,i),t}function Md(t,e,n,i){var s=e.current,r=Gt(),o=ms(s);return n=cE(n),e.context===null?e.context=n:e.pendingContext=n,e=Di(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ps(s,e,o),t!==null&&(Fn(t,s,o,r),Fu(t,s,o)),o}function Rh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ty(t,e){Tw(t,e),(t=t.alternate)&&Tw(t,e)}function WM(){return null}var hE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cy(t){this._internalRoot=t}Pd.prototype.render=Cy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Md(t,e,null,null)};Pd.prototype.unmount=Cy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;br(function(){Md(null,t,null,null)}),e[Pi]=null}};function Pd(t){this._internalRoot=t}Pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=jb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qi.length&&e!==0&&e<Qi[n].priority;n++);Qi.splice(n,0,t),n===0&&Hb(t)}};function Dy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cw(){}function KM(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Rh(o);r.call(c)}}var o=uE(e,i,t,0,null,!1,!1,"",Cw);return t._reactRootContainer=o,t[Pi]=o.current,bl(t.nodeType===8?t.parentNode:t),br(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Rh(l);a.call(c)}}var l=Iy(t,0,!1,null,null,!1,!1,"",Cw);return t._reactRootContainer=l,t[Pi]=l.current,bl(t.nodeType===8?t.parentNode:t),br(function(){Md(e,l,n,i)}),l}function Od(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Rh(o);a.call(l)}}Md(e,o,t,s)}else o=KM(n,e,t,s,i);return Rh(o)}zb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ra(e.pendingLanes);n!==0&&(Gm(e,n|1),un(e,Je()),!(we&6)&&(Oo=Je()+500,Ns()))}break;case 13:br(function(){var i=Ri(t,1);if(i!==null){var s=Gt();Fn(i,t,1,s)}}),Ty(t,1)}};Ym=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=Gt();Fn(e,t,134217728,n)}Ty(t,134217728)}};Bb=function(t){if(t.tag===13){var e=ms(t),n=Ri(t,e);if(n!==null){var i=Gt();Fn(n,t,e,i)}Ty(t,e)}};jb=function(){return ke};Ub=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Xp=function(t,e,n){switch(e){case"input":if(Hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Ed(i);if(!s)throw Error(L(90));_b(i),Hp(i,s)}}}break;case"textarea":bb(t,n);break;case"select":e=n.value,e!=null&&po(t,!!n.multiple,e,!1)}};Db=by;Ab=br;var qM={usingClientEntryPoint:!1,Events:[uc,ro,Ed,Tb,Cb,by]},ya={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GM={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rb(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||WM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{_d=iu.inject(GM),ii=iu}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qM;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dy(e))throw Error(L(200));return HM(t,e,null,n)};wn.createRoot=function(t,e){if(!Dy(t))throw Error(L(299));var n=!1,i="",s=hE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Iy(t,1,!1,null,null,n,!1,i,s),t[Pi]=e.current,bl(t.nodeType===8?t.parentNode:t),new Cy(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Rb(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return br(t)};wn.hydrate=function(t,e,n){if(!Rd(e))throw Error(L(200));return Od(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Dy(t))throw Error(L(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=hE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uE(e,null,t,1,n??null,s,!1,r,o),t[Pi]=e.current,bl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pd(e)};wn.render=function(t,e,n){if(!Rd(e))throw Error(L(200));return Od(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!Rd(t))throw Error(L(40));return t._reactRootContainer?(br(function(){Od(null,null,t,!1,function(){t._reactRootContainer=null,t[Pi]=null})}),!0):!1};wn.unstable_batchedUpdates=by;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Rd(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Od(t,e,n,!1,i)};wn.version="18.3.1-next-f1338f8080-20240426";function dE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dE)}catch(t){console.error(t)}}dE(),db.exports=wn;var YM=db.exports,Dw=YM;Fp.createRoot=Dw.createRoot,Fp.hydrateRoot=Dw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ml.apply(this,arguments)}var ss;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ss||(ss={}));const Aw="popstate";function QM(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return Ag("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:Oh(s)}return JM(e,n,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XM(){return Math.random().toString(36).substr(2,8)}function Mw(t,e){return{usr:t.state,key:t.key,idx:e}}function Ag(t,e,n,i){return n===void 0&&(n=null),Ml({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zo(e):e,{state:n,key:e&&e.key||i||XM()})}function Oh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function JM(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=ss.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ml({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=ss.Pop;let v=u(),m=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:m})}function d(v,m){a=ss.Push;let y=Ag(g.location,v,m);n&&n(y,v),c=u()+1;let w=Mw(y,c),b=g.createHref(y);try{o.pushState(w,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(b)}r&&l&&l({action:a,location:g.location,delta:1})}function f(v,m){a=ss.Replace;let y=Ag(g.location,v,m);n&&n(y,v),c=u();let w=Mw(y,c),b=g.createHref(y);o.replaceState(w,"",b),r&&l&&l({action:a,location:g.location,delta:0})}function p(v){let m=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Oh(v);return y=y.replace(/ $/,"%20"),et(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Aw,h),l=v,()=>{s.removeEventListener(Aw,h),l=null}},createHref(v){return e(s,v)},createURL:p,encodeLocation(v){let m=p(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:f,go(v){return o.go(v)}};return g}var Pw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Pw||(Pw={}));function ZM(t,e,n){return n===void 0&&(n="/"),eP(t,e,n,!1)}function eP(t,e,n,i){let s=typeof e=="string"?Zo(e):e,r=Ay(s.pathname||"/",n);if(r==null)return null;let o=pE(t);tP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=dP(r);a=uP(o[l],c,i)}return a}function pE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(et(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=vs([i,l.relativePath]),u=n.concat(l);r.children&&r.children.length>0&&(et(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pE(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:lP(c,r.index),routesMeta:u})};return t.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of gE(r.path))s(r,o,l)}),e}function gE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=gE(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function tP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const nP=/^:[\w-]+$/,iP=3,sP=2,rP=1,oP=10,aP=-2,Rw=t=>t==="*";function lP(t,e){let n=t.split("/"),i=n.length;return n.some(Rw)&&(i+=aP),e&&(i+=sP),n.filter(s=>!Rw(s)).reduce((s,r)=>s+(nP.test(r)?iP:r===""?rP:oP),i)}function cP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function uP(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",h=Ow({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=Ow({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:vs([r,h.pathname]),pathnameBase:mP(vs([r,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(r=vs([r,h.pathnameBase]))}return o}function Ow(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=hP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let g=a[h]||"";o=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?c[d]=void 0:c[d]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:t}}function hP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function dP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ay(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function fP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Zo(t):t;return{pathname:n?n.startsWith("/")?n:pP(n,e):e,search:yP(i),hash:vP(s)}}function pP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function np(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function My(t,e){let n=gP(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Py(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=Zo(t):(s=Ml({},t),et(!s.pathname||!s.pathname.includes("?"),np("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),np("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),np("#","search","hash",s)));let r=t===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=fP(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),mP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mE=["post","put","patch","delete"];new Set(mE);const _P=["get",...mE];new Set(_P);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pl.apply(this,arguments)}const Ry=P.createContext(null),xP=P.createContext(null),Ls=P.createContext(null),Nd=P.createContext(null),Vi=P.createContext({outlet:null,matches:[],isDataRoute:!1}),yE=P.createContext(null);function bP(t,e){let{relative:n}=e===void 0?{}:e;ea()||et(!1);let{basename:i,navigator:s}=P.useContext(Ls),{hash:r,pathname:o,search:a}=_E(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:vs([i,o])),s.createHref({pathname:l,search:a,hash:r})}function ea(){return P.useContext(Nd)!=null}function dc(){return ea()||et(!1),P.useContext(Nd).location}function vE(t){P.useContext(Ls).static||P.useLayoutEffect(t)}function wE(){let{isDataRoute:t}=P.useContext(Vi);return t?FP():SP()}function SP(){ea()||et(!1);let t=P.useContext(Ry),{basename:e,future:n,navigator:i}=P.useContext(Ls),{matches:s}=P.useContext(Vi),{pathname:r}=dc(),o=JSON.stringify(My(s,n.v7_relativeSplatPath)),a=P.useRef(!1);return vE(()=>{a.current=!0}),P.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=Py(c,JSON.parse(o),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vs([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,r,t])}const EP=P.createContext(null);function kP(t){let e=P.useContext(Vi).outlet;return e&&P.createElement(EP.Provider,{value:t},e)}function _E(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=P.useContext(Ls),{matches:s}=P.useContext(Vi),{pathname:r}=dc(),o=JSON.stringify(My(s,i.v7_relativeSplatPath));return P.useMemo(()=>Py(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function IP(t,e){return TP(t,e)}function TP(t,e,n,i){ea()||et(!1);let{navigator:s}=P.useContext(Ls),{matches:r}=P.useContext(Vi),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=dc(),u;if(e){var h;let v=typeof e=="string"?Zo(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||et(!1),u=v}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=ZM(t,{pathname:f}),g=PP(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:vs([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:vs([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,n,i);return e&&g?P.createElement(Nd.Provider,{value:{location:Pl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ss.Pop}},g):g}function CP(){let t=LP(),e=wP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},r=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,r)}const DP=P.createElement(CP,null);class AP extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Vi.Provider,{value:this.props.routeContext},P.createElement(yE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MP(t){let{routeContext:e,match:n,children:i}=t,s=P.useContext(Ry);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Vi.Provider,{value:e},i)}function PP(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||et(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=n,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,p=!1,g=null,v=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||DP,l&&(c<0&&d===0?($P("route-fallback",!1),p=!0,v=null):c===d&&(p=!0,v=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,d+1)),y=()=>{let w;return f?w=g:p?w=v:h.route.Component?w=P.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,P.createElement(MP,{match:h,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?P.createElement(AP,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var xE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xE||{}),Nh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nh||{});function RP(t){let e=P.useContext(Ry);return e||et(!1),e}function OP(t){let e=P.useContext(xP);return e||et(!1),e}function NP(t){let e=P.useContext(Vi);return e||et(!1),e}function bE(t){let e=NP(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function LP(){var t;let e=P.useContext(yE),n=OP(Nh.UseRouteError),i=bE(Nh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function FP(){let{router:t}=RP(xE.UseNavigateStable),e=bE(Nh.UseNavigateStable),n=P.useRef(!1);return vE(()=>{n.current=!0}),P.useCallback(function(s,r){r===void 0&&(r={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Pl({fromRouteId:e},r)))},[t,e])}const Nw={};function $P(t,e,n){!e&&!Nw[t]&&(Nw[t]=!0)}function VP(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function zP(t){let{to:e,replace:n,state:i,relative:s}=t;ea()||et(!1);let{future:r,static:o}=P.useContext(Ls),{matches:a}=P.useContext(Vi),{pathname:l}=dc(),c=wE(),u=Py(e,My(a,r.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return P.useEffect(()=>c(JSON.parse(h),{replace:n,state:i,relative:s}),[c,h,s,n,i]),null}function BP(t){return kP(t.context)}function Ys(t){et(!1)}function jP(t){let{basename:e="/",children:n=null,location:i,navigationType:s=ss.Pop,navigator:r,static:o=!1,future:a}=t;ea()&&et(!1);let l=e.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:r,static:o,future:Pl({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Zo(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,g=P.useMemo(()=>{let v=Ay(u,l);return v==null?null:{location:{pathname:v,search:h,hash:d,state:f,key:p},navigationType:s}},[l,u,h,d,f,p,s]);return g==null?null:P.createElement(Ls.Provider,{value:c},P.createElement(Nd.Provider,{children:n,value:g}))}function UP(t){let{children:e,location:n}=t;return IP(Mg(e),n)}new Promise(()=>{});function Mg(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(i,s)=>{if(!P.isValidElement(i))return;let r=[...e,s];if(i.type===P.Fragment){n.push.apply(n,Mg(i.props.children,r));return}i.type!==Ys&&et(!1),!i.props.index||!i.props.children||et(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Mg(i.props.children,r)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pg.apply(this,arguments)}function HP(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function WP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KP(t,e){return t.button===0&&(!e||e==="_self")&&!WP(t)}const qP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GP="6";try{window.__reactRouterVersion=GP}catch{}const YP="startTransition",Lw=$D[YP];function QP(t){let{basename:e,children:n,future:i,window:s}=t,r=P.useRef();r.current==null&&(r.current=QM({window:s,v5Compat:!0}));let o=r.current,[a,l]=P.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=P.useCallback(h=>{c&&Lw?Lw(()=>l(h)):l(h)},[l,c]);return P.useLayoutEffect(()=>o.listen(u),[o,u]),P.useEffect(()=>VP(i),[i]),P.createElement(jP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const XP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ip=P.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=HP(e,qP),{basename:f}=P.useContext(Ls),p,g=!1;if(typeof c=="string"&&JP.test(c)&&(p=c,XP))try{let w=new URL(window.location.href),b=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Ay(b.pathname,f);b.origin===w.origin&&S!=null?c=S+b.search+b.hash:g=!0}catch{}let v=bP(c,{relative:s}),m=ZP(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function y(w){i&&i(w),w.defaultPrevented||m(w)}return P.createElement("a",Pg({},d,{href:p||v,onClick:g||r?i:y,ref:n,target:l}))});var Fw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fw||(Fw={}));var $w;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($w||($w={}));function ZP(t,e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=wE(),c=dc(),u=_E(t,{relative:o});return P.useCallback(h=>{if(KP(h,n)){h.preventDefault();let d=i!==void 0?i:Oh(c)===Oh(u);l(t,{replace:d,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,i,s,n,t,r,o,a])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},e2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},EE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):e2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw new t2;const d=r<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class t2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n2=function(t){const e=SE(t);return EE.encodeByteArray(e,!0)},Lh=function(t){return n2(t).replace(/\./g,"")},kE=function(t){try{return EE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=()=>i2().__FIREBASE_DEFAULTS__,r2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},o2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kE(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return s2()||r2()||o2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IE=t=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},a2=t=>{const e=IE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TE=()=>{var t;return(t=Ld())===null||t===void 0?void 0:t.config},CE=t=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Lh(JSON.stringify(n)),Lh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function h2(){var t;const e=(t=Ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p2(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g2(){return!h2()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DE(){try{return typeof indexedDB=="object"}catch{return!1}}function m2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="FirebaseError";class zi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=y2,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}}class fc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?v2(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new zi(s,a,i)}}function v2(t,e){return t.replace(w2,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const w2=/\{\$([^}]+)}/g;function _2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(Vw(r)&&Vw(o)){if(!Fh(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Vw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function x2(t,e){const n=new b2(t,e);return n.subscribe.bind(n)}class b2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");S2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=sp),s.error===void 0&&(s.error=sp),s.complete===void 0&&(s.complete=sp);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class Sr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new l2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I2(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:k2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k2(t){return t===Qs?void 0:t}function I2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new E2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const C2={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},D2=ve.INFO,A2={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},M2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=A2[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Oy{constructor(e){this.name=e,this._logLevel=D2,this._logHandler=M2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const P2=(t,e)=>e.some(n=>t instanceof n);let zw,Bw;function R2(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O2(){return Bw||(Bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,Rg=new WeakMap,ME=new WeakMap,rp=new WeakMap,Ny=new WeakMap;function N2(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(ws(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AE.set(n,t)}).catch(()=>{}),Ny.set(e,t),e}function L2(t){if(Rg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Rg.set(t,e)}let Og={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ME.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function F2(t){Og=t(Og)}function $2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(op(this),e,...n);return ME.set(i,e.sort?e.sort():[e]),ws(i)}:O2().includes(t)?function(...e){return t.apply(op(this),e),ws(AE.get(this))}:function(...e){return ws(t.apply(op(this),e))}}function V2(t){return typeof t=="function"?$2(t):(t instanceof IDBTransaction&&L2(t),P2(t,R2())?new Proxy(t,Og):t)}function ws(t){if(t instanceof IDBRequest)return N2(t);if(rp.has(t))return rp.get(t);const e=V2(t);return e!==t&&(rp.set(t,e),Ny.set(e,t)),e}const op=t=>Ny.get(t);function z2(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=ws(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ws(o.result),l.oldVersion,l.newVersion,ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const B2=["get","getKey","getAll","getAllKeys","count"],j2=["put","add","delete","clear"],ap=new Map;function jw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=j2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||B2.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ap.set(e,r),r}F2(t=>({...t,get:(e,n,i)=>jw(e,n)||t.get(e,n,i),has:(e,n)=>!!jw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function H2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",Uw="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Oy("@firebase/app"),W2="@firebase/app-compat",K2="@firebase/analytics-compat",q2="@firebase/analytics",G2="@firebase/app-check-compat",Y2="@firebase/app-check",Q2="@firebase/auth",X2="@firebase/auth-compat",J2="@firebase/database",Z2="@firebase/database-compat",eR="@firebase/functions",tR="@firebase/functions-compat",nR="@firebase/installations",iR="@firebase/installations-compat",sR="@firebase/messaging",rR="@firebase/messaging-compat",oR="@firebase/performance",aR="@firebase/performance-compat",lR="@firebase/remote-config",cR="@firebase/remote-config-compat",uR="@firebase/storage",hR="@firebase/storage-compat",dR="@firebase/firestore",fR="@firebase/firestore-compat",pR="firebase",gR="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",mR={[Ng]:"fire-core",[W2]:"fire-core-compat",[q2]:"fire-analytics",[K2]:"fire-analytics-compat",[Y2]:"fire-app-check",[G2]:"fire-app-check-compat",[Q2]:"fire-auth",[X2]:"fire-auth-compat",[J2]:"fire-rtdb",[Z2]:"fire-rtdb-compat",[eR]:"fire-fn",[tR]:"fire-fn-compat",[nR]:"fire-iid",[iR]:"fire-iid-compat",[sR]:"fire-fcm",[rR]:"fire-fcm-compat",[oR]:"fire-perf",[aR]:"fire-perf-compat",[lR]:"fire-rc",[cR]:"fire-rc-compat",[uR]:"fire-gcs",[hR]:"fire-gcs-compat",[dR]:"fire-fst",[fR]:"fire-fst-compat","fire-js":"fire-js",[pR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,Fg=new Map;function yR(t,e){try{t.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function No(t){const e=t.name;if(Fg.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Fg.set(e,t);for(const n of $h.values())yR(n,t);return!0}function Ly(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},_s=new fc("app","Firebase",vR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=gR;function PE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Lg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(n||(n=TE()),!n)throw _s.create("no-options");const r=$h.get(s);if(r){if(Fh(n,r.options)&&Fh(i,r.config))return r;throw _s.create("duplicate-app",{appName:s})}const o=new T2(s);for(const l of Fg.values())o.addComponent(l);const a=new wR(n,i,o);return $h.set(s,a),a}function RE(t=Lg){const e=$h.get(t);if(!e&&t===Lg&&TE())return PE();if(!e)throw _s.create("no-app",{appName:t});return e}function xs(t,e,n){var i;let s=(i=mR[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(a.join(" "));return}No(new Sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firebase-heartbeat-database",xR=1,Rl="firebase-heartbeat-store";let lp=null;function OE(){return lp||(lp=z2(_R,xR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Rl)}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),lp}async function bR(t){try{return await(await OE()).transaction(Rl).objectStore(Rl).get(NE(t))}catch(e){if(e instanceof zi)Er.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function Hw(t,e){try{const i=(await OE()).transaction(Rl,"readwrite");await i.objectStore(Rl).put(e,NE(t)),await i.done}catch(n){if(n instanceof zi)Er.warn(n.message);else{const i=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(i.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1024,ER=30*24*60*60*1e3;class kR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ww();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const r=new Date(s.date).valueOf();return Date.now()-r<=ER}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ww(),{heartbeatsToSend:n,unsentEntries:i}=IR(this._heartbeatsCache.heartbeats),s=Lh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ww(){return new Date().toISOString().substring(0,10)}function IR(t,e=SR){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Kw(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DE()?m2().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await bR(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Kw(t){return Lh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t){No(new Sr("platform-logger",e=>new U2(e),"PRIVATE")),No(new Sr("heartbeat",e=>new kR(e),"PRIVATE")),xs(Ng,Uw,t),xs(Ng,Uw,"esm2017"),xs("fire-js","")}CR("");function Fy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DR=LE,FE=new fc("auth","Firebase",LE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Oy("@firebase/auth");function AR(t,...e){Vh.logLevel<=ve.WARN&&Vh.warn(`Auth (${ta}): ${t}`,...e)}function Hu(t,...e){Vh.logLevel<=ve.ERROR&&Vh.error(`Auth (${ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t,...e){throw $y(t,...e)}function ri(t,...e){return $y(t,...e)}function $E(t,e,n){const i=Object.assign(Object.assign({},DR()),{[e]:n});return new fc("auth","Firebase",i).create(e,{appName:t.name})}function MR(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&li(t,"argument-error"),$E(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $y(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return FE.create(t,...e)}function te(t,e,...n){if(!t)throw $y(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hu(e),new Error(e)}function Ni(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PR(){return qw()==="http:"||qw()==="https:"}function qw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PR()||d2()||"connection"in navigator)?navigator.onLine:!0}function OR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=u2()||f2()}get(){return RR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new gc(3e4,6e4);function zE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mc(t,e,n,i,s={}){return BE(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=pc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),VE.fetch()(jE(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function BE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},NR),e);try{const s=new $R(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw su(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw su(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw su(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $E(t,u,c);li(t,u)}}catch(s){if(s instanceof zi)throw s;li(t,"network-request-failed",{message:String(s)})}}async function FR(t,e,n,i,s={}){const r=await mc(t,e,n,i,s);return"mfaPendingCredential"in r&&li(t,"multi-factor-auth-required",{_serverResponse:r}),r}function jE(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Vy(t.config,s):`${t.config.apiScheme}://${s}`}class $R{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ri(this.auth,"network-request-failed")),LR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function su(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=ri(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return mc(t,"POST","/v1/accounts:delete",e)}async function zR(t,e){return mc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BR(t,e=!1){const n=ht(t),i=await n.getIdToken(e),s=zy(i);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:nl(cp(s.auth_time)),issuedAtTime:nl(cp(s.iat)),expirationTime:nl(cp(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function cp(t){return Number(t)*1e3}function zy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const s=kE(n);return s?JSON.parse(s):(Hu("Failed to decode base64 JWT payload"),null)}catch(s){return Hu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jR(t){const e=zy(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zi&&UR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function UR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Ol(t,zR(n,{idToken:i}));te(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?qR(r.providerUserInfo):[],a=KR(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new UE(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function WR(t){const e=ht(t);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KR(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function qR(t){return t.map(e=>{var{providerId:n}=e,i=Fy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){const n=await BE(t,{},async()=>{const i=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=jE(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",VE.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await GR(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new Nl;return i&&(te(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(te(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=Fy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new UE(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BR(this,e)}reload(){return WR(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await zh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ol(this,VR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:b,isAnonymous:S,providerData:I,stsTokenManager:k}=n;te(w&&k,e,"internal-error");const _=Nl.fromJSON(this.name,k);te(typeof w=="string",e,"internal-error"),Hi(h,e.name),Hi(d,e.name),te(typeof b=="boolean",e,"internal-error"),te(typeof S=="boolean",e,"internal-error"),Hi(f,e.name),Hi(p,e.name),Hi(g,e.name),Hi(v,e.name),Hi(m,e.name),Hi(y,e.name);const x=new fr({uid:w,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:_,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(x.providerData=I.map(E=>Object.assign({},E))),v&&(x._redirectEventId=v),x}static async _fromIdTokenResponse(e,n,i=!1){const s=new Nl;s.updateFromServerResponse(n);const r=new fr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await zh(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;function bi(t){Ni(t instanceof Function,"Expected a class definition");let e=Gw.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HE.type="NONE";const Yw=HE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,e,n){return`firebase:${t}:${e}:${n}`}class _o{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Wu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Wu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _o(bi(Yw),e,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||bi(Yw);const o=Wu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=fr._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new _o(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new _o(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YE(e))return"Blackberry";if(QE(e))return"Webos";if(By(e))return"Safari";if((e.includes("chrome/")||KE(e))&&!e.includes("edge/"))return"Chrome";if(GE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function WE(t=ut()){return/firefox\//i.test(t)}function By(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KE(t=ut()){return/crios\//i.test(t)}function qE(t=ut()){return/iemobile/i.test(t)}function GE(t=ut()){return/android/i.test(t)}function YE(t=ut()){return/blackberry/i.test(t)}function QE(t=ut()){return/webos/i.test(t)}function Fd(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YR(t=ut()){var e;return Fd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QR(){return p2()&&document.documentMode===10}function XE(t=ut()){return Fd(t)||GE(t)||QE(t)||YE(t)||/windows phone/i.test(t)||qE(t)}function XR(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t,e=[]){let n;switch(t){case"Browser":n=Qw(ut());break;case"Worker":n=`${Qw(ut())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${i}`}async function ZE(t,e){return mc(t,"GET","/v2/recaptchaConfig",zE(t,e))}function Xw(t){return t!==void 0&&t.enterprise!==void 0}class ek{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function tk(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=ri("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",JR().appendChild(i)})}function ZR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const eO="https://www.google.com/recaptcha/enterprise.js?render=",tO="recaptcha-enterprise",nO="NO_RECAPTCHA";class iO{constructor(e){this.type=tO,this.auth=yc(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{ZE(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ek(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;Xw(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(nO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{i(this.auth).then(a=>{if(!n&&Xw(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}tk(eO+a).then(()=>{s(a,r,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jw(this),this.idTokenSubscription=new Jw(this),this.beforeStateQueue=new sO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bi(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ht(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}async initializeRecaptchaConfig(){const e=await ZE(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new ek(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new iO(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bi(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return te(o,this,"internal-error"),o.then(()=>r(this.currentUser)),typeof n=="function"?e.addObserver(n,i,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yc(t){return ht(t)}class Jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=x2(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t,e){const n=Ly(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Fh(r,e??{}))return s;li(s,"already-initialized")}return n.initialize({options:e})}function aO(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function lO(t,e,n){const i=yc(t);te(i._canInitEmulator,i,"emulator-config-failed"),te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=nk(e),{host:o,port:a}=cO(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||uO()}function nk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cO(t){const e=nk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Zw(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:Zw(o)}}}function Zw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e){return FR(t,"POST","/v1/accounts:signInWithIdp",zE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="http://localhost";class kr extends ik{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=Fy(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new kr(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,xo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:hO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends jy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends vc{constructor(){super("facebook.com")}static credential(e){return kr._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return kr._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return vi.credential(n,i)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends vc{constructor(){super("github.com")}static credential(e){return kr._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends vc{constructor(){super("twitter.com")}static credential(e,n){return kr._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return es.credential(n,i)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await fr._fromIdTokenResponse(e,i,s),o=e_(i);return new Lo({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=e_(i);return new Lo({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function e_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends zi{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Bh(e,n,i,s)}}function sk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(t,r,e,i):r})}async function dO(t,e,n=!1){const i=await Ol(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await Ol(t,sk(i,s,e,t),n);te(r.idToken,i,"internal-error");const o=zy(r.idToken);te(o,i,"internal-error");const{sub:a}=o;return te(t.uid===a,i,"user-mismatch"),Lo._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&li(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(t,e,n=!1){const i="signIn",s=await sk(t,i,e),r=await Lo._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e){return ht(t).setPersistence(e)}function mO(t,e,n,i){return ht(t).onIdTokenChanged(e,n,i)}function yO(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function vO(t,e,n,i){return ht(t).onAuthStateChanged(e,n,i)}function wO(t){return ht(t).signOut()}const jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jh,"1"),this.storage.removeItem(jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(){const t=ut();return By(t)||Fd(t)}const xO=1e3,bO=10;class ok extends rk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_O()&&XR(),this.fallbackToPolling=XE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);QR()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bO):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},xO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ok.type="LOCAL";const ak=ok;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk extends rk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lk.type="SESSION";const ck=lk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new $d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await SO(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Uy("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return window}function kO(t){oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function IO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CO(){return uk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="firebaseLocalStorageDb",DO=1,Uh="firebaseLocalStorage",dk="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vd(t,e){return t.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function AO(){const t=indexedDB.deleteDatabase(hk);return new wc(t).toPromise()}function Vg(){const t=indexedDB.open(hk,DO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Uh,{keyPath:dk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Uh)?e(i):(i.close(),await AO(),e(await Vg()))})})}async function t_(t,e,n){const i=Vd(t,!0).put({[dk]:e,value:n});return new wc(i).toPromise()}async function MO(t,e){const n=Vd(t,!1).get(e),i=await new wc(n).toPromise();return i===void 0?null:i.value}function n_(t,e){const n=Vd(t,!0).delete(e);return new wc(n).toPromise()}const PO=800,RO=3;class fk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>RO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(CO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IO(),!this.activeServiceWorker)return;this.sender=new EO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await t_(e,jh,"1"),await n_(e,jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>t_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>MO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Vd(s,!1).getAll();return new wc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fk.type="LOCAL";const OO=fk;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e){return e?bi(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends ik{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NO(t){return pO(t.auth,new Hy(t),t.bypassAuthState)}function LO(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),fO(n,new Hy(t),t.bypassAuthState)}async function FO(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),dO(n,new Hy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NO;case"linkViaPopup":case"linkViaRedirect":return FO;case"reauthViaPopup":case"reauthViaRedirect":return LO;default:li(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new gc(2e3,1e4);async function VO(t,e,n){const i=yc(t);MR(t,e,jy);const s=pk(i,n);return new ar(i,"signInViaPopup",e,s).executeNotNull()}class ar extends gk{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$O.get())};e()}}ar.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="pendingRedirect",Ku=new Map;class BO extends gk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const i=await jO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jO(t,e){const n=WO(e),i=HO(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function UO(t,e){Ku.set(t._key(),e)}function HO(t){return bi(t._redirectPersistence)}function WO(t){return Wu(zO,t.config.apiKey,t.name)}async function KO(t,e,n=!1){const i=yc(t),s=pk(i,e),o=await new BO(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=10*60*1e3;class GO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!mk(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qO&&this.cachedEventUids.clear(),this.cachedEventUids.has(i_(e))}saveEventToCache(e){this.cachedEventUids.add(i_(e)),this.lastProcessedEventTime=Date.now()}}function i_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e={}){return mc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JO=/^https?/;async function ZO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QO(t);for(const n of e)try{if(eN(n))return}catch{}li(t,"unauthorized-domain")}function eN(t){const e=$g(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!JO.test(n))return!1;if(XO.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new gc(3e4,6e4);function s_(){const t=oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nN(t){return new Promise((e,n)=>{var i,s,r;function o(){s_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s_(),n(ri(t,"network-request-failed"))},timeout:tN.get()})}if(!((s=(i=oi().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=oi().gapi)===null||r===void 0)&&r.load)o();else{const a=ZR("iframefcb");return oi()[a]=()=>{gapi.load?o():n(ri(t,"network-request-failed"))},tk(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw qu=null,e})}let qu=null;function iN(t){return qu=qu||nN(t),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new gc(5e3,15e3),rN="__/auth/iframe",oN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cN(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vy(e,oN):`https://${t.config.authDomain}/${rN}`,i={apiKey:e.apiKey,appName:t.name,v:ta},s=lN.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${pc(i).slice(1)}`}async function uN(t){const e=await iN(t),n=oi().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:cN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=ri(t,"network-request-failed"),a=oi().setTimeout(()=>{r(o)},sN.get());function l(){oi().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dN=500,fN=600,pN="_blank",gN="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mN(t,e,n,i=dN,s=fN){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hN),{width:i.toString(),height:s.toString(),top:r,left:o}),c=ut().toLowerCase();n&&(a=KE(c)?pN:n),WE(c)&&(e=e||gN,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(YR(c)&&a!=="_self")return yN(e||"",a),new r_(null);const h=window.open(e||"",a,u);te(h,t,"popup-blocked");try{h.focus()}catch{}return new r_(h)}function yN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__/auth/handler",wN="emulator/auth/handler",_N=encodeURIComponent("fac");async function o_(t,e,n,i,s,r){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ta,eventId:s};if(e instanceof jy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof vc){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${_N}=${encodeURIComponent(l)}`:"";return`${xN(t)}?${pc(a).slice(1)}${c}`}function xN({config:t}){return t.emulator?Vy(t,wN):`https://${t.authDomain}/${vN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="webStorageSupport";class bN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ck,this._completeRedirectFn=KO,this._overrideRedirectResult=UO}async _openPopup(e,n,i,s){var r;Ni((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await o_(e,n,i,$g(),s);return mN(e,o,Uy())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await o_(e,n,i,$g(),s);return kO(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Ni(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uN(e),i=new GO(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(up,{type:up},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[up];o!==void 0&&n(!!o),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XE()||By()||Fd()}}const SN=bN;var a_="@firebase/auth",l_="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function IN(t){No(new Sr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JE(t)},c=new rO(i,s,r,l);return aO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),No(new Sr("auth-internal",e=>{const n=yc(e.getProvider("auth").getImmediate());return(i=>new EN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(a_,l_,kN(t)),xs(a_,l_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=5*60,CN=CE("authIdTokenMaxAge")||TN;let c_=null;const DN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>CN)return;const s=n==null?void 0:n.token;c_!==s&&(c_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function AN(t=RE()){const e=Ly(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oO(t,{popupRedirectResolver:SN,persistence:[OO,ak,ck]}),i=CE("authTokenSyncURL");if(i){const r=DN(i);yO(n,r,()=>r(n.currentUser)),mO(n,o=>r(o))}const s=IE("auth");return s&&lO(n,`http://${s}`),n}IN("Browser");var MN="firebase",PN="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(MN,PN,"app");var RN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,Wy=Wy||{},ee=RN||self;function zd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _c(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ON(t){return Object.prototype.hasOwnProperty.call(t,hp)&&t[hp]||(t[hp]=++NN)}var hp="closure_uid_"+(1e9*Math.random()>>>0),NN=0;function LN(t,e,n){return t.call.apply(t.bind,arguments)}function FN(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function zt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?zt=LN:zt=FN,zt.apply(null,arguments)}function ru(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function wt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,s,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(i,o)}}function Fs(){this.s=this.s,this.o=this.o}var $N=0;Fs.prototype.s=!1;Fs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$N!=0)&&ON(this)};Fs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ky(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function u_(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(zd(i)){const s=t.length||0,r=i.length||0;t.length=s+r;for(let o=0;o<r;o++)t[s+o]=i[o]}else t.push(i)}}function Bt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var VN=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ee.addEventListener("test",()=>{},e),ee.removeEventListener("test",()=>{},e)}catch{}return t}();function Ll(t){return/^[\s\xa0]*$/.test(t)}function Bd(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function Jn(t){return Bd().indexOf(t)!=-1}function qy(t){return qy[" "](t),t}qy[" "]=function(){};function zN(t,e){var n=PL;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var BN=Jn("Opera"),Fo=Jn("Trident")||Jn("MSIE"),vk=Jn("Edge"),zg=vk||Fo,wk=Jn("Gecko")&&!(Bd().toLowerCase().indexOf("webkit")!=-1&&!Jn("Edge"))&&!(Jn("Trident")||Jn("MSIE"))&&!Jn("Edge"),jN=Bd().toLowerCase().indexOf("webkit")!=-1&&!Jn("Edge");function _k(){var t=ee.document;return t?t.documentMode:void 0}var Bg;e:{var dp="",fp=function(){var t=Bd();if(wk)return/rv:([^\);]+)(\)|;)/.exec(t);if(vk)return/Edge\/([\d\.]+)/.exec(t);if(Fo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(jN)return/WebKit\/(\S+)/.exec(t);if(BN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(fp&&(dp=fp?fp[1]:""),Fo){var pp=_k();if(pp!=null&&pp>parseFloat(dp)){Bg=String(pp);break e}}Bg=dp}var jg;if(ee.document&&Fo){var h_=_k();jg=h_||parseInt(Bg,10)||void 0}else jg=void 0;var UN=jg;function Fl(t,e){if(Bt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wk){e:{try{qy(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:HN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Fl.$.h.call(this)}}wt(Fl,Bt);var HN={2:"touch",3:"pen",4:"mouse"};Fl.prototype.h=function(){Fl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xc="closure_listenable_"+(1e6*Math.random()|0),WN=0;function KN(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=s,this.key=++WN,this.fa=this.ia=!1}function jd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Gy(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function qN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function xk(t){const e={};for(const n in t)e[n]=t[n];return e}const d_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bk(t,e){let n,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(n in i)t[n]=i[n];for(let r=0;r<d_.length;r++)n=d_[r],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ud(t){this.src=t,this.g={},this.h=0}Ud.prototype.add=function(t,e,n,i,s){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=Hg(t,e,i,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new KN(e,this.src,r,!!i,s),e.ia=n,t.push(e)),e};function Ug(t,e){var n=e.type;if(n in t.g){var i=t.g[n],s=yk(i,e),r;(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(jd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hg(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==i)return s}return-1}var Yy="closure_lm_"+(1e6*Math.random()|0),gp={};function Sk(t,e,n,i,s){if(i&&i.once)return kk(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)Sk(t,e[r],n,i,s);return null}return n=Jy(n),t&&t[xc]?t.O(e,n,_c(i)?!!i.capture:!!i,s):Ek(t,e,n,!1,i,s)}function Ek(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=_c(s)?!!s.capture:!!s,a=Xy(t);if(a||(t[Yy]=a=new Ud(t)),n=a.add(e,n,i,o,r),n.proxy)return n;if(i=GN(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)VN||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(Tk(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function GN(){function t(n){return e.call(t.src,t.listener,n)}const e=YN;return t}function kk(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)kk(t,e[r],n,i,s);return null}return n=Jy(n),t&&t[xc]?t.P(e,n,_c(i)?!!i.capture:!!i,s):Ek(t,e,n,!0,i,s)}function Ik(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)Ik(t,e[r],n,i,s);else i=_c(i)?!!i.capture:!!i,n=Jy(n),t&&t[xc]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=Hg(r,n,i,s),-1<n&&(jd(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=Xy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hg(e,n,i,s)),(n=-1<t?e[t]:null)&&Qy(n))}function Qy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[xc])Ug(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Tk(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Xy(e))?(Ug(n,t),n.h==0&&(n.src=null,e[Yy]=null)):jd(t)}}}function Tk(t){return t in gp?gp[t]:gp[t]="on"+t}function YN(t,e){if(t.fa)t=!0;else{e=new Fl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Qy(t),t=n.call(i,e)}return t}function Xy(t){return t=t[Yy],t instanceof Ud?t:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jy(t){return typeof t=="function"?t:(t[mp]||(t[mp]=function(e){return t.handleEvent(e)}),t[mp])}function vt(){Fs.call(this),this.i=new Ud(this),this.S=this,this.J=null}wt(vt,Fs);vt.prototype[xc]=!0;vt.prototype.removeEventListener=function(t,e,n,i){Ik(this,t,e,n,i)};function It(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Bt(e,t);else if(e instanceof Bt)e.target=e.target||t;else{var s=e;e=new Bt(i,t),bk(e,s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=ou(o,i,!0,e)&&s}if(o=e.g=t,s=ou(o,i,!0,e)&&s,s=ou(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)o=e.g=n[r],s=ou(o,i,!1,e)&&s}vt.prototype.N=function(){if(vt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)jd(n[i]);delete t.g[e],t.h--}}this.J=null};vt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};vt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function ou(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ug(t.i,o),s=a.call(l,i)!==!1&&s}}return s&&!i.defaultPrevented}var Zy=ee.JSON.stringify;class QN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function XN(){var t=ev;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class JN{constructor(){this.h=this.g=null}add(e,n){const i=Ck.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var Ck=new QN(()=>new ZN,t=>t.reset());class ZN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function eL(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function tL(t){ee.setTimeout(()=>{throw t},0)}let $l,Vl=!1,ev=new JN,Dk=()=>{const t=ee.Promise.resolve(void 0);$l=()=>{t.then(nL)}};var nL=()=>{for(var t;t=XN();){try{t.h.call(t.g)}catch(n){tL(n)}var e=Ck;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Vl=!1};function Hd(t,e){vt.call(this),this.h=t||1,this.g=e||ee,this.j=zt(this.qb,this),this.l=Date.now()}wt(Hd,vt);B=Hd.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),It(this,"tick"),this.ga&&(tv(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function tv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){Hd.$.N.call(this),tv(this),delete this.g};function nv(t,e,n){if(typeof t=="function")n&&(t=zt(t,n));else if(t&&typeof t.handleEvent=="function")t=zt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function Ak(t){t.g=nv(()=>{t.g=null,t.i&&(t.i=!1,Ak(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class iL extends Fs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ak(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zl(t){Fs.call(this),this.h=t,this.g={}}wt(zl,Fs);var f_=[];function Mk(t,e,n,i){Array.isArray(n)||(n&&(f_[0]=n.toString()),n=f_);for(var s=0;s<n.length;s++){var r=Sk(e,n[s],i||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Pk(t){Gy(t.g,function(e,n){this.g.hasOwnProperty(n)&&Qy(e)},t),t.g={}}zl.prototype.N=function(){zl.$.N.call(this),Pk(this)};zl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Wd(){this.g=!0}Wd.prototype.Ea=function(){this.g=!1};function sL(t,e,n,i,s,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function rL(t,e,n,i,s,r,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+n+`
`+r+" "+o})}function fo(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+aL(t,n)+(i?" "+i:"")})}function oL(t,e){t.info(function(){return"TIMEOUT: "+e})}Wd.prototype.info=function(){};function aL(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Zy(n)}catch{return e}}var Fr={},p_=null;function Kd(){return p_=p_||new vt}Fr.Ta="serverreachability";function Rk(t){Bt.call(this,Fr.Ta,t)}wt(Rk,Bt);function Bl(t){const e=Kd();It(e,new Rk(e))}Fr.STAT_EVENT="statevent";function Ok(t,e){Bt.call(this,Fr.STAT_EVENT,t),this.stat=e}wt(Ok,Bt);function qt(t){const e=Kd();It(e,new Ok(e,t))}Fr.Ua="timingevent";function Nk(t,e){Bt.call(this,Fr.Ua,t),this.size=e}wt(Nk,Bt);function bc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var qd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function iv(){}iv.prototype.h=null;function g_(t){return t.h||(t.h=t.i())}function Fk(){}var Sc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sv(){Bt.call(this,"d")}wt(sv,Bt);function rv(){Bt.call(this,"c")}wt(rv,Bt);var Wg;function Gd(){}wt(Gd,iv);Gd.prototype.g=function(){return new XMLHttpRequest};Gd.prototype.i=function(){return{}};Wg=new Gd;function Ec(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new zl(this),this.P=lL,t=zg?125:void 0,this.V=new Hd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $k}function $k(){this.i=null,this.g="",this.h=!1}var lL=45e3,Kg={},Hh={};B=Ec.prototype;B.setTimeout=function(t){this.P=t};function qg(t,e,n){t.L=1,t.v=Qd(Li(e)),t.s=n,t.S=!0,Vk(t,null)}function Vk(t,e){t.G=Date.now(),kc(t),t.A=Li(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),qk(n.i,"t",i),t.C=0,n=t.l.J,t.h=new $k,t.g=pI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new iL(zt(t.Pa,t,t.g),t.O)),Mk(t.U,t.g,"readystatechange",t.nb),e=t.I?xk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Bl(),sL(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&Zn(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const u=Zn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||zg||this.g&&(this.h.h||this.g.ja()||w_(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Bl(3):Bl(2)),Yd(this);var n=this.g.da();this.ca=n;t:if(zk(this)){var i=w_(this.g);t="";var s=i.length,r=Zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),il(this);var o="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,rL(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ll(a)){var c=a;break t}}c=null}if(n=c)fo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gg(this,n);else{this.i=!1,this.o=3,qt(12),lr(this),il(this);break e}}this.S?(Bk(this,u,o),zg&&this.i&&u==3&&(Mk(this.U,this.V,"tick",this.mb),this.V.start())):(fo(this.j,this.m,o,null),Gg(this,o)),u==4&&lr(this),this.i&&!this.J&&(u==4?uI(this.l,this):(this.i=!1,kc(this)))}else DL(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,qt(12)):(this.o=0,qt(13)),lr(this),il(this)}}}catch{}finally{}};function zk(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Bk(t,e,n){let i=!0,s;for(;!t.J&&t.C<n.length;)if(s=cL(t,n),s==Hh){e==4&&(t.o=4,qt(14),i=!1),fo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Kg){t.o=4,qt(15),fo(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else fo(t.j,t.m,s,null),Gg(t,s);zk(t)&&s!=Hh&&s!=Kg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,qt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),hv(e),e.M=!0,qt(11))):(fo(t.j,t.m,n,"[Invalid Chunked Response]"),lr(t),il(t))}B.mb=function(){if(this.g){var t=Zn(this.g),e=this.g.ja();this.C<e.length&&(Yd(this),Bk(this,t,e),this.i&&t!=4&&kc(this))}};function cL(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Hh:(n=Number(e.substring(n,i)),isNaN(n)?Kg:(i+=1,i+n>e.length?Hh:(e=e.slice(i,i+n),t.C=i+n,e)))}B.cancel=function(){this.J=!0,lr(this)};function kc(t){t.Y=Date.now()+t.P,jk(t,t.P)}function jk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=bc(zt(t.lb,t),e)}function Yd(t){t.B&&(ee.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(oL(this.j,this.A),this.L!=2&&(Bl(),qt(17)),lr(this),this.o=2,il(this)):jk(this,this.Y-t)};function il(t){t.l.H==0||t.J||uI(t.l,t)}function lr(t){Yd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,tv(t.V),Pk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Gg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Yg(n.i,t))){if(!t.K&&Yg(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)qh(n),Zd(n);else break e;uv(n),qt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=bc(zt(n.ib,n),6e3));if(1>=Qk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else cr(n,11)}else if((t.K||n.g==t)&&qh(n),!Ll(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var r=i.i;r.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(ov(r,r.h),r.h=null))}if(i.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Pe(i.I,i.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=fI(i,i.J?i.pa:null,i.Y),o.K){Xk(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(Yd(a),kc(a)),i.g=o}else lI(i);0<n.j.length&&ef(n)}else c[0]!="stop"&&c[0]!="close"||cr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?cr(n,7):cv(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Bl(4)}catch{}}function uL(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zd(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function hL(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Uk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=hL(t),i=uL(t),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],n&&n[r],t)}var Hk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dL(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function pr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof pr){this.h=t.h,Wh(this,t.j),this.s=t.s,this.g=t.g,Kh(this,t.m),this.l=t.l;var e=t.i,n=new jl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),m_(this,n),this.o=t.o}else t&&(e=String(t).match(Hk))?(this.h=!1,Wh(this,e[1]||"",!0),this.s=Na(e[2]||""),this.g=Na(e[3]||"",!0),Kh(this,e[4]),this.l=Na(e[5]||"",!0),m_(this,e[6]||"",!0),this.o=Na(e[7]||"")):(this.h=!1,this.i=new jl(null,this.h))}pr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(La(e,y_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(La(e,y_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(La(n,n.charAt(0)=="/"?gL:pL,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",La(n,yL)),t.join("")};function Li(t){return new pr(t)}function Wh(t,e,n){t.j=n?Na(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Kh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function m_(t,e,n){e instanceof jl?(t.i=e,vL(t.i,t.h)):(n||(e=La(e,mL)),t.i=new jl(e,t.h))}function Pe(t,e,n){t.i.set(e,n)}function Qd(t){return Pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Na(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function La(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,fL),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fL(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var y_=/[#\/\?@]/g,pL=/[#\?:]/g,gL=/[#\?]/g,mL=/[#\?@]/g,yL=/#/g;function jl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $s(t){t.g||(t.g=new Map,t.h=0,t.i&&dL(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=jl.prototype;B.add=function(t,e){$s(this),this.i=null,t=na(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Wk(t,e){$s(t),e=na(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Kk(t,e){return $s(t),e=na(t,e),t.g.has(e)}B.forEach=function(t,e){$s(this),this.g.forEach(function(n,i){n.forEach(function(s){t.call(e,s,i,this)},this)},this)};B.ta=function(){$s(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let r=0;r<s.length;r++)n.push(e[i])}return n};B.Z=function(t){$s(this);let e=[];if(typeof t=="string")Kk(this,t)&&(e=e.concat(this.g.get(na(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return $s(this),this.i=null,t=na(this,t),Kk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function qk(t,e,n){Wk(t,e),0<n.length&&(t.i=null,t.g.set(na(t,e),Ky(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var s=r;o[i]!==""&&(s+="="+encodeURIComponent(String(o[i]))),t.push(s)}}return this.i=t.join("&")};function na(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function vL(t,e){e&&!t.j&&($s(t),t.i=null,t.g.forEach(function(n,i){var s=i.toLowerCase();i!=s&&(Wk(this,i),qk(this,s,n))},t)),t.j=e}var wL=class{constructor(t,e){this.g=t,this.map=e}};function Gk(t){this.l=t||_L,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _L=10;function Yk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Qk(t){return t.h?1:t.g?t.g.size:0}function Yg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ov(t,e){t.g?t.g.add(e):t.h=e}function Xk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Gk.prototype.cancel=function(){if(this.i=Jk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Jk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Ky(t.i)}var xL=class{stringify(t){return ee.JSON.stringify(t,void 0)}parse(t){return ee.JSON.parse(t,void 0)}};function bL(){this.g=new xL}function SL(t,e,n){const i=n||"";try{Uk(t,function(s,r){let o=s;_c(s)&&(o=Zy(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function EL(t,e){const n=new Wd;if(ee.Image){const i=new Image;i.onload=ru(au,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ru(au,n,i,"TestLoadImage: error",!1,e),i.onabort=ru(au,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ru(au,n,i,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function au(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function Ic(t){this.l=t.fc||null,this.j=t.ob||!1}wt(Ic,iv);Ic.prototype.g=function(){return new Xd(this.l,this.j)};Ic.prototype.i=function(t){return function(){return t}}({});function Xd(t,e){vt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=av,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(Xd,vt);var av=0;B=Xd.prototype;B.open=function(t,e){if(this.readyState!=av)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ul(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=av};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Zk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tc(this):Ul(this),this.readyState==3&&Zk(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,Tc(this))};B.Ya=function(t){this.g&&(this.response=t,Tc(this))};B.ka=function(){this.g&&Tc(this)};function Tc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ul(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ul(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var kL=ee.JSON.parse;function Xe(t){vt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eI,this.L=this.M=!1}wt(Xe,vt);var eI="",IL=/^https?$/i,TL=["POST","PUT"];B=Xe.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wg.g(),this.C=this.u?g_(this.u):g_(Wg),this.g.onreadystatechange=zt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){v_(this,r);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const r of i.keys())n.set(r,i.get(r));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),s=ee.FormData&&t instanceof ee.FormData,!(0<=yk(TL,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{iI(this),0<this.B&&((this.L=CL(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zt(this.ua,this)):this.A=nv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){v_(this,r)}};function CL(t){return Fo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof Wy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))};function v_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tI(t),Jd(t)}function tI(t){t.F||(t.F=!0,It(t,"complete"),It(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,It(this,"complete"),It(this,"abort"),Jd(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jd(this,!0)),Xe.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?nI(this):this.kb())};B.kb=function(){nI(this)};function nI(t){if(t.h&&typeof Wy<"u"&&(!t.C[1]||Zn(t)!=4||t.da()!=2)){if(t.v&&Zn(t)==4)nv(t.La,0,t);else if(It(t,"readystatechange"),Zn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var s=String(t.I).match(Hk)[1]||null;!s&&ee.self&&ee.self.location&&(s=ee.self.location.protocol.slice(0,-1)),i=!IL.test(s?s.toLowerCase():"")}n=i}if(n)It(t,"complete"),It(t,"success");else{t.m=6;try{var r=2<Zn(t)?t.g.statusText:""}catch{r=""}t.j=r+" ["+t.da()+"]",tI(t)}}finally{Jd(t)}}}}function Jd(t,e){if(t.g){iI(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||It(t,"ready");try{n.onreadystatechange=i}catch{}}}function iI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function Zn(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<Zn(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),kL(e)}};function w_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case eI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function DL(t){const e={};t=(t.g&&2<=Zn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Ll(t[i]))continue;var n=eL(t[i]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=e[s]||[];e[s]=r,r.push(n)}qN(e,function(i){return i.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function sI(t){let e="";return Gy(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function lv(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=sI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Pe(t,e,n))}function va(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function rI(t){this.Ga=0,this.j=[],this.l=new Wd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=va("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=va("baseRetryDelayMs",5e3,t),this.hb=va("retryDelaySeedMs",1e4,t),this.eb=va("forwardChannelMaxRetries",2,t),this.xa=va("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Gk(t&&t.concurrentRequestLimit),this.Ja=new bL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=rI.prototype;B.ra=8;B.H=1;function cv(t){if(oI(t),t.H==3){var e=t.W++,n=Li(t.I);if(Pe(n,"SID",t.K),Pe(n,"RID",e),Pe(n,"TYPE","terminate"),Cc(t,n),e=new Ec(t,t.l,e),e.L=2,e.v=Qd(Li(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon)try{n=ee.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ee.Image&&(new Image().src=e.v,n=!0),n||(e.g=pI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),kc(e)}dI(t)}function Zd(t){t.g&&(hv(t),t.g.cancel(),t.g=null)}function oI(t){Zd(t),t.u&&(ee.clearTimeout(t.u),t.u=null),qh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function ef(t){if(!Yk(t.i)&&!t.m){t.m=!0;var e=t.Na;$l||Dk(),Vl||($l(),Vl=!0),ev.add(e,t),t.C=0}}function AL(t,e){return Qk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bc(zt(t.Na,t,e),hI(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Ec(this,this.l,t);let r=this.s;if(this.U&&(r?(r=xk(r),bk(r,this.U)):r=this.U),this.o!==null||this.O||(s.I=r,r=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aI(this,s,e),n=Li(this.I),Pe(n,"RID",t),Pe(n,"CVER",22),this.F&&Pe(n,"X-HTTP-Session-Id",this.F),Cc(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(sI(r)))+"&"+e:this.o&&lv(n,this.o,r)),ov(this.i,s),this.bb&&Pe(n,"TYPE","init"),this.P?(Pe(n,"$req",e),Pe(n,"SID","null"),s.aa=!0,qg(s,n,null)):qg(s,n,e),this.H=2}}else this.H==3&&(t?__(this,t):this.j.length==0||Yk(this.i)||__(this))};function __(t,e){var n;e?n=e.m:n=t.W++;const i=Li(t.I);Pe(i,"SID",t.K),Pe(i,"RID",n),Pe(i,"AID",t.V),Cc(t,i),t.o&&t.s&&lv(i,t.o,t.s),n=new Ec(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ov(t.i,n),qg(n,i,e)}function Cc(t,e){t.na&&Gy(t.na,function(n,i){Pe(e,i,n)}),t.h&&Uk({},function(n,i){Pe(e,i,n)})}function aI(t,e,n){n=Math.min(t.j.length,n);var i=t.h?zt(t.h.Va,t.h,t):null;e:{var s=t.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=s[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=r,0>c)r=Math.max(0,s[l].g-100),a=!1;else try{SL(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function lI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;$l||Dk(),Vl||($l(),Vl=!0),ev.add(e,t),t.A=0}}function uv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bc(zt(t.Ma,t),hI(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,cI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bc(zt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qt(10),Zd(this),cI(this))};function hv(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function cI(t){t.g=new Ec(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Li(t.wa);Pe(e,"RID","rpc"),Pe(e,"SID",t.K),Pe(e,"AID",t.V),Pe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Pe(e,"TO",t.qa),Pe(e,"TYPE","xmlhttp"),Cc(t,e),t.o&&t.s&&lv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Qd(Li(e)),n.s=null,n.S=!0,Vk(n,t)}B.ib=function(){this.v!=null&&(this.v=null,Zd(this),uv(this),qt(19))};function qh(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function uI(t,e){var n=null;if(t.g==e){qh(t),hv(t),t.g=null;var i=2}else if(Yg(t.i,e))n=e.F,Xk(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;i=Kd(),It(i,new Nk(i,n)),ef(t)}else lI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(i==1&&AL(t,e)||i==2&&uv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:cr(t,5);break;case 4:cr(t,10);break;case 3:cr(t,6);break;default:cr(t,2)}}}function hI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function cr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=zt(t.pb,t);n||(n=new pr("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||Wh(n,"https"),Qd(n)),EL(n.toString(),i)}else qt(2);t.H=0,t.h&&t.h.za(e),dI(t),oI(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qt(2)):(this.l.info("Failed to ping google.com"),qt(1))};function dI(t){if(t.H=0,t.ma=[],t.h){const e=Jk(t.i);(e.length!=0||t.j.length!=0)&&(u_(t.ma,e),u_(t.ma,t.j),t.i.i.length=0,Ky(t.j),t.j.length=0),t.h.ya()}}function fI(t,e,n){var i=n instanceof pr?Li(n):new pr(n);if(i.g!="")e&&(i.g=e+"."+i.g),Kh(i,i.m);else{var s=ee.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new pr(null);i&&Wh(r,i),e&&(r.g=e),s&&Kh(r,s),n&&(r.l=n),i=r}return n=t.F,e=t.Da,n&&e&&Pe(i,n,e),Pe(i,"VER",t.ra),Cc(t,i),i}function pI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Xe(new Ic({ob:!0})):new Xe(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function gI(){}B=gI.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function Gh(){if(Fo&&!(10<=Number(UN)))throw Error("Environmental error: no available transport.")}Gh.prototype.g=function(t,e){return new yn(t,e)};function yn(t,e){vt.call(this),this.g=new rI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ll(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ll(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ia(this)}wt(yn,vt);yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=fI(t,null,t.Y),ef(t)};yn.prototype.close=function(){cv(this.g)};yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Zy(t),t=n);e.j.push(new wL(e.fb++,t)),e.H==3&&ef(e)};yn.prototype.N=function(){this.g.h=null,delete this.j,cv(this.g),delete this.g,yn.$.N.call(this)};function mI(t){sv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}wt(mI,sv);function yI(){rv.call(this),this.status=1}wt(yI,rv);function ia(t){this.g=t}wt(ia,gI);ia.prototype.Ba=function(){It(this.g,"a")};ia.prototype.Aa=function(t){It(this.g,new mI(t))};ia.prototype.za=function(t){It(this.g,new yI)};ia.prototype.ya=function(){It(this.g,"b")};function ML(){this.blockSize=-1}function Bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}wt(Bn,ML);Bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function yp(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)i[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var r=t.g[3],o=e+(r^n&(s^r))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[2]+606105819&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[6]+2821735955&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[10]+4294925233&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[14]+2792965006&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^r&(n^s))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[11]+643717713&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[15]+3634488961&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[3]+4107603335&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[7]+1735328473&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^r)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[11]+1839030562&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[7]+4139469664&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[3]+3572445317&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[15]+530742520&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~r))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[14]+2878612391&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[10]+4293915773&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[6]+2734768916&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[2]+718787259&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+r&4294967295}Bn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,s=this.h,r=0;r<e;){if(s==0)for(;r<=n;)yp(this,t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(i[s++]=t.charCodeAt(r++),s==this.blockSize){yp(this,i),s=0;break}}else for(;r<e;)if(i[s++]=t[r++],s==this.blockSize){yp(this,i),s=0;break}}this.h=s,this.i+=e};Bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ie(t,e){this.h=e;for(var n=[],i=!0,s=t.length-1;0<=s;s--){var r=t[s]|0;i&&r==e||(n[s]=r,i=!1)}this.g=n}var PL={};function dv(t){return-128<=t&&128>t?zN(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function ei(t){if(isNaN(t)||!isFinite(t))return bo;if(0>t)return Et(ei(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Qg;return new Ie(e,0)}function vI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Et(vI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ei(Math.pow(e,8)),i=bo,s=0;s<t.length;s+=8){var r=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+r),e);8>r?(r=ei(Math.pow(e,r)),i=i.R(r).add(ei(o))):(i=i.R(n),i=i.add(ei(o)))}return i}var Qg=4294967296,bo=dv(0),Xg=dv(1),x_=dv(16777216);B=Ie.prototype;B.ea=function(){if(En(this))return-Et(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Qg+i)*e,e*=Qg}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Si(this))return"0";if(En(this))return"-"+Et(this).toString(t);for(var e=ei(Math.pow(t,6)),n=this,i="";;){var s=Qh(n,e).g;n=Yh(n,s.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Si(n))return r+i;for(;6>r.length;)r="0"+r;i=r+i}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Si(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function En(t){return t.h==-1}B.X=function(t){return t=Yh(this,t),En(t)?-1:Si(t)?0:1};function Et(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ie(n,~t.h).add(Xg)}B.abs=function(){return En(this)?Et(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,s=0;s<=e;s++){var r=i+(this.D(s)&65535)+(t.D(s)&65535),o=(r>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);i=o>>>16,r&=65535,o&=65535,n[s]=o<<16|r}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function Yh(t,e){return t.add(Et(e))}B.R=function(t){if(Si(this)||Si(t))return bo;if(En(this))return En(t)?Et(this).R(Et(t)):Et(Et(this).R(t));if(En(t))return Et(this.R(Et(t)));if(0>this.X(x_)&&0>t.X(x_))return ei(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<t.g.length;s++){var r=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*i+2*s]+=o*l,lu(n,2*i+2*s),n[2*i+2*s+1]+=r*l,lu(n,2*i+2*s+1),n[2*i+2*s+1]+=o*a,lu(n,2*i+2*s+1),n[2*i+2*s+2]+=r*a,lu(n,2*i+2*s+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ie(n,0)};function lu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function wa(t,e){this.g=t,this.h=e}function Qh(t,e){if(Si(e))throw Error("division by zero");if(Si(t))return new wa(bo,bo);if(En(t))return e=Qh(Et(t),e),new wa(Et(e.g),Et(e.h));if(En(e))return e=Qh(t,Et(e)),new wa(Et(e.g),e.h);if(30<t.g.length){if(En(t)||En(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Xg,i=e;0>=i.X(t);)n=b_(n),i=b_(i);var s=Kr(n,1),r=Kr(i,1);for(i=Kr(i,2),n=Kr(n,2);!Si(i);){var o=r.add(i);0>=o.X(t)&&(s=s.add(n),r=o),i=Kr(i,1),n=Kr(n,1)}return e=Yh(t,s.R(e)),new wa(s,e)}for(s=bo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),r=ei(n),o=r.R(e);En(o)||0<o.X(t);)n-=i,r=ei(n),o=r.R(e);Si(r)&&(r=Xg),s=s.add(r),t=Yh(t,o)}return new wa(s,t)}B.gb=function(t){return Qh(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ie(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ie(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ie(n,this.h^t.h)};function b_(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ie(n,t.h)}function Kr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,s=[],r=0;r<i;r++)s[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new Ie(s,t.h)}Gh.prototype.createWebChannel=Gh.prototype.g;yn.prototype.send=yn.prototype.u;yn.prototype.open=yn.prototype.m;yn.prototype.close=yn.prototype.close;qd.NO_ERROR=0;qd.TIMEOUT=8;qd.HTTP_ERROR=6;Lk.COMPLETE="complete";Fk.EventType=Sc;Sc.OPEN="a";Sc.CLOSE="b";Sc.ERROR="c";Sc.MESSAGE="d";vt.prototype.listen=vt.prototype.O;Xe.prototype.listenOnce=Xe.prototype.P;Xe.prototype.getLastError=Xe.prototype.Sa;Xe.prototype.getLastErrorCode=Xe.prototype.Ia;Xe.prototype.getStatus=Xe.prototype.da;Xe.prototype.getResponseJson=Xe.prototype.Wa;Xe.prototype.getResponseText=Xe.prototype.ja;Xe.prototype.send=Xe.prototype.ha;Xe.prototype.setWithCredentials=Xe.prototype.Oa;Bn.prototype.digest=Bn.prototype.l;Bn.prototype.reset=Bn.prototype.reset;Bn.prototype.update=Bn.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=ei;Ie.fromString=vI;var RL=function(){return new Gh},OL=function(){return Kd()},vp=qd,NL=Lk,LL=Fr,S_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},FL=Ic,cu=Fk,$L=Xe,VL=Bn,So=Ie;const E_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Oy("@firebase/firestore");function Jg(){return Ir.logLevel}function F(t,...e){if(Ir.logLevel<=ve.DEBUG){const n=e.map(fv);Ir.debug(`Firestore (${sa}): ${t}`,...n)}}function Kt(t,...e){if(Ir.logLevel<=ve.ERROR){const n=e.map(fv);Ir.error(`Firestore (${sa}): ${t}`,...n)}}function Is(t,...e){if(Ir.logLevel<=ve.WARN){const n=e.map(fv);Ir.warn(`Firestore (${sa}): ${t}`,...n)}}function fv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw Kt(e),new Error(e)}function Q(t,e){t||G()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class BL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jL{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new $n)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Q(typeof i.accessToken=="string"),new wI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new bt(e)}}class UL{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class HL{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new UL(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KL{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.T;return this.T=r.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.I.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.I.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q(typeof n.token=="string"),this.T=n.token,new WL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=qL(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%e.length))}return i}}function re(t,e){return t<e?-1:t>e?1:0}function $o(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}function xI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new We(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new We(0,0))}static max(){return new Y(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,i){n===void 0?n=0:n>e.length&&G(),i===void 0?i=e.length-n:i>e.length-n&&G(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Hl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=e.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends Hl{construct(e,n,i){return new be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new z(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const GL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends Hl{construct(e,n,i){return new it(e,n,i)}static isValidIdentifier(e){return GL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new z(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new z(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(be.fromString(e))}static fromName(e){return new j(be.fromString(e).popFirst(5))}static empty(){return new j(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,i,s){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=s}}function Zg(t){return t.fields.find(e=>e.kind===2)}function Xs(t){return t.fields.filter(e=>e.kind!==2)}bI.UNKNOWN_ID=-1;class YL{constructor(e,n){this.fieldPath=e,this.kind=n}}class Xh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Xh(0,vn.min())}}function QL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(i===1e9?new We(n+1,0):new We(n,i));return new vn(s,j.empty(),e)}function SI(t){return new vn(t.readTime,t.key,-1)}class vn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vn(Y.min(),j.empty(),-1)}static max(){return new vn(Y.max(),j.empty(),-1)}}function pv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==EI)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,i)=>{n(e)})}static reject(e){return new T((n,i)=>{i(e)})}static waitFor(e){return new T((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(e){let n=T.resolve(!1);for(const i of e)n=n.next(s=>s?T.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new T((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(e,n){return new T((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new $n,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new sl(e,n.error)):this.v.resolve()},this.transaction.onerror=i=>{const s=gv(i.target.error);this.v.reject(new sl(e,s))}}static open(e,n,i,s){try{return new tf(n,e.transaction(s,i))}catch(r){throw new sl(n,r)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new JL(n)}}class Ei{constructor(e,n,i){this.name=e,this.version=n,this.V=i,Ei.S(ut())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),er(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!DE())return!1;if(Ei.C())return!0;const e=ut(),n=Ei.S(e),i=0<n&&n<10,s=Ei.N(e),r=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||r)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async $(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=r=>{const o=r.target.result;n(o)},s.onblocked=()=>{i(new sl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=r=>{const o=r.target.error;o.name==="VersionError"?i(new z(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new z(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new sl(e,o))},s.onupgradeneeded=r=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.V.O(o,s.transaction,r.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,s){const r=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.$(e);const a=tf.open(this.db,e,r?"readonly":"readwrite",i),l=s(a).next(c=>(a.P(),c)).catch(c=>(a.abort(c),T.reject(c))).toPromise();return l.catch(()=>{}),await a.R,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class XL{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return er(this.L.delete())}}class sl extends z{constructor(e,n){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Vs(t){return t.name==="IndexedDbTransactionError"}class JL{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),er(i)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),er(this.store.add(e))}get(e){return er(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),er(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),er(this.store.count())}j(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const s=this.cursor(i),r=[];return this.W(s,(o,a)=>{r.push(a)}).next(()=>r)}{const s=this.store.getAll(i.range);return new T((r,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{r(a.target.result)}})}}H(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new T((s,r)=>{i.onerror=o=>{r(o.target.error)},i.onsuccess=o=>{s(o.target.result)}})}J(e,n){F("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.Y=!1;const s=this.cursor(i);return this.W(s,(r,o,a)=>a.delete())}X(e,n){let i;n?i=e:(i={},n=e);const s=this.cursor(i);return this.W(s,n)}Z(e){const n=this.cursor({});return new T((i,s)=>{n.onerror=r=>{const o=gv(r.target.error);s(o)},n.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,n){const i=[];return new T((s,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new XL(a),c=n(a.primaryKey,a.value,l);if(c instanceof T){const u=c.catch(h=>(l.done(),T.reject(h)));i.push(u)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>T.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function er(t){return new T((e,n)=>{t.onsuccess=i=>{const s=i.target.result;e(s)},t.onerror=i=>{const s=gv(i.target.error);n(s)}})}let k_=!1;function gv(t){const e=Ei.S(ut());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k_||(k_=!0,setTimeout(()=>{throw i},0)),i}}return t}class ZL{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){F("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Vs(n)?F("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await $r(n)}await this.et(6e4)})}}class eF{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const i=new Set;let s=n,r=!0;return T.doWhile(()=>r===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return F("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,s).next(a=>{s-=a,i.add(o)});r=!1})).next(()=>n-s)}it(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,i).next(r=>{const o=r.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(s,r)).next(a=>(F("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}rt(e,n){let i=e;return n.changes.forEach((s,r)=>{const o=SI(r);pv(o,i)>0&&(i=o)}),new vn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}In.ct=-1;function nf(t){return t==null}function Wl(t){return t===0&&1/t==-1/0}function tF(t){return typeof t=="number"&&Number.isInteger(t)&&!Wl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=I_(e)),e=nF(t.get(n),e);return I_(e)}function nF(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function I_(t){return t+""}function ti(t){const e=t.length;if(Q(e>=2),e===2)return Q(t.charAt(0)===""&&t.charAt(1)===""),be.emptyPath();const n=e-2,i=[];let s="";for(let r=0;r<e;){const o=t.indexOf("",r);switch((o<0||o>n)&&G(),t.charAt(o+1)){case"":const a=t.substring(r,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),i.push(l);break;case"":s+=t.substring(r,o),s+="\0";break;case"":s+=t.substring(r,o+1);break;default:G()}r=o+2}return new be(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t,e){return[t,Yt(e)]}function II(t,e,n){return[t,Yt(e),n]}const iF={},sF=["prefixPath","collectionGroup","readTime","documentId"],rF=["prefixPath","collectionGroup","documentId"],oF=["collectionGroup","readTime","prefixPath","documentId"],aF=["canonicalId","targetId"],lF=["targetId","path"],cF=["path","targetId"],uF=["collectionId","parent"],hF=["indexId","uid"],dF=["uid","sequenceNumber"],fF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pF=["indexId","uid","orderedDocumentKey"],gF=["userId","collectionPath","documentId"],mF=["userId","collectionPath","largestBatchId"],yF=["userId","collectionGroup","largestBatchId"],TI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vF=[...TI,"documentOverlays"],CI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DI=CI,wF=[...DI,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends kI{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function _t(t,e){const n=se(t);return Ei.M(n.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??St.RED,this.left=s??St.EMPTY,this.right=r??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new St(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,e,n,i,s){return this}insert(t,e,n){return new St(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D_(this.data.getIterator())}getIteratorFrom(e){return new D_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class D_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qr(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new an([])}unionWith(e){let n=new Le(it.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new MI("Invalid base64 string: "+s):s}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const _F=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(t){if(Q(!!t),typeof t=="string"){let e=0;const n=_F.exec(t);if(Q(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yv(t){const e=t.mapValue.fields.__previous_value__;return mv(e)?yv(e):e}function Kl(t){const e=Ts(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n,i,s,r,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Tr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Tr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yu={nullValue:"NULL_VALUE"};function Cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mv(t)?4:PI(t)?9007199254740991:10:G()}function ci(t,e){if(t===e)return!0;const n=Cr(t);if(n!==Cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=Ts(i.timestampValue),o=Ts(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Cs(i.bytesValue).isEqual(Cs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ge(i.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ge(i.integerValue)===Ge(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=Ge(i.doubleValue),o=Ge(s.doubleValue);return r===o?Wl(r)===Wl(o):isNaN(r)&&isNaN(o)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(C_(r)!==C_(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(o[a]===void 0||!ci(r[a],o[a])))return!1;return!0}(t,e);default:return G()}}function ql(t,e){return(t.values||[]).find(n=>ci(n,e))!==void 0}function Ds(t,e){if(t===e)return 0;const n=Cr(t),i=Cr(e);if(n!==i)return re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,r){const o=Ge(s.integerValue||s.doubleValue),a=Ge(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return A_(t.timestampValue,e.timestampValue);case 4:return A_(Kl(t),Kl(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,r){const o=Cs(s),a=Cs(r);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=re(o[l],a[l]);if(c!==0)return c}return re(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,r){const o=re(Ge(s.latitude),Ge(r.latitude));return o!==0?o:re(Ge(s.longitude),Ge(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Ds(o[l],a[l]);if(c)return c}return re(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===rs.mapValue&&r===rs.mapValue)return 0;if(s===rs.mapValue)return 1;if(r===rs.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=r.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=re(a[u],c[u]);if(h!==0)return h;const d=Ds(o[a[u]],l[c[u]]);if(d!==0)return d}return re(a.length,c.length)}(t.mapValue,e.mapValue);default:throw G()}}function A_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Ts(t),i=Ts(e),s=re(n.seconds,i.seconds);return s!==0?s:re(n.nanos,i.nanos)}function Vo(t){return tm(t)}function tm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const s=Ts(i);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Cs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,j.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=tm(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const a of s)o?o=!1:r+=",",r+=`${a}:${tm(i.fields[a])}`;return r+"}"}(t.mapValue):G();var e,n}function Gl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nm(t){return!!t&&"integerValue"in t}function Yl(t){return!!t&&"arrayValue"in t}function M_(t){return!!t&&"nullValue"in t}function P_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qu(t){return!!t&&"mapValue"in t}function rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=rl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function bF(t){return"nullValue"in t?Yu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gl(Tr.empty(),j.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:G()}function SF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gl(Tr.empty(),j.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?rs:G()}function R_(t,e){const n=Ds(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function O_(t,e){const n=Ds(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(n)}setAll(e){let n=it.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=rl(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Qu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Vr(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ft(rl(this.value))}}function RI(t){const e=[];return Vr(t.fields,(n,i)=>{const s=new it([n]);if(Qu(i)){const r=RI(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ye(e,0,Y.min(),Y.min(),Y.min(),Ft.empty(),0)}static newFoundDocument(e,n,i,s){return new Ye(e,1,n,Y.min(),i,s,0)}static newNoDocument(e,n){return new Ye(e,2,n,Y.min(),Y.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new Ye(e,3,n,Y.min(),Y.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ye&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.position=e,this.inclusive=n}}function N_(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=j.comparator(j.fromName(o.referenceValue),n.key):i=Ds(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function L_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n="asc"){this.field=e,this.dir=n}}function EF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{}class ge extends OI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new kF(e,n,i):n==="array-contains"?new CF(e,i):n==="in"?new zI(e,i):n==="not-in"?new DF(e,i):n==="array-contains-any"?new AF(e,i):new ge(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new IF(e,i):new TF(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ds(n,this.value)):n!==null&&Cr(this.value)===Cr(n)&&this.matchesComparison(Ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ee extends OI{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Ee(e,n)}matches(e){return Bo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Bo(t){return t.op==="and"}function im(t){return t.op==="or"}function vv(t){return NI(t)&&Bo(t)}function NI(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function sm(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+Vo(t.value);if(vv(t))return t.filters.map(e=>sm(e)).join(",");{const e=t.filters.map(n=>sm(n)).join(",");return`${t.op}(${e})`}}function LI(t,e){return t instanceof ge?function(n,i){return i instanceof ge&&n.op===i.op&&n.field.isEqual(i.field)&&ci(n.value,i.value)}(t,e):t instanceof Ee?function(n,i){return i instanceof Ee&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,r,o)=>s&&LI(r,i.filters[o]),!0):!1}(t,e):void G()}function FI(t,e){const n=t.filters.concat(e);return Ee.create(n,t.op)}function $I(t){return t instanceof ge?function(e){return`${e.field.canonicalString()} ${e.op} ${Vo(e.value)}`}(t):t instanceof Ee?function(e){return e.op.toString()+" {"+e.getFilters().map($I).join(" ,")+"}"}(t):"Filter"}class kF extends ge{constructor(e,n,i){super(e,n,i),this.key=j.fromName(i.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class IF extends ge{constructor(e,n){super(e,"in",n),this.keys=VI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TF extends ge{constructor(e,n){super(e,"not-in",n),this.keys=VI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>j.fromName(i.referenceValue))}class CF extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yl(n)&&ql(n.arrayValue,this.value)}}class zI extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ql(this.value.arrayValue,n)}}class DF extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ql(this.value.arrayValue,n)}}class AF extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.dt=null}}function rm(t,e=null,n=[],i=[],s=null,r=null,o=null){return new MF(t,e,n,i,s,r,o)}function Dr(t){const e=se(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>sm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Vo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Vo(i)).join(",")),e.dt=n}return e.dt}function Dc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L_(t.startAt,e.startAt)&&L_(t.endAt,e.endAt)}function Jh(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zh(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function F_(t,e,n){let i=Yu,s=!0;for(const r of Zh(t,e)){let o=Yu,a=!0;switch(r.op){case"<":case"<=":o=bF(r.value);break;case"==":case"in":case">=":o=r.value;break;case">":o=r.value,a=!1;break;case"!=":case"not-in":o=Yu}R_({value:i,inclusive:s},{value:o,inclusive:a})<0&&(i=o,s=a)}if(n!==null){for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const o=n.position[r];R_({value:i,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(i=o,s=n.inclusive);break}}return{value:i,inclusive:s}}function $_(t,e,n){let i=rs,s=!0;for(const r of Zh(t,e)){let o=rs,a=!0;switch(r.op){case">=":case">":o=SF(r.value),a=!1;break;case"==":case"in":case"<=":o=r.value;break;case"<":o=r.value,a=!1;break;case"!=":case"not-in":o=rs}O_({value:i,inclusive:s},{value:o,inclusive:a})>0&&(i=o,s=a)}if(n!==null){for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const o=n.position[r];O_({value:i,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(i=o,s=n.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function PF(t,e,n,i,s,r,o,a){return new ra(t,e,n,i,s,r,o,a)}function Ac(t){return new ra(t)}function V_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function sf(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function BI(t){return t.collectionGroup!==null}function ko(t){const e=se(t);if(e.wt===null){e.wt=[];const n=sf(e),i=wv(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new Eo(n)),e.wt.push(new Eo(it.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.wt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Eo(it.keyField(),r))}}}return e.wt}function jn(t){const e=se(t);if(!e._t)if(e.limitType==="F")e._t=rm(e.path,e.collectionGroup,ko(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const r of ko(e)){const o=r.dir==="desc"?"asc":"desc";n.push(new Eo(r.field,o))}const i=e.endAt?new zo(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new zo(e.startAt.position,e.startAt.inclusive):null;e._t=rm(e.path,e.collectionGroup,n,e.filters,e.limit,i,s)}return e._t}function om(t,e){e.getFirstInequalityField(),sf(t);const n=t.filters.concat([e]);return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ed(t,e,n){return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rf(t,e){return Dc(jn(t),jn(e))&&t.limitType===e.limitType}function jI(t){return`${Dr(jn(t))}|lt:${t.limitType}`}function am(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>$I(i)).join(", ")}]`),nf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Vo(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Vo(i)).join(",")),`Target(${n})`}(jn(t))}; limitType=${t.limitType})`}function Mc(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):j.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of ko(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,r,o){const a=N_(s,r,o);return s.inclusive?a<=0:a<0}(n.startAt,ko(n),i)||n.endAt&&!function(s,r,o){const a=N_(s,r,o);return s.inclusive?a>=0:a>0}(n.endAt,ko(n),i))}(t,e)}function RF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UI(t){return(e,n)=>{let i=!1;for(const s of ko(t)){const r=OF(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function OF(t,e,n){const i=t.field.isKeyField()?j.comparator(e.key,n.key):function(s,r,o){const a=r.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Ds(a,l):G()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return AI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=new je(j.comparator);function pn(){return NF}const HI=new je(j.comparator);function Fa(...t){let e=HI;for(const n of t)e=e.insert(n.key,n);return e}function WI(t){let e=HI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ni(){return ol()}function KI(){return ol()}function ol(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const LF=new je(j.comparator),FF=new Le(j.comparator);function ae(...t){let e=FF;for(const n of t)e=e.add(n);return e}const $F=new Le(re);function VF(){return $F}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function GI(t){return{integerValue:""+t}}function zF(t,e){return tF(e)?GI(e):qI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function BF(t,e,n){return t instanceof Ql?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mv(s)&&(s=yv(s)),s&&(r.fields.__previous_value__=s),{mapValue:r}}(n,e):t instanceof jo?QI(t,e):t instanceof Uo?XI(t,e):function(i,s){const r=YI(i,s),o=z_(r)+z_(i.gt);return nm(r)&&nm(i.gt)?GI(o):qI(i.serializer,o)}(t,e)}function jF(t,e,n){return t instanceof jo?QI(t,e):t instanceof Uo?XI(t,e):n}function YI(t,e){return t instanceof Xl?nm(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class Ql extends of{}class jo extends of{constructor(e){super(),this.elements=e}}function QI(t,e){const n=JI(e);for(const i of t.elements)n.some(s=>ci(s,i))||n.push(i);return{arrayValue:{values:n}}}class Uo extends of{constructor(e){super(),this.elements=e}}function XI(t,e){let n=JI(e);for(const i of t.elements)n=n.filter(s=>!ci(s,i));return{arrayValue:{values:n}}}class Xl extends of{constructor(e,n){super(),this.serializer=e,this.gt=n}}function z_(t){return Ge(t.integerValue||t.doubleValue)}function JI(t){return Yl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this.field=e,this.transform=n}}function HF(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof jo&&i instanceof jo||n instanceof Uo&&i instanceof Uo?$o(n.elements,i.elements,ci):n instanceof Xl&&i instanceof Xl?ci(n.gt,i.gt):n instanceof Ql&&i instanceof Ql}(t.transform,e.transform)}class WF{constructor(e,n){this.version=e,this.transformResults=n}}class $t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $t}static exists(e){return new $t(void 0,e)}static updateTime(e){return new $t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class af{}function ZI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lf(t.key,$t.none()):new oa(t.key,t.data,$t.none());{const n=t.data,i=Ft.empty();let s=new Le(it.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Bi(t.key,i,new an(s.toArray()),$t.none())}}function KF(t,e,n){t instanceof oa?function(i,s,r){const o=i.value.clone(),a=j_(i.fieldTransforms,s,r.transformResults);o.setAll(a),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Bi?function(i,s,r){if(!Xu(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=j_(i.fieldTransforms,s,r.transformResults),a=s.data;a.setAll(eT(i)),a.setAll(o),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function al(t,e,n,i){return t instanceof oa?function(s,r,o,a){if(!Xu(s.precondition,r))return o;const l=s.value.clone(),c=U_(s.fieldTransforms,a,r);return l.setAll(c),r.convertToFoundDocument(r.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Bi?function(s,r,o,a){if(!Xu(s.precondition,r))return o;const l=U_(s.fieldTransforms,a,r),c=r.data;return c.setAll(eT(s)),c.setAll(l),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,i):function(s,r,o){return Xu(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(t,e,n)}function qF(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=YI(i.transform,s||null);r!=null&&(n===null&&(n=Ft.empty()),n.set(i.field,r))}return n||null}function B_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&$o(n,i,(s,r)=>HF(s,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends af{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bi extends af{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function eT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function j_(t,e,n){const i=new Map;Q(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,jF(o,a,n[s]))}return i}function U_(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,BF(r,o,e))}return i}class lf extends af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tT extends af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&KF(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=al(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=al(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KI();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=ZI(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,i)=>B_(n,i))&&$o(this.baseMutations,e.baseMutations,(n,i)=>B_(n,i))}}class xv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Q(e.mutations.length===i.length);let s=LF;const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new xv(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,ye;function YF(t){switch(t){default:return G();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function nT(t){if(t===void 0)return Kt("GRPC error has no .code"),D.UNKNOWN;switch(t){case tt.OK:return D.OK;case tt.CANCELLED:return D.CANCELLED;case tt.UNKNOWN:return D.UNKNOWN;case tt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case tt.INTERNAL:return D.INTERNAL;case tt.UNAVAILABLE:return D.UNAVAILABLE;case tt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case tt.NOT_FOUND:return D.NOT_FOUND;case tt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case tt.ABORTED:return D.ABORTED;case tt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case tt.DATA_LOSS:return D.DATA_LOSS;default:return G()}}(ye=tt||(tt={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return hu}static getOrCreateInstance(){return hu===null&&(hu=new Sv),hu}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let hu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=new So([4294967295,4294967295],0);function H_(t){const e=QF().encode(t),n=new VL;return n.update(e),new Uint8Array(n.digest())}function W_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new So([n,i],0),new So([s,r],0)]}class Ev{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(i<0)throw new $a(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=So.fromNumber(this.It)}Et(e,n,i){let s=e.add(n.multiply(So.fromNumber(i)));return s.compare(XF)===1&&(s=new So([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=H_(e),[i,s]=W_(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(i,s,r);if(!this.At(o))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new Ev(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=H_(e),[i,s]=W_(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(i,s,r);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cf(Y.min(),s,new je(re),pn(),ae())}}class Pc{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Pc(i,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,i,s){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=s}}class iT{constructor(e,n){this.targetId=e,this.Vt=n}}class sT{constructor(e,n,i=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class K_{constructor(){this.St=0,this.Dt=G_(),this.Ct=Ct.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ae(),n=ae(),i=ae();return this.Dt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:G()}}),new Pc(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=G_()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class JF{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=pn(),this.zt=q_(),this.Wt=new je(re)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,s)=>{this.te(s)&&n(s)})}ne(e){var n;const i=e.targetId,s=e.Vt.count,r=this.se(i);if(r){const o=r.target;if(Jh(o))if(s===0){const a=new j(o.path);this.Yt(i,a,Ye.newNoDocument(a,Y.min()))}else Q(s===1);else{const a=this.ie(i);if(a!==s){const l=this.re(e,a);if(l!==0){this.ee(i);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,c)}(n=Sv.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,u,h){var d,f,p,g,v,m;const y={localCacheCount:u,existenceFilterCount:h.count},w=h.unchangedNames;return w&&(y.bloomFilter={applied:c===0,hashCount:(d=w==null?void 0:w.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(g=(p=(f=w==null?void 0:w.bits)===null||f===void 0?void 0:f.bitmap)===null||p===void 0?void 0:p.length)!==null&&g!==void 0?g:0,padding:(m=(v=w==null?void 0:w.bits)===null||v===void 0?void 0:v.padding)!==null&&m!==void 0?m:0}),y}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:s}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=i;let l,c;try{l=Cs(r).toUint8Array()}catch(u){if(u instanceof MI)return Is("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new Ev(l,o,a)}catch(u){return Is(u instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.It===0?1:s!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let s=0;return i.forEach(r=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;n.vt(a)||(this.Yt(e,r,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((r,o)=>{const a=this.se(o);if(a){if(r.current&&Jh(a.target)){const l=new j(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,Ye.newNoDocument(l,e))}r.Mt&&(n.set(o,r.Ot()),r.Ft())}});let i=ae();this.zt.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.jt.forEach((r,o)=>o.setReadTime(e));const s=new cf(e,n,this.Wt,this.jt,i);return this.jt=pn(),this.zt=q_(),this.Wt=new je(re),s}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new K_,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Le(re),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new K_),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function q_(){return new je(j.comparator)}function G_(){return new je(j.comparator)}const ZF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),e$=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),t$=(()=>({and:"AND",or:"OR"}))();class n${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lm(t,e){return t.useProto3Json||nf(e)?e:{value:e}}function Ho(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i$(t,e){return Ho(t,e.toTimestamp())}function Qt(t){return Q(!!t),Y.fromTimestamp(function(e){const n=Ts(e);return new We(n.seconds,n.nanos)}(t))}function kv(t,e){return function(n){return new be(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function oT(t){const e=be.fromString(t);return Q(pT(e)),e}function td(t,e){return kv(t.databaseId,e.path)}function gr(t,e){const n=oT(e);if(n.get(1)!==t.databaseId.projectId)throw new z(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(lT(n))}function cm(t,e){return kv(t.databaseId,e)}function aT(t){const e=oT(t);return e.length===4?be.emptyPath():lT(e)}function um(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lT(t){return Q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Y_(t,e,n){return{name:td(t,e),fields:n.value.mapValue.fields}}function s$(t,e,n){const i=gr(t,e.name),s=Qt(e.updateTime),r=e.createTime?Qt(e.createTime):Y.min(),o=new Ft({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(i,s,r,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function r$(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(l,c){return l.useProto3Json?(Q(c===void 0||typeof c=="string"),Ct.fromBase64String(c||"")):(Q(c===void 0||c instanceof Uint8Array),Ct.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?D.UNKNOWN:nT(l.code);return new z(c,l.message||"")}(o);n=new sT(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=gr(t,i.document.name),r=Qt(i.document.updateTime),o=i.document.createTime?Qt(i.document.createTime):Y.min(),a=new Ft({mapValue:{fields:i.document.fields}}),l=Ye.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Ju(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=gr(t,i.document),r=i.readTime?Qt(i.readTime):Y.min(),o=Ye.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=gr(t,i.document),r=i.removedTargetIds||[];n=new Ju([],r,s,null)}else{if(!("filter"in e))return G();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new GF(s,r),a=i.targetId;n=new iT(a,o)}}return n}function nd(t,e){let n;if(e instanceof oa)n={update:Y_(t,e.key,e.value)};else if(e instanceof lf)n={delete:td(t,e.key)};else if(e instanceof Bi)n={update:Y_(t,e.key,e.data),updateMask:h$(e.fieldMask)};else{if(!(e instanceof tT))return G();n={verify:td(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const o=r.transform;if(o instanceof Ql)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof jo)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Uo)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Xl)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw G()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:i$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(t,e.precondition)),n}function hm(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?$t.updateTime(Qt(s.updateTime)):s.exists!==void 0?$t.exists(s.exists):$t.none()}(e.currentDocument):$t.none(),i=e.updateTransforms?e.updateTransforms.map(s=>function(r,o){let a=null;if("setToServerValue"in o)Q(o.setToServerValue==="REQUEST_TIME"),a=new Ql;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new jo(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new Uo(c)}else"increment"in o?a=new Xl(r,o.increment):G();const l=it.fromServerFormat(o.fieldPath);return new UF(l,a)}(t,s)):[];if(e.update){e.update.name;const s=gr(t,e.update.name),r=new Ft({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new an(l.map(c=>it.fromServerFormat(c)))}(e.updateMask);return new Bi(s,r,o,n,i)}return new oa(s,r,n,i)}if(e.delete){const s=gr(t,e.delete);return new lf(s,n)}if(e.verify){const s=gr(t,e.verify);return new tT(s,n)}return G()}function o$(t,e){return t&&t.length>0?(Q(e!==void 0),t.map(n=>function(i,s){let r=i.updateTime?Qt(i.updateTime):Qt(s);return r.isEqual(Y.min())&&(r=Qt(s)),new WF(r,i.transformResults||[])}(n,e))):[]}function cT(t,e){return{documents:[cm(t,e.path)]}}function uT(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=cm(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cm(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(l){if(l.length!==0)return fT(Ee.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:Xr(u.field),direction:l$(u.dir)}}(c))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=lm(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function hT(t){let e=aT(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Q(i===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(u){const h=dT(u);return h instanceof Ee&&vv(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new Eo(Jr(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,nf(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,d=u.values||[];return new zo(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,d=u.values||[];return new zo(d,h)}(n.endAt)),PF(e,s,o,r,a,"F",l,c)}function a$(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dT(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Jr(e.unaryFilter.field);return ge.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Jr(e.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jr(e.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Jr(e.unaryFilter.field);return ge.create(r,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(e){return ge.create(Jr(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Ee.create(e.compositeFilter.filters.map(n=>dT(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return G()}}(e.compositeFilter.op))}(t):G()}function l$(t){return ZF[t]}function c$(t){return e$[t]}function u$(t){return t$[t]}function Xr(t){return{fieldPath:t.canonicalString()}}function Jr(t){return it.fromServerFormat(t.fieldPath)}function fT(t){return t instanceof ge?function(e){if(e.op==="=="){if(P_(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NAN"}};if(M_(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(P_(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NOT_NAN"}};if(M_(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(e.field),op:c$(e.op),value:e.value}}}(t):t instanceof Ee?function(e){const n=e.getFilters().map(i=>fT(i));return n.length===1?n[0]:{compositeFilter:{op:u$(e.op),filters:n}}}(t):G()}function h$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,i,s,r=Y.min(),o=Y.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.fe=e}}function d$(t,e){let n;if(e.document)n=s$(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=j.fromSegments(e.noDocument.path),s=Mr(e.noDocument.readTime);n=Ye.newNoDocument(i,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{const i=j.fromSegments(e.unknownDocument.path),s=Mr(e.unknownDocument.version);n=Ye.newUnknownDocument(i,s)}}return e.readTime&&n.setReadTime(function(i){const s=new We(i[0],i[1]);return Y.fromTimestamp(s)}(e.readTime)),n}function Q_(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:id(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,r){return{name:td(s,r.key),fields:r.data.value.mapValue.fields,updateTime:Ho(s,r.version.toTimestamp()),createTime:Ho(s,r.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Ar(e.version)};else{if(!e.isUnknownDocument())return G();i.unknownDocument={path:n.path.toArray(),version:Ar(e.version)}}return i}function id(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ar(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mr(t){const e=new We(t.seconds,t.nanoseconds);return Y.fromTimestamp(e)}function tr(t,e){const n=(e.baseMutations||[]).map(r=>hm(t.fe,r));for(let r=0;r<e.mutations.length-1;++r){const o=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){const a=e.mutations[r+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}const i=e.mutations.map(r=>hm(t.fe,r)),s=We.fromMillis(e.localWriteTimeMs);return new _v(e.batchId,s,n,i)}function Va(t){const e=Mr(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Mr(t.lastLimboFreeSnapshotVersion):Y.min();let i;var s;return t.query.documents!==void 0?(Q((s=t.query).documents.length===1),i=jn(Ac(aT(s.documents[0])))):i=function(r){return jn(hT(r))}(t.query),new ki(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ct.fromBase64String(t.resumeToken))}function mT(t,e){const n=Ar(e.snapshotVersion),i=Ar(e.lastLimboFreeSnapshotVersion);let s;s=Jh(e.target)?cT(t.fe,e.target):uT(t.fe,e.target);const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dr(e.target),readTime:n,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function yT(t){const e=hT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}function wp(t,e){return new bv(e.largestBatchId,hm(t.fe,e.overlayMutation))}function X_(t,e){const n=e.path.lastSegment();return[t,Yt(e.path.popLast()),n]}function J_(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ar(i.readTime),documentKey:Yt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${getBundleMetadata(e,n){return Z_(e).get(n).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Mr(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return Z_(e).put({bundleId:(i=n).id,createTime:Ar(Qt(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return e1(e).get(n).next(i=>{if(i)return{name:(s=i).name,query:yT(s.bundledQuery),readTime:Mr(s.readTime)};var s})}saveNamedQuery(e,n){return e1(e).put(function(i){return{name:i.name,readTime:Ar(Qt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Z_(t){return _t(t,"bundles")}function e1(t){return _t(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){const i=n.uid||"";return new uf(e,i)}getOverlay(e,n){return _a(e).get(X_(this.userId,n)).next(i=>i?wp(this.serializer,i):null)}getOverlays(e,n){const i=ni();return T.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){const s=[];return i.forEach((r,o)=>{const a=new bv(n,o);s.push(this.we(e,a))}),T.waitFor(s)}removeOverlaysForBatchId(e,n,i){const s=new Set;n.forEach(o=>s.add(Yt(o.getCollectionPath())));const r=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);r.push(_a(e).J("collectionPathOverlayIndex",a))}),T.waitFor(r)}getOverlaysForCollection(e,n,i){const s=ni(),r=Yt(n),o=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return _a(e).j("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=wp(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,i,s){const r=ni();let o;const a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return _a(e).X({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=wp(this.serializer,c);r.size()<s||h.largestBatchId===o?(r.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>r)}we(e,n){return _a(e).put(function(i,s,r){const[o,a,l]=X_(s,r.mutation.key);return{userId:s,collectionPath:a,documentId:l,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:nd(i.fe,r.mutation)}}(this.serializer,this.userId,n))}}function _a(t){return _t(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Ge(e.integerValue));else if("doubleValue"in e){const i=Ge(e.doubleValue);isNaN(i)?this.ye(n,13):(this.ye(n,15),Wl(i)?n.pe(0):n.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(n,20),typeof i=="string"?n.Ie(i):(n.Ie(`${i.seconds||""}`),n.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Cs(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(n,45),n.pe(i.latitude||0),n.pe(i.longitude||0)}else"mapValue"in e?PI(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):G()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const i=e.fields||{};this.ye(n,55);for(const s of Object.keys(i))this.Te(s,n),this.me(i[s],n)}Pe(e,n){const i=e.values||[];this.ye(n,50);for(const s of i)this.me(s,n)}ve(e,n){this.ye(n,37),j.fromName(e).path.forEach(i=>{this.ye(n,60),this.be(i,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}nr.Ve=new nr;function p$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function t1(t){const e=64-function(n){let i=0;for(let s=0;s<8;++s){const r=p$(255&n[s]);if(i+=r,r!==8)break}return i}(t);return Math.ceil(e/8)}class g${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.De(i.value),i=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ne(i.value),i=n.next();this.ke()}Me(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const s=n.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const s=n.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const n=this.Fe(e),i=t1(n);this.Be(1+i),this.buffer[this.position++]=255&i;for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Le(e){const n=this.Fe(e),i=t1(n);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(s){const r=new DataView(new ArrayBuffer(8));return r.setFloat64(0,s,!1),new Uint8Array(r.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let s=1;s<n.length;++s)n[s]^=i?255:0;return n}De(e){const n=255&e;n===0?(this.Ue(0),this.Ue(255)):n===255?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;n===0?(this.Ge(0),this.Ge(255)):n===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class m${constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class y${constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class xa{constructor(){this.je=new g$,this.ze=new m$(this.je),this.We=new y$(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,i,s){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=s}Je(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ir(this.indexId,this.documentKey,this.arrayValue,i)}}function Wi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=n1(t.arrayValue,e.arrayValue),n!==0?n:(n=n1(t.directionalValue,e.directionalValue),n!==0?n:j.comparator(t.documentKey,e.documentKey)))}function n1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const i=n;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){Q(e.collectionGroup===this.collectionId);const n=Zg(e);if(n!==void 0&&!this.en(n))return!1;const i=Xs(e);let s=new Set,r=0,o=0;for(;r<i.length&&this.en(i[r]);++r)s=s.add(i[r].fieldPath.canonicalString());if(r===i.length)return!0;if(this.Ze!==void 0){if(!s.has(this.Ze.field.canonicalString())){const a=i[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[o++],a))return!1}++r}for(;r<i.length;++r){const a=i[r];if(o>=this.Ye.length||!this.sn(this.Ye[o++],a))return!1}return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){var e,n;if(Q(t instanceof ge||t instanceof Ee),t instanceof ge){if(t instanceof zI){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(r=>ge.create(t.field,"==",r)))||[];return Ee.create(s,"or")}return t}const i=t.filters.map(s=>vT(s));return Ee.create(i,t.op)}function w$(t){if(t.getFilters().length===0)return[];const e=pm(vT(t));return Q(wT(e)),dm(e)||fm(e)?[e]:e.getFilters()}function dm(t){return t instanceof ge}function fm(t){return t instanceof Ee&&vv(t)}function wT(t){return dm(t)||fm(t)||function(e){if(e instanceof Ee&&im(e)){for(const n of e.getFilters())if(!dm(n)&&!fm(n))return!1;return!0}return!1}(t)}function pm(t){if(Q(t instanceof ge||t instanceof Ee),t instanceof ge)return t;if(t.filters.length===1)return pm(t.filters[0]);const e=t.filters.map(i=>pm(i));let n=Ee.create(e,t.op);return n=sd(n),wT(n)?n:(Q(n instanceof Ee),Q(Bo(n)),Q(n.filters.length>1),n.filters.reduce((i,s)=>Iv(i,s)))}function Iv(t,e){let n;return Q(t instanceof ge||t instanceof Ee),Q(e instanceof ge||e instanceof Ee),n=t instanceof ge?e instanceof ge?function(i,s){return Ee.create([i,s],"and")}(t,e):i1(t,e):e instanceof ge?i1(e,t):function(i,s){if(Q(i.filters.length>0&&s.filters.length>0),Bo(i)&&Bo(s))return FI(i,s.getFilters());const r=im(i)?i:s,o=im(i)?s:i,a=r.filters.map(l=>Iv(l,o));return Ee.create(a,"or")}(t,e),sd(n)}function i1(t,e){if(Bo(e))return FI(e,t.getFilters());{const n=e.filters.map(i=>Iv(t,i));return Ee.create(n,"or")}}function sd(t){if(Q(t instanceof ge||t instanceof Ee),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return sd(e[0]);if(NI(t))return t;const n=e.map(s=>sd(s)),i=[];return n.forEach(s=>{s instanceof ge?i.push(s):s instanceof Ee&&(s.op===t.op?i.push(...s.filters):i.push(s))}),i.length===1?i[0]:Ee.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(){this.rn=new Tv}addToCollectionParentIndex(e,n){return this.rn.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(vn.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(vn.min())}updateCollectionGroup(e,n,i){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class Tv{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Le(be.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Le(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Uint8Array(0);class x${constructor(e,n){this.user=e,this.databaseId=n,this.on=new Tv,this.un=new zs(i=>Dr(i),(i,s)=>Dc(i,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const i=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const r={collectionId:i,parent:Yt(s)};return s1(e).put(r)}return T.resolve()}getCollectionParents(e,n){const i=[],s=IDBKeyRange.bound([n,""],[xI(n),""],!1,!0);return s1(e).j(s).next(r=>{for(const o of r){if(o.collectionId!==n)break;i.push(ti(o.parent))}return i})}addFieldIndex(e,n){const i=fu(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const r=i.add(s);if(n.indexState){const o=Sa(e);return r.next(a=>{o.put(J_(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return r.next()}deleteFieldIndex(e,n){const i=fu(e),s=Sa(e),r=ba(e);return i.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const i=ba(e);let s=!0;const r=new Map;return T.forEach(this.cn(n),o=>this.an(e,o).next(a=>{s&&(s=!!a),r.set(o,a)})).next(()=>{if(s){let o=ae();const a=[];return T.forEach(r,(l,c)=>{var u;F("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`} to execute ${Dr(n)}`);const h=function(w,b){const S=Zg(b);if(S===void 0)return null;for(const I of Zh(w,S.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(c,l),d=function(w,b){const S=new Map;for(const I of Xs(b))for(const k of Zh(w,I.fieldPath))switch(k.op){case"==":case"in":S.set(I.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return S.set(I.fieldPath.canonicalString(),k.value),Array.from(S.values())}return null}(c,l),f=function(w,b){const S=[];let I=!0;for(const k of Xs(b)){const _=k.kind===0?F_(w,k.fieldPath,w.startAt):$_(w,k.fieldPath,w.startAt);S.push(_.value),I&&(I=_.inclusive)}return new zo(S,I)}(c,l),p=function(w,b){const S=[];let I=!0;for(const k of Xs(b)){const _=k.kind===0?$_(w,k.fieldPath,w.endAt):F_(w,k.fieldPath,w.endAt);S.push(_.value),I&&(I=_.inclusive)}return new zo(S,I)}(c,l),g=this.hn(l,c,f),v=this.hn(l,c,p),m=this.ln(l,c,d),y=this.fn(l.indexId,h,g,f.inclusive,v,p.inclusive,m);return T.forEach(y,w=>i.H(w,n.limit).next(b=>{b.forEach(S=>{const I=j.fromSegments(S.documentKey);o.has(I)||(o=o.add(I),a.push(I))})}))}).next(()=>a)}return T.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=w$(Ee.create(e.filters,"and")).map(i=>rm(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,i,s,r,o,a){const l=(n!=null?n.length:1)*Math.max(i.length,r.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const d=n?this.dn(n[h/c]):du,f=this.wn(e,d,i[h%c],s),p=this._n(e,d,r[h%c],o),g=a.map(v=>this.wn(e,d,v,!0));u.push(...this.createRange(f,p,g))}return u}wn(e,n,i,s){const r=new ir(e,j.empty(),n,i);return s?r:r.Je()}_n(e,n,i,s){const r=new ir(e,j.empty(),n,i);return s?r.Je():r}an(e,n){const i=new v$(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(r=>{let o=null;for(const a of r)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2;const s=this.cn(n);return T.forEach(s,r=>this.an(e,r).next(o=>{o?i!==0&&o.fields.length<function(a){let l=new Le(it.comparator),c=!1;for(const u of a.filters)for(const h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(r)&&(i=1):i=0})).next(()=>function(r){return r.limit!==null}(n)&&s.length>1&&i===2?1:i)}mn(e,n){const i=new xa;for(const s of Xs(e)){const r=n.data.field(s.fieldPath);if(r==null)return null;const o=i.He(s.kind);nr.Ve._e(r,o)}return i.Qe()}dn(e){const n=new xa;return nr.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const i=new xa;return nr.Ve._e(Gl(this.databaseId,n),i.He(function(s){const r=Xs(s);return r.length===0?0:r[r.length-1].kind}(e))),i.Qe()}ln(e,n,i){if(i===null)return[];let s=[];s.push(new xa);let r=0;for(const o of Xs(e)){const a=i[r++];for(const l of s)if(this.yn(n,o.fieldPath)&&Yl(a))s=this.pn(s,o,a);else{const c=l.He(o.kind);nr.Ve._e(a,c)}}return this.In(s)}hn(e,n,i){return this.ln(e,n,i.position)}In(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Qe();return n}pn(e,n,i){const s=[...e],r=[];for(const o of i.arrayValue.values||[])for(const a of s){const l=new xa;l.seed(a.Qe()),nr.Ve._e(o,l.He(n.kind)),r.push(l)}return r}yn(e,n){return!!e.filters.find(i=>i instanceof ge&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=fu(e),s=Sa(e);return(n?i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.j()).next(r=>{const o=[];return T.forEach(r,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const h=u?new Xh(u.sequenceNumber,new vn(Mr(u.readTime),new j(ti(u.documentKey)),u.largestBatchId)):Xh.empty(),d=c.fields.map(([f,p])=>new YL(it.fromServerFormat(f),p));return new bI(c.indexId,c.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,s)=>{const r=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return r!==0?r:re(i.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const s=fu(e),r=Sa(e);return this.Tn(e).next(o=>s.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>T.forEach(a,l=>r.put(J_(l.indexId,this.user,o,i)))))}updateIndexEntries(e,n){const i=new Map;return T.forEach(n,(s,r)=>{const o=i.get(s.collectionGroup);return(o?T.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(i.set(s.collectionGroup,a),T.forEach(a,l=>this.En(e,s,l).next(c=>{const u=this.An(r,l);return c.isEqual(u)?T.resolve():this.vn(e,r,l,c,u)}))))})}Rn(e,n,i,s){return ba(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(i,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,i,s){return ba(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(i,n.key),n.key.path.toArray()])}En(e,n,i){const s=ba(e);let r=new Le(Wi);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,n)])},(o,a)=>{r=r.add(new ir(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>r)}An(e,n){let i=new Le(Wi);const s=this.mn(n,e);if(s==null)return i;const r=Zg(n);if(r!=null){const o=e.data.field(r.fieldPath);if(Yl(o))for(const a of o.arrayValue.values||[])i=i.add(new ir(n.indexId,e.key,this.dn(a),s))}else i=i.add(new ir(n.indexId,e.key,du,s));return i}vn(e,n,i,s,r){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,h){const d=a.getIterator(),f=l.getIterator();let p=qr(d),g=qr(f);for(;p||g;){let v=!1,m=!1;if(p&&g){const y=c(p,g);y<0?m=!0:y>0&&(v=!0)}else p!=null?m=!0:v=!0;v?(u(g),g=qr(f)):m?(h(p),p=qr(d)):(p=qr(d),g=qr(f))}}(s,r,Wi,a=>{o.push(this.Rn(e,n,i,a))},a=>{o.push(this.Pn(e,n,i,a))}),T.waitFor(o)}Tn(e){let n=1;return Sa(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,r)=>{r.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>Wi(o,a)).filter((o,a,l)=>!a||Wi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of i){const a=Wi(o,e),l=Wi(o,n);if(a===0)s[0]=e.Je();else if(a>0&&l<0)s.push(o),s.push(o.Je());else if(l>0)break}s.push(n);const r=[];for(let o=0;o<s.length;o+=2){if(this.bn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,du,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,du,[]];r.push(IDBKeyRange.bound(a,l))}return r}bn(e,n){return Wi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(r1)}getMinOffset(e,n){return T.mapArray(this.cn(n),i=>this.an(e,i).next(s=>s||G())).next(r1)}}function s1(t){return _t(t,"collectionParents")}function ba(t){return _t(t,"indexEntries")}function fu(t){return _t(t,"indexConfiguration")}function Sa(t){return _t(t,"indexState")}function r1(t){Q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const s=t[i].indexState.offset;pv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new vn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class nn{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e,n){const i=t.store("mutations"),s=t.store("documentMutations"),r=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.X({range:o},(u,h,d)=>(a++,d.delete()));r.push(l.next(()=>{Q(a===1)}));const c=[];for(const u of n.mutations){const h=II(e,u.key.path,n.batchId);r.push(s.delete(h)),c.push(u.key)}return T.waitFor(r).next(()=>c)}function rd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw G();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class hf{constructor(e,n,i,s){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=s,this.Vn={}}static de(e,n,i,s){Q(e.uid!=="");const r=e.isAuthenticated()?e.uid:"";return new hf(r,n,i,s)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).X({index:"userMutationsIndex",range:i},(s,r,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,s){const r=Zr(e),o=Ki(e);return o.add({}).next(a=>{Q(typeof a=="number");const l=new _v(a,n,i,s),c=function(d,f,p){const g=p.baseMutations.map(m=>nd(d.fe,m)),v=p.mutations.map(m=>nd(d.fe,m));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:v}}(this.serializer,this.userId,l),u=[];let h=new Le((d,f)=>re(d.canonicalString(),f.canonicalString()));for(const d of s){const f=II(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(c)),u.push(r.put(f,iF))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Vn[a]=l.keys()}),T.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Ki(e).get(n).next(i=>i?(Q(i.userId===this.userId),tr(this.serializer,i)):null)}Sn(e,n){return this.Vn[n]?T.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const s=i.keys();return this.Vn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return Ki(e).X({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(Q(a.batchId>=i),r=tr(this.serializer,a)),l.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ki(e).X({index:"userMutationsIndex",range:n,reverse:!0},(s,r,o)=>{i=r.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).j("userMutationsIndex",n).next(i=>i.map(s=>tr(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Gu(this.userId,n.path),s=IDBKeyRange.lowerBound(i),r=[];return Zr(e).X({range:s},(o,a,l)=>{const[c,u,h]=o,d=ti(u);if(c===this.userId&&n.path.isEqual(d))return Ki(e).get(h).next(f=>{if(!f)throw G();Q(f.userId===this.userId),r.push(tr(this.serializer,f))});l.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Le(re);const s=[];return n.forEach(r=>{const o=Gu(this.userId,r.path),a=IDBKeyRange.lowerBound(o),l=Zr(e).X({range:a},(c,u,h)=>{const[d,f,p]=c,g=ti(f);d===this.userId&&r.path.isEqual(g)?i=i.add(p):h.done()});s.push(l)}),T.waitFor(s).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1,r=Gu(this.userId,i),o=IDBKeyRange.lowerBound(r);let a=new Le(re);return Zr(e).X({range:o},(l,c,u)=>{const[h,d,f]=l,p=ti(d);h===this.userId&&i.isPrefixOf(p)?p.length===s&&(a=a.add(f)):u.done()}).next(()=>this.Dn(e,a))}Dn(e,n){const i=[],s=[];return n.forEach(r=>{s.push(Ki(e).get(r).next(o=>{if(o===null)throw G();Q(o.userId===this.userId),i.push(tr(this.serializer,o))}))}),T.waitFor(s).next(()=>i)}removeMutationBatch(e,n){return _T(e.ht,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),T.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return T.resolve();const i=IDBKeyRange.lowerBound([this.userId]),s=[];return Zr(e).X({range:i},(r,o,a)=>{if(r[0]===this.userId){const l=ti(r[1]);s.push(l)}else a.done()}).next(()=>{Q(s.length===0)})})}containsKey(e,n){return xT(e,this.userId,n)}xn(e){return bT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xT(t,e,n){const i=Gu(e,n.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return Zr(t).X({range:r,Y:!0},(a,l,c)=>{const[u,h,d]=a;u===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ki(t){return _t(t,"mutations")}function Zr(t){return _t(t,"documentMutations")}function bT(t){return _t(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Pr(0)}static Mn(){return new Pr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const i=new Pr(n.highestTargetId);return n.highestTargetId=i.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>Y.fromTimestamp(new We(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.$n(e).next(s=>(s.highestListenSequenceNumber=n,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.On(e,s)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(n,i),this.On(e,i))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Gr(e).delete(n.targetId)).next(()=>this.$n(e)).next(i=>(Q(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,n,i){let s=0;const r=[];return Gr(e).X((o,a)=>{const l=Va(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(s++,r.push(this.removeTargetData(e,l)))}).next(()=>T.waitFor(r)).next(()=>s)}forEachTarget(e,n){return Gr(e).X((i,s)=>{const r=Va(s);n(r)})}$n(e){return a1(e).get("targetGlobalKey").next(n=>(Q(n!==null),n))}On(e,n){return a1(e).put("targetGlobalKey",n)}Fn(e,n){return Gr(e).put(mT(this.serializer,n))}Bn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Dr(n),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return Gr(e).X({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const c=Va(a);Dc(n,c.target)&&(r=c,l.done())}).next(()=>r)}addMatchingKeys(e,n,i){const s=[],r=ts(e);return n.forEach(o=>{const a=Yt(o.path);s.push(r.put({targetId:i,path:a})),s.push(this.referenceDelegate.addReference(e,i,o))}),T.waitFor(s)}removeMatchingKeys(e,n,i){const s=ts(e);return T.forEach(n,r=>{const o=Yt(r.path);return T.waitFor([s.delete([i,o]),this.referenceDelegate.removeReference(e,i,r)])})}removeMatchingKeysForTargetId(e,n){const i=ts(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),s=ts(e);let r=ae();return s.X({range:i,Y:!0},(o,a,l)=>{const c=ti(o[1]),u=new j(c);r=r.add(u)}).next(()=>r)}containsKey(e,n){const i=Yt(n.path),s=IDBKeyRange.bound([i],[xI(i)],!1,!0);let r=0;return ts(e).X({index:"documentTargetsIndex",Y:!0,range:s},([o,a],l,c)=>{o!==0&&(r++,c.done())}).next(()=>r>0)}le(e,n){return Gr(e).get(n).next(i=>i?Va(i):null)}}function Gr(t){return _t(t,"targets")}function a1(t){return _t(t,"targetGlobal")}function ts(t){return _t(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1([t,e],[n,i]){const s=re(t,n);return s===0?re(e,i):s}class S${constructor(e){this.Ln=e,this.buffer=new Le(l1),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();l1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class E${constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vs(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await $r(n)}await this.Qn(3e5)})}}class k${constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return T.resolve(In.ct);const i=new S$(n);return this.jn.forEachTarget(e,s=>i.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>i.Kn(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),T.resolve(o1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o1):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let i,s,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,n))).next(h=>(r=h,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),Jg()<=ve.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),T.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:h})))}}function I$(t,e){return new k$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,n){this.db=e,this.garbageCollector=I$(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}Jn(e){let n=0;return this.Wn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(i,s)=>n(s))}addReference(e,n,i){return pu(e,i)}removeReference(e,n,i){return pu(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return pu(e,n)}Xn(e,n){return function(i,s){let r=!1;return bT(i).Z(o=>xT(i,o,s).next(a=>(a&&(r=!0),T.resolve(!a)))).next(()=>r)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.Yn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(c=>{if(!c)return r++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Y.min()),ts(e).delete([0,Yt(o.path)])))});s.push(l)}}).next(()=>T.waitFor(s)).next(()=>i.apply(e)).next(()=>r)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return pu(e,n)}Yn(e,n){const i=ts(e);let s,r=In.ct;return i.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(r!==In.ct&&n(new j(ti(s)),r),r=c,s=l):r=In.ct}).next(()=>{r!==In.ct&&n(new j(ti(s)),r)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pu(t,e){return ts(t).put(function(n,i){return{targetId:0,path:Yt(n.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?T.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return js(e).put(i)}removeEntry(e,n,i){return js(e).delete(function(s,r){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],id(r),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Zn(e,i)))}getEntry(e,n){let i=Ye.newInvalidDocument(n);return js(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ea(n))},(s,r)=>{i=this.ts(n,r)}).next(()=>i)}es(e,n){let i={size:0,document:Ye.newInvalidDocument(n)};return js(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ea(n))},(s,r)=>{i={document:this.ts(n,r),size:rd(r)}}).next(()=>i)}getEntries(e,n){let i=pn();return this.ns(e,n,(s,r)=>{const o=this.ts(s,r);i=i.insert(s,o)}).next(()=>i)}ss(e,n){let i=pn(),s=new je(j.comparator);return this.ns(e,n,(r,o)=>{const a=this.ts(r,o);i=i.insert(r,a),s=s.insert(r,rd(o))}).next(()=>({documents:i,rs:s}))}ns(e,n,i){if(n.isEmpty())return T.resolve();let s=new Le(h1);n.forEach(l=>s=s.add(l));const r=IDBKeyRange.bound(Ea(s.first()),Ea(s.last())),o=s.getIterator();let a=o.getNext();return js(e).X({index:"documentKeyIndex",range:r},(l,c,u)=>{const h=j.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&h1(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.G(Ea(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,s){const r=n.path,o=[r.popLast().toArray(),r.lastSegment(),id(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return js(e).j(IDBKeyRange.bound(o,a,!0)).next(l=>{let c=pn();for(const u of l){const h=this.ts(j.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(Mc(n,h)||s.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,i,s){let r=pn();const o=u1(n,i),a=u1(n,vn.max());return js(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.ts(j.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);r=r.insert(h.key,h),r.size===s&&u.done()}).next(()=>r)}newChangeBuffer(e){return new D$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return c1(e).get("remoteDocumentGlobalKey").next(n=>(Q(!!n),n))}Zn(e,n){return c1(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const i=d$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(Y.min())))return i}return Ye.newInvalidDocument(e)}}function ET(t){return new C$(t)}class D$ extends ST{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new zs(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(e){const n=[];let i=0,s=new Le((r,o)=>re(r.canonicalString(),o.canonicalString()));return this.changes.forEach((r,o)=>{const a=this.us.get(r);if(n.push(this.os.removeEntry(e,r,a.readTime)),o.isValidDocument()){const l=Q_(this.os.serializer,o);s=s.add(r.path.popLast());const c=rd(l);i+=c-a.size,n.push(this.os.addEntry(e,r,l))}else if(i-=a.size,this.trackRemovals){const l=Q_(this.os.serializer,o.convertToNoDocument(Y.min()));n.push(this.os.addEntry(e,r,l))}}),s.forEach(r=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.os.updateMetadata(e,i)),T.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(i=>(this.us.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:i,rs:s})=>(s.forEach((r,o)=>{this.us.set(r,{size:o,readTime:i.get(r).readTime})}),i))}}function c1(t){return _t(t,"remoteDocumentGlobal")}function js(t){return _t(t,"remoteDocumentsV14")}function Ea(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function u1(t,e){const n=e.documentKey.path.toArray();return[t,id(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function h1(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let r=0;r<n.length-2&&r<i.length-2;++r)if(s=re(n[r],i[r]),s)return s;return s=re(n.length,i.length),s||(s=re(n[n.length-2],i[i.length-2]),s||re(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&al(i.mutation,s,an.empty(),We.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ae()){const s=ni();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=Fa();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=ni();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ae()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=pn();const o=ol(),a=ol();return n.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Bi)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),al(u.mutation,c,u.mutation.getFieldMask(),We.now())):o.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new A$(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ol();let s=new je((o,a)=>o-a),r=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||an.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(s.get(a.batchId)||ae()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=KI();u.forEach(d=>{if(!r.has(d)){const f=ZI(n.get(d),i.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return T.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):T.resolve(ni());let a=-1,l=r;return o.next(c=>T.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?T.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,ae())).next(u=>({batchId:a,changes:WI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(i=>{let s=Fa();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const s=n.collectionGroup;let r=Fa();return this.indexManager.getCollectionParents(e,s).next(o=>T.forEach(o,a=>{const l=function(c,u){return new ra(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,h)=>{r=r.insert(u,h)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s))).next(r=>{s.forEach((a,l)=>{const c=l.getKey();r.get(c)===null&&(r=r.insert(c,Ye.newInvalidDocument(c)))});let o=Fa();return r.forEach((a,l)=>{const c=s.get(a);c!==void 0&&al(c.mutation,l,an.empty(),We.now()),Mc(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return T.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:Qt(i.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:yT(i.bundledQuery),readTime:Qt(i.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.overlays=new je(j.comparator),this.ls=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ni();return T.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.we(e,n,r)}),T.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.ls.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.ls.delete(i)),T.resolve()}getOverlaysForCollection(e,n,i){const s=ni(),r=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return T.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new je((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=ni(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ni(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return T.resolve(a)}we(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(i.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new bv(n,i));let r=this.ls.get(n);r===void 0&&(r=ae(),this.ls.set(n,r)),this.ls.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.fs=new Le(pt.ds),this.ws=new Le(pt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new pt(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new pt(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new j(new be([])),i=new pt(n,e),s=new pt(n,e+1),r=[];return this.ws.forEachInRange([i,s],o=>{this.ys(o),r.push(o.key)}),r}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new j(new be([])),i=new pt(n,e),s=new pt(n,e+1);let r=ae();return this.ws.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new pt(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class pt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return j.comparator(e.key,n.key)||re(e.As,n.As)}static _s(e,n){return re(e.As,n.As)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Le(pt.ds)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _v(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new pt(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.bs(i),r=s<0?0:s;return T.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([i,s],o=>{const a=this.Ps(o.As);r.push(a)}),T.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Le(re);return n.forEach(s=>{const r=new pt(s,0),o=new pt(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([r,o],a=>{i=i.add(a.As)})}),T.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;j.isDocumentKey(r)||(r=r.child(""));const o=new pt(new j(r),0);let a=new Le(re);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.As)),!0)},o),T.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(i=>{const s=this.Ps(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Q(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return T.forEach(n.mutations,s=>{const r=new pt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new pt(n,0),s=this.Rs.firstAfterOrEqual(i);return T.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.Ds=e,this.docs=new je(j.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return T.resolve(i?i.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let i=pn();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Ye.newInvalidDocument(s))}),T.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=pn();const o=n.path,a=new j(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||pv(SI(u),i)<=0||(s.has(u.key)||Mc(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return T.resolve(r)}getAllFromCollectionGroup(e,n,i,s){G()}Cs(e,n){return T.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new N$(this)}getSize(e){return T.resolve(this.size)}}class N$ extends ST{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(i)}),T.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.persistence=e,this.xs=new zs(n=>Dr(n),Dc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Cv,this.targetCount=0,this.Ms=Pr.kn()}forEachTarget(e,n){return this.xs.forEach((i,s)=>n(s)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),T.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Pr(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.Fn(n),T.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.xs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),T.waitFor(r).next(()=>s)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return T.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),T.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),T.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),T.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return T.resolve(i)}containsKey(e,n){return T.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n){this.$s={},this.overlays={},this.Os=new In(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new L$(this),this.indexManager=new _$,this.remoteDocumentCache=function(i){return new O$(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new gT(n),this.qs=new M$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new P$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new R$(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const s=new F$(this.Os.next());return this.referenceDelegate.Us(),i(s).next(r=>this.referenceDelegate.Ks(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Gs(e,n){return T.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class F$ extends kI{constructor(e){super(),this.currentSequenceNumber=e}}class df{constructor(e){this.persistence=e,this.Qs=new Cv,this.js=null}static zs(e){return new df(e)}get Ws(){if(this.js)return this.js;throw G()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),T.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),T.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.Ws.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Ws,i=>{const s=j.fromPath(i);return this.Hs(e,s).next(r=>{r||n.removeEntry(s,Y.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return T.or([()=>T.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.serializer=e}O(e,n,i,s){const r=new tf("createOrUpgrade",n);i<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T_,{unique:!0}),a.createObjectStore("documentMutations")}(e),d1(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=T.resolve();return i<3&&s>=3&&(i!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),d1(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(r))),i<4&&s>=4&&(i!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").j().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T_,{unique:!0});const u=l.store("mutations"),h=c.map(d=>u.put(d));return T.waitFor(h)})}(e,r))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&s>=5&&(o=o.next(()=>this.Ys(r))),i<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(r)))),i<7&&s>=7&&(o=o.next(()=>this.Zs(r))),i<8&&s>=8&&(o=o.next(()=>this.ti(e,r))),i<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&s>=10&&(o=o.next(()=>this.ei(r))),i<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&s>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:gF});l.createIndex("collectionPathOverlayIndex",mF,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",yF,{unique:!1})})(e)})),i<13&&s>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:sF});l.createIndex("documentKeyIndex",rF),l.createIndex("collectionGroupIndex",oF)}(e)).next(()=>this.ni(e,r)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&s>=14&&(o=o.next(()=>this.si(e,r))),i<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:hF}).createIndex("sequenceNumberIndex",dF,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:fF}).createIndex("documentKeyIndex",pF,{unique:!1})}(e))),o}Xs(e){let n=0;return e.store("remoteDocuments").X((i,s)=>{n+=rd(s)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.j().next(s=>T.forEach(s,r=>{const o=IDBKeyRange.bound([r.userId,-1],[r.userId,r.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",o).next(a=>T.forEach(a,l=>{Q(l.userId===r.userId);const c=tr(this.serializer,l);return _T(e,r.userId,c).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const r=[];return i.X((o,a)=>{const l=new be(o),c=function(u){return[0,Yt(u)]}(l);r.push(n.get(c).next(u=>u?T.resolve():(h=>n.put({targetId:0,path:Yt(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>T.waitFor(r))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:uF});const i=n.store("collectionParents"),s=new Tv,r=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Yt(l)})}};return n.store("remoteDocuments").X({Y:!0},(o,a)=>{const l=new be(o);return r(l.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,a,l],c)=>{const u=ti(a);return r(u.popLast())}))}ei(e){const n=e.store("targets");return n.X((i,s)=>{const r=Va(s),o=mT(this.serializer,r);return n.put(o)})}ni(e,n){const i=n.store("remoteDocuments"),s=[];return i.X((r,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new j(be.fromString(c.document.name).popFirst(5)):c.noDocument?j.fromSegments(c.noDocument.path):c.unknownDocument?j.fromSegments(c.unknownDocument.path):G()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>T.waitFor(s))}si(e,n){const i=n.store("mutations"),s=ET(this.serializer),r=new IT(df.zs,this.serializer.fe);return i.j().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:ae();tr(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),T.forEach(a,(l,c)=>{const u=new bt(c),h=uf.de(this.serializer,u),d=r.getIndexManager(u),f=hf.de(u,this.serializer,d,r.referenceDelegate);return new kT(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new em(n,In.ct),l).next()})})}}function d1(t){t.createObjectStore("targetDocuments",{keyPath:lF}).createIndex("documentTargetsIndex",cF,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aF,{unique:!0}),t.createObjectStore("targetGlobal")}const _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dv{constructor(e,n,i,s,r,o,a,l,c,u,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ii=r,this.window=o,this.document=a,this.ri=c,this.oi=u,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=d=>Promise.resolve(),!Dv.D())throw new z(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T$(this,s),this.di=n+"main",this.serializer=new gT(l),this.wi=new Ei(this.di,this.ui,new $$(this.serializer)),this.Bs=new b$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ET(this.serializer),this.qs=new f$,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,u===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(D.FAILED_PRECONDITION,_p);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new In(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(Vs(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ka(e).get("owner").next(n=>T.resolve(this.Ri(n)))}Pi(e){return gu(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=_t(n,"clientMetadata");return i.j().next(s=>{const r=this.Si(s,18e5),o=s.filter(a=>r.indexOf(a)===-1);return T.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Di(n.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?T.resolve(!0):ka(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new z(D.FAILED_PRECONDITION,_p);return!1}}return!(!this.networkEnabled||!this.inForeground)||gu(e).j().next(i=>this.Si(i,5e3).find(s=>{if(this.clientId!==s.clientId){const r=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(r||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new em(e,In.ct);return this.Ai(n).next(()=>this.Pi(n))}),this.wi.close(),this.Mi()}Si(e,n){return e.filter(i=>this.Vi(i.updateTimeMs,n)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>gu(e).j().next(n=>this.Si(n,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return hf.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new x$(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return uf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,i){F("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",r=(o=this.ui)===15?wF:o===14?DI:o===13?CI:o===12?vF:o===11?TI:void G();var o;let a;return this.wi.runTransaction(e,s,r,l=>(a=new em(l,this.Os?this.Os.next():In.ct),n==="readwrite-primary"?this.Ti(a).next(c=>!!c||this.Ei(a)).next(c=>{if(!c)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new z(D.FAILED_PRECONDITION,EI);return i(a)}).next(c=>this.vi(a).next(()=>c)):this.Oi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Oi(e){return ka(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new z(D.FAILED_PRECONDITION,_p)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ka(e).put("owner",n)}static D(){return Ei.D()}Ai(e){const n=ka(e);return n.get("owner").next(i=>this.Ri(i)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):T.resolve())}Vi(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(Kt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;g2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const i=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Di(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Kt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ka(t){return _t(t,"owner")}function gu(t){return _t(t,"clientMetadata")}function V$(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=s}static Li(e,n){let i=ae(),s=ae();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Av(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,s){return this.Ki(e,n).next(r=>r||this.Gi(e,n,s,i)).next(r=>r||this.Qi(e,n))}Ki(e,n){if(V_(n))return T.resolve(null);let i=jn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ed(n,null,"F"),i=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=ae(...r);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,ed(n,null,"F")):this.Wi(e,c,n,l)}))})))}Gi(e,n,i,s){return V_(n)||s.isEqual(Y.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(r=>{const o=this.ji(n,r);return this.zi(n,o,i,s)?this.Qi(e,n):(Jg()<=ve.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),am(n)),this.Wi(e,o,n,QL(s,-1)))})}ji(e,n){let i=new Le(UI(e));return n.forEach((s,r)=>{Mc(e,r)&&(i=i.add(r))}),i}zi(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Qi(e,n){return Jg()<=ve.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",am(n)),this.Ui.getDocumentsMatchingQuery(e,n,vn.min())}Wi(e,n,i,s){return this.Ui.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e,n,i,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new je(re),this.Yi=new zs(r=>Dr(r),Dc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kT(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function CT(t,e,n,i){return new z$(t,e,n,i)}async function DT(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=ae();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function B$(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=T.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);Q(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=ae();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function AT(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function j$(t,e){const n=se(t),i=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Ct.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),s=s.insert(h,f),function(p,g,v){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,u)&&a.push(n.Bs.updateTargetData(r,f))});let l=pn(),c=ae();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(U$(r,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!i.isEqual(Y.min())){const u=n.Bs.getLastRemoteSnapshotVersion(r).next(h=>n.Bs.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return T.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Ji=s,r))}function U$(t,e,n){let i=ae(),s=ae();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=pn();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:s}})}function H$(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function W$(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Bs.getTargetData(i,e).next(r=>r?(s=r,T.resolve(s)):n.Bs.allocateTargetId(i).next(o=>(s=new ki(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ji.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function gm(t,e,n){const i=se(t),s=i.Ji.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Vs(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(s.target)}function f1(t,e,n){const i=se(t);let s=Y.min(),r=ae();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=se(a),h=u.Yi.get(c);return h!==void 0?T.resolve(u.Ji.get(h)):u.Bs.getTargetData(l,c)}(i,o,jn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?r:ae())).next(a=>(K$(i,RF(e),a),{documents:a,ir:r})))}function K$(t,e,n){let i=t.Xi.get(e)||Y.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Xi.set(e,i)}class p1{constructor(){this.activeTargetIds=VF()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MT{constructor(){this.Hr=new p1,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new p1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function xp(){return mu===null?mu=268435456+Math.round(2147483648*Math.random()):mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class Q$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,s,r){const o=xp(),a=this.To(e,n);F("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const l={};return this.Eo(l,s,r),this.Ao(e,a,l,i).then(c=>(F("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Is("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}vo(e,n,i,s,r,o){return this.Io(e,n,i,s,r)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+sa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}To(e,n){const i=G$[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,s){const r=xp();return new Promise((o,a)=>{const l=new $L;l.setWithCredentials(!0),l.listenOnce(NL.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vp.NO_ERROR:const u=l.getResponseJson();F(Rt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case vp.TIMEOUT:F(Rt,`RPC '${e}' ${r} timed out`),a(new z(D.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:const h=l.getStatus();if(F(Rt,`RPC '${e}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(v)>=0?v:D.UNKNOWN}(f.status);a(new z(p,f.message))}else a(new z(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(D.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{F(Rt,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);F(Rt,`RPC '${e}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Ro(e,n,i){const s=xp(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RL(),a=OL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new FL({})),this.Eo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=r.join("");F(Rt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new Y$({ro:v=>{f?F(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(d||(F(Rt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),F(Rt,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},oo:()=>h.close()}),g=(v,m,y)=>{v.listen(m,w=>{try{y(w)}catch(b){setTimeout(()=>{throw b},0)}})};return g(h,cu.EventType.OPEN,()=>{f||F(Rt,`RPC '${e}' stream ${s} transport opened.`)}),g(h,cu.EventType.CLOSE,()=>{f||(f=!0,F(Rt,`RPC '${e}' stream ${s} transport closed`),p.wo())}),g(h,cu.EventType.ERROR,v=>{f||(f=!0,Is(Rt,`RPC '${e}' stream ${s} transport errored:`,v),p.wo(new z(D.UNAVAILABLE,"The operation could not be completed")))}),g(h,cu.EventType.MESSAGE,v=>{var m;if(!f){const y=v.data[0];Q(!!y);const w=y,b=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(b){F(Rt,`RPC '${e}' stream ${s} received error:`,b);const S=b.status;let I=function(_){const x=tt[_];if(x!==void 0)return nT(x)}(S),k=b.message;I===void 0&&(I=D.INTERNAL,k="Unknown error status: "+S+" with message "+b.message),f=!0,p.wo(new z(I,k)),h.close()}else F(Rt,`RPC '${e}' stream ${s} received:`,y),p._o(y)}}),g(a,LL.STAT_EVENT,v=>{v.stat===S_.PROXY?F(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===S_.NOPROXY&&F(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(){return typeof window<"u"?window:null}function Zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t){return new n$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,i=1e3,s=1.5,r=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=s,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,i,s,r,o,a,l){this.ii=e,this.$o=i,this.Oo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new PT(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Kt(n.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Fo===n&&this.Zo(i,s)},i=>{e(()=>{const s=new z(D.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(s)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{i(()=>this.tu(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J$ extends RT{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=r$(this.serializer,e),i=function(s){if(!("targetChange"in s))return Y.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?Y.min():r.readTime?Qt(r.readTime):Y.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=um(this.serializer),n.addTarget=function(s,r){let o;const a=r.target;if(o=Jh(a)?{documents:cT(s,a)}:{query:uT(s,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){o.resumeToken=rT(s,r.resumeToken);const l=lm(s,r.expectedCount);l!==null&&(o.expectedCount=l)}else if(r.snapshotVersion.compareTo(Y.min())>0){o.readTime=Ho(s,r.snapshotVersion.toTimestamp());const l=lm(s,r.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const i=a$(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=um(this.serializer),n.removeTarget=e,this.Wo(n)}}class Z$ extends RT{constructor(e,n,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=o$(e.writeResults,e.commitTime),i=Qt(e.commitTime);return this.listener.cu(i,n)}return Q(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=um(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>nd(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new z(D.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.Io(e,n,i,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(D.UNKNOWN,s.toString())})}vo(e,n,i,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.vo(e,n,i,r,o,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(D.UNKNOWN,r.toString())})}terminate(){this.lu=!0}}class tV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Kt(n),this.mu=!1):F("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(o=>{i.enqueueAndForget(async()=>{zr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=se(a);l.vu.add(4),await Rc(l),l.bu.set("Unknown"),l.vu.delete(4),await pf(l)}(this))})}),this.bu=new tV(i,s)}}async function pf(t){if(zr(t))for(const e of t.Ru)await e(!0)}async function Rc(t){for(const e of t.Ru)await e(!1)}function OT(t,e){const n=se(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Rv(n)?Pv(n):aa(n).Ko()&&Mv(n,e))}function NT(t,e){const n=se(t),i=aa(n);n.Au.delete(e),i.Ko()&&LT(n,e),n.Au.size===0&&(i.Ko()?i.jo():zr(n)&&n.bu.set("Unknown"))}function Mv(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}aa(t).su(e)}function LT(t,e){t.Vu.qt(e),aa(t).iu(e)}function Pv(t){t.Vu=new JF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),aa(t).start(),t.bu.gu()}function Rv(t){return zr(t)&&!aa(t).Uo()&&t.Au.size>0}function zr(t){return se(t).vu.size===0}function FT(t){t.Vu=void 0}async function iV(t){t.Au.forEach((e,n)=>{Mv(t,e)})}async function sV(t,e){FT(t),Rv(t)?(t.bu.Iu(e),Pv(t)):t.bu.set("Unknown")}async function rV(t,e,n){if(t.bu.set("Online"),e instanceof sT&&e.state===2&&e.cause)try{await async function(i,s){const r=s.cause;for(const o of s.targetIds)i.Au.has(o)&&(await i.remoteSyncer.rejectListen(o,r),i.Au.delete(o),i.Vu.removeTarget(o))}(t,e)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await od(t,i)}else if(e instanceof Ju?t.Vu.Ht(e):e instanceof iT?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(Y.min()))try{const i=await AT(t.localStore);n.compareTo(i)>=0&&await function(s,r){const o=s.Vu.ce(r);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.Au.get(l);c&&s.Au.set(l,c.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach((a,l)=>{const c=s.Au.get(a);if(!c)return;s.Au.set(a,c.withResumeToken(Ct.EMPTY_BYTE_STRING,c.snapshotVersion)),LT(s,a);const u=new ki(c.target,a,l,c.sequenceNumber);Mv(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){F("RemoteStore","Failed to raise snapshot:",i),await od(t,i)}}async function od(t,e,n){if(!Vs(e))throw e;t.vu.add(1),await Rc(t),t.bu.set("Offline"),n||(n=()=>AT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await pf(t)})}function $T(t,e){return e().catch(n=>od(t,n,e))}async function Oc(t){const e=se(t),n=As(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;oV(e);)try{const s=await H$(e.localStore,i);if(s===null){e.Eu.length===0&&n.jo();break}i=s.batchId,aV(e,s)}catch(s){await od(e,s)}VT(e)&&zT(e)}function oV(t){return zr(t)&&t.Eu.length<10}function aV(t,e){t.Eu.push(e);const n=As(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function VT(t){return zr(t)&&!As(t).Uo()&&t.Eu.length>0}function zT(t){As(t).start()}async function lV(t){As(t).hu()}async function cV(t){const e=As(t);for(const n of t.Eu)e.uu(n.mutations)}async function uV(t,e,n){const i=t.Eu.shift(),s=xv.from(i,e,n);await $T(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Oc(t)}async function hV(t,e){e&&As(t).ou&&await async function(n,i){if(s=i.code,YF(s)&&s!==D.ABORTED){const r=n.Eu.shift();As(n).Qo(),await $T(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Oc(n)}var s}(t,e),VT(t)&&zT(t)}async function m1(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const i=zr(n);n.vu.add(3),await Rc(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await pf(n)}async function dV(t,e){const n=se(t);e?(n.vu.delete(2),await pf(n)):e||(n.vu.add(2),await Rc(n),n.bu.set("Unknown"))}function aa(t){return t.Su||(t.Su=function(e,n,i){const s=se(e);return s.fu(),new J$(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:iV.bind(null,t),ao:sV.bind(null,t),nu:rV.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),Rv(t)?Pv(t):t.bu.set("Unknown")):(await t.Su.stop(),FT(t))})),t.Su}function As(t){return t.Du||(t.Du=function(e,n,i){const s=se(e);return s.fu(),new Z$(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:lV.bind(null,t),ao:hV.bind(null,t),au:cV.bind(null,t),cu:uV.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Oc(t)):(await t.Du.stop(),t.Eu.length>0&&(F("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new Ov(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nv(t,e){if(Kt("AsyncQueue",`${e}: ${t}`),Vs(t))return new z(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,i)=>e(n,i)||j.comparator(n.key,i.key):(n,i)=>j.comparator(n.key,i.key),this.keyedMap=Fa(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.Cu=new je(j.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):G():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class Wo{constructor(e,n,i,s,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wo(e,n,Io.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.Nu=void 0,this.listeners=[]}}class pV{constructor(){this.queries=new zs(e=>jI(e),rf),this.onlineState="Unknown",this.ku=new Set}}async function Lv(t,e){const n=se(t),i=e.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new fV),s)try{r.Nu=await n.onListen(i)}catch(o){const a=Nv(o,`Initialization of query '${am(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,r),r.listeners.push(e),e.Mu(n.onlineState),r.Nu&&e.$u(r.Nu)&&$v(n)}async function Fv(t,e){const n=se(t),i=e.query;let s=!1;const r=n.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=r.listeners.length===0)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function gV(t,e){const n=se(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.$u(s)&&(i=!0);o.Nu=s}}i&&$v(n)}function mV(t,e,n){const i=se(t),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(n);i.queries.delete(e)}function $v(t){t.ku.forEach(e=>{e.next()})}class Vv{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.key=e}}class jT{constructor(e){this.key=e}}class yV{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ae(),this.mutatedKeys=ae(),this.tc=UI(e),this.ec=new Io(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new y1,s=n?n.ec:this.ec;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=Mc(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),v=!0):this.rc(d,f)||(i.track({type:2,doc:f}),v=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),v=!0):d&&!f&&(i.track({type:1,doc:d}),v=!0,(l||c)&&(a=!0)),v&&(f?(o=o.add(f),r=g?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{ec:o,ic:i,zi:a,mutatedKeys:r}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort((c,u)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return f(h)-f(d)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(i);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,r.length!==0||l?{snapshot:new Wo(this.query,e.ec,s,r,e.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new y1,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ae(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new jT(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new BT(i))}),n}hc(e){this.Yu=e.ir,this.Zu=ae();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Wo.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class vV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class wV{constructor(e){this.key=e,this.fc=!1}}class _V{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new zs(a=>jI(a),rf),this._c=new Map,this.mc=new Set,this.gc=new je(j.comparator),this.yc=new Map,this.Ic=new Cv,this.Tc={},this.Ec=new Map,this.Ac=Pr.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function xV(t,e){const n=MV(t);let i,s;const r=n.wc.get(e);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.lc();else{const o=await W$(n.localStore,jn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=await bV(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&OT(n.remoteStore,o)}return s}async function bV(t,e,n,i,s){t.Rc=(h,d,f)=>async function(p,g,v,m){let y=g.view.sc(v);y.zi&&(y=await f1(p.localStore,g.query,!1).then(({documents:S})=>g.view.sc(S,y)));const w=m&&m.targetChanges.get(g.targetId),b=g.view.applyChanges(y,p.isPrimaryClient,w);return w1(p,g.targetId,b.cc),b.snapshot}(t,h,d,f);const r=await f1(t.localStore,e,!0),o=new yV(e,r.ir),a=o.sc(r.documents),l=Pc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);w1(t,n,c.cc);const u=new vV(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function SV(t,e){const n=se(t),i=n.wc.get(e),s=n._c.get(i.targetId);if(s.length>1)return n._c.set(i.targetId,s.filter(r=>!rf(r,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await gm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),NT(n.remoteStore,i.targetId),mm(n,i.targetId)}).catch($r)):(mm(n,i.targetId),await gm(n.localStore,i.targetId,!0))}async function EV(t,e,n){const i=qT(t);try{const s=await function(r,o){const a=se(r),l=We.now(),c=o.reduce((d,f)=>d.add(f.key),ae());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=pn(),p=ae();return a.Zi.getEntries(d,c).next(g=>{f=g,f.forEach((v,m)=>{m.isValidDocument()||(p=p.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(g=>{u=g;const v=[];for(const m of o){const y=qF(m,u.get(m.key).overlayedDocument);y!=null&&v.push(new Bi(m.key,y,RI(y.value.mapValue),$t.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,v,o)}).next(g=>{h=g;const v=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(d,g.batchId,v)})}).then(()=>({batchId:h.batchId,changes:WI(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,o,a){let l=r.Tc[r.currentUser.toKey()];l||(l=new je(re)),l=l.insert(o,a),r.Tc[r.currentUser.toKey()]=l}(i,s.batchId,n),await Nc(i,s.changes),await Oc(i.remoteStore)}catch(s){const r=Nv(s,"Failed to persist write");n.reject(r)}}async function UT(t,e){const n=se(t);try{const i=await j$(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.yc.get(r);o&&(Q(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?Q(o.fc):s.removedDocuments.size>0&&(Q(o.fc),o.fc=!1))}),await Nc(n,i,e)}catch(i){await $r(i)}}function v1(t,e,n){const i=se(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.wc.forEach((r,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(r,o){const a=se(r);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.Mu(o)&&(l=!0)}),l&&$v(a)}(i.eventManager,e),s.length&&i.dc.nu(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kV(t,e,n){const i=se(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.yc.get(e),r=s&&s.key;if(r){let o=new je(j.comparator);o=o.insert(r,Ye.newNoDocument(r,Y.min()));const a=ae().add(r),l=new cf(Y.min(),new Map,new je(re),o,a);await UT(i,l),i.gc=i.gc.remove(r),i.yc.delete(e),zv(i)}else await gm(i.localStore,e,!1).then(()=>mm(i,e,n)).catch($r)}async function IV(t,e){const n=se(t),i=e.batch.batchId;try{const s=await B$(n.localStore,e);WT(n,i,null),HT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nc(n,s)}catch(s){await $r(s)}}async function TV(t,e,n){const i=se(t);try{const s=await function(r,o){const a=se(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Q(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);WT(i,e,n),HT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nc(i,s)}catch(s){await $r(s)}}function HT(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function WT(t,e,n){const i=se(t);let s=i.Tc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Tc[i.currentUser.toKey()]=s}}function mm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||KT(t,i)})}function KT(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(NT(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),zv(t))}function w1(t,e,n){for(const i of n)i instanceof BT?(t.Ic.addReference(i.key,e),CV(t,i)):i instanceof jT?(F("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||KT(t,i.key)):G()}function CV(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(F("SyncEngine","New document in limbo: "+n),t.mc.add(i),zv(t))}function zv(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new j(be.fromString(e)),i=t.Ac.next();t.yc.set(i,new wV(n)),t.gc=t.gc.insert(n,i),OT(t.remoteStore,new ki(jn(Ac(n.path)),i,"TargetPurposeLimboResolution",In.ct))}}async function Nc(t,e,n){const i=se(t),s=[],r=[],o=[];i.wc.isEmpty()||(i.wc.forEach((a,l)=>{o.push(i.Rc(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=Av.Li(l.targetId,c);r.push(u)}}))}),await Promise.all(o),i.dc.nu(s),await async function(a,l){const c=se(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>T.forEach(l,h=>T.forEach(h.Fi,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>T.forEach(h.Bi,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Vs(u))throw u;F("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Ji.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.Ji=c.Ji.insert(h,p)}}}(i.localStore,r))}async function DV(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const i=await DT(n.localStore,e);n.currentUser=e,function(s,r){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new z(D.CANCELLED,r))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nc(n,i.er)}}function AV(t,e){const n=se(t),i=n.yc.get(e);if(i&&i.fc)return ae().add(i.key);{let s=ae();const r=n._c.get(e);if(!r)return s;for(const o of r){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function MV(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.dc.nu=gV.bind(null,e.eventManager),e.dc.Pc=mV.bind(null,e.eventManager),e}function qT(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TV.bind(null,e),e}class ym{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return CT(this.persistence,new TT,e.initialUser,this.serializer)}createPersistence(e){return new IT(df.zs,this.serializer)}createSharedClientState(e){return new MT}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class PV extends ym{constructor(e,n,i){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await qT(this.Vc.syncEngine),await Oc(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return CT(this.persistence,new TT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new E$(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new eF(n,this.persistence);return new ZL(e.asyncQueue,i)}createPersistence(e){const n=V$(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Dv(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,X$(),Zu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new MT}}class GT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>v1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DV.bind(null,this.syncEngine),await dV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pV}createDatastore(e){const n=ff(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new Q$(s));var s;return function(r,o,a,l){return new eV(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,s=e.asyncQueue,r=a=>v1(this.syncEngine,a,0),o=g1.D()?new g1:new q$,new nV(n,i,s,r,o);var n,i,s,r,o}createSyncEngine(e,n){return function(i,s,r,o,a,l,c){const u=new _V(i,s,r,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=se(e);F("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Rc(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=_I.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{F("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(F("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Nv(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function eh(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await DT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OV(t);F("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(s=>m1(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>m1(e.remoteStore,r)),t._onlineComponents=e}function YT(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function OV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!YT(n))throw n;Is("Error using user provided cache. Falling back to memory cache: "+n),await eh(t,new ym)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await eh(t,new ym);return t._offlineComponents}async function QT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await vm(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await vm(t,new GT))),t._onlineComponents}function NV(t){return QT(t).then(e=>e.syncEngine)}async function ad(t){const e=await QT(t),n=e.eventManager;return n.onListen=xV.bind(null,e.syncEngine),n.onUnlisten=SV.bind(null,e.syncEngine),n}function LV(t,e,n={}){const i=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,o,a,l){const c=new Bv({next:h=>{r.enqueueAndForget(()=>Fv(s,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new z(D.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new z(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Vv(Ac(o.path),c,{includeMetadataChanges:!0,Ku:!0});return Lv(s,u)}(await ad(t),t.asyncQueue,e,n,i)),i.promise}function FV(t,e,n={}){const i=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,o,a,l){const c=new Bv({next:h=>{r.enqueueAndForget(()=>Fv(s,u)),h.fromCache&&a.source==="server"?l.reject(new z(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Vv(o,c,{includeMetadataChanges:!0,Ku:!0});return Lv(s,u)}(await ad(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e,n){if(!n)throw new z(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $V(t,e,n,i){if(e===!0&&i===!0)throw new z(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x1(t){if(!j.isDocumentKey(t))throw new z(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function b1(t){if(j.isDocumentKey(t))throw new z(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function Xt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gf(t);throw new z(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function VV(t,e){if(e<=0)throw new z(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new z(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class mf{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S1(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new zL;switch(n.type){case"firstParty":return new HL(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new z(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=_1.get(e);n&&(F("ComponentProvider","Removing Datastore"),_1.delete(e),n.terminate())}(this),Promise.resolve()}}function zV(t,e,n,i={}){var s;const r=(t=Xt(t,mf))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=bt.MOCK_USER;else{a=c2(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new z(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(c)}t._authCredentials=new BL(new wI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class ji{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class bs extends ji{constructor(e,n,i){super(e,n,Ac(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new j(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Cn(t,e,...n){if(t=ht(t),JT("collection","path",e),t instanceof mf){const i=be.fromString(e,...n);return b1(i),new bs(t,null,i)}{if(!(t instanceof jt||t instanceof bs))throw new z(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(be.fromString(e,...n));return b1(i),new bs(t.firestore,null,i)}}function Fi(t,e,...n){if(t=ht(t),arguments.length===1&&(e=_I.A()),JT("doc","path",e),t instanceof mf){const i=be.fromString(e,...n);return x1(i),new jt(t,null,new j(i))}{if(!(t instanceof jt||t instanceof bs))throw new z(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(be.fromString(e,...n));return x1(i),new jt(t.firestore,t instanceof bs?t.converter:null,new j(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new PT(this,"async_queue_retry"),this.Xc=()=>{const n=Zu();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Zu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new $n;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Vs(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const s=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(i);throw Kt("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=Ov.createAndSchedule(this,e,n,i,r=>this.na(r));return this.zc.push(s),s}Zc(){this.Wc&&G()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function E1(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ui extends mf{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new BV,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZT(this),this._firestoreClient.terminate()}}function jV(t,e){const n=typeof t=="object"?t:RE(),i=typeof t=="string"?t:e||"(default)",s=Ly(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=a2("firestore");r&&zV(s,...r)}return s}function Lc(t){return t._firestoreClient||ZT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZT(t){var e,n,i;const s=t._freezeSettings(),r=function(o,a,l,c){return new xF(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,XT(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new RV(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function UV(t,e){WV(t=Xt(t,ui));const n=Lc(t);if(n._uninitializedComponentsProvider)throw new z(D.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),s=new GT;return HV(n,s,new PV(s,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function HV(t,e,n){const i=new $n;return t.asyncQueue.enqueue(async()=>{try{await eh(t,n),await vm(t,e),i.resolve()}catch(s){const r=s;if(!YT(r))throw r;Is("Error enabling indexeddb cache. Falling back to memory cache: "+r),i.reject(r)}}).then(()=>i.promise)}function WV(t){if(t._initialized||t._terminated)throw new z(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(Ct.fromBase64String(e))}catch(n){throw new z(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=/^__.*__$/;class qV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}class eC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Hv{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:i,la:!1});return s.fa(e),s}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:i,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ld(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(tC(this.ca)&&KV.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class GV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ff(e)}ya(e,n,i,s=!1){return new Hv({ca:e,methodName:n,ga:i,path:it.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vf(t){const e=t._freezeSettings(),n=ff(t._databaseId);return new GV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nC(t,e,n,i,s,r={}){const o=t.ya(r.merge||r.mergeFields?2:0,e,n,s);Wv("Data must be an object, but it was:",o,i);const a=iC(i,o);let l,c;if(r.merge)l=new an(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const d=wm(e,h,n);if(!o.contains(d))throw new z(D.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);rC(u,d)||u.push(d)}l=new an(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new qV(new Ft(a),l,c)}class wf extends jv{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wf}}function YV(t,e,n,i){const s=t.ya(1,e,n);Wv("Data must be an object, but it was:",s,i);const r=[],o=Ft.empty();Vr(i,(l,c)=>{const u=Kv(e,l,n);c=ht(c);const h=s.da(u);if(c instanceof wf)r.push(u);else{const d=Fc(c,h);d!=null&&(r.push(u),o.set(u,d))}});const a=new an(r);return new eC(o,a,s.fieldTransforms)}function QV(t,e,n,i,s,r){const o=t.ya(1,e,n),a=[wm(e,i,n)],l=[s];if(r.length%2!=0)throw new z(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<r.length;d+=2)a.push(wm(e,r[d])),l.push(r[d+1]);const c=[],u=Ft.empty();for(let d=a.length-1;d>=0;--d)if(!rC(c,a[d])){const f=a[d];let p=l[d];p=ht(p);const g=o.da(f);if(p instanceof wf)c.push(f);else{const v=Fc(p,g);v!=null&&(c.push(f),u.set(f,v))}}const h=new an(c);return new eC(u,h,o.fieldTransforms)}function XV(t,e,n,i=!1){return Fc(n,t.ya(i?4:3,e))}function Fc(t,e){if(sC(t=ht(t)))return Wv("Unsupported field value:",e,t),iC(t,e);if(t instanceof jv)return function(n,i){if(!tC(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const s=[];let r=0;for(const o of n){let a=Fc(o,i.wa(r));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),r++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=ht(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return zF(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=We.fromDate(n);return{timestampValue:Ho(i.serializer,s)}}if(n instanceof We){const s=new We(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ho(i.serializer,s)}}if(n instanceof Uv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ko)return{bytesValue:rT(i.serializer,n._byteString)};if(n instanceof jt){const s=i.databaseId,r=n.firestore._databaseId;if(!r.isEqual(s))throw i._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kv(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${gf(n)}`)}(t,e)}function iC(t,e){const n={};return AI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(t,(i,s)=>{const r=Fc(s,e.ha(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function sC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Uv||t instanceof Ko||t instanceof jt||t instanceof jv)}function Wv(t,e,n){if(!sC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=gf(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function wm(t,e,n){if((e=ht(e))instanceof yf)return e._internalPath;if(typeof e=="string")return Kv(t,e);throw ld("Field path arguments must be of type string or ",t,!1,void 0,n)}const JV=new RegExp("[~\\*/\\[\\]]");function Kv(t,e,n){if(e.search(JV)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yf(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ld(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new z(D.INVALID_ARGUMENT,a+t+l)}function rC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZV extends oC{data(){return super.data()}}function qv(t,e){return typeof e=="string"?Kv(t,e):e instanceof yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gv{}class Yv extends Gv{}function k1(t,e,...n){let i=[];e instanceof Gv&&i.push(e),i=i.concat(n),function(s){const r=s.filter(a=>a instanceof Xv).length,o=s.filter(a=>a instanceof Qv).length;if(r>1||r>0&&o>0)throw new z(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Qv extends Yv{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Qv(e,n,i)}_apply(e){const n=this._parse(e);return lC(e._query,n),new ji(e.firestore,e.converter,om(e._query,n))}_parse(e){const n=vf(e.firestore);return function(s,r,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new z(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){D1(u,c);const d=[];for(const f of u)d.push(C1(a,s,f));h={arrayValue:{values:d}}}else h=C1(a,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||D1(u,c),h=XV(o,r,u,c==="in"||c==="not-in");return ge.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Xv extends Gv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xv(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let r=i;const o=s.getFlattenedFilters();for(const a of o)lC(r,a),r=om(r,a)}(e._query,n),new ji(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jv extends Yv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jv(e,n)}_apply(e){const n=function(i,s,r){if(i.startAt!==null)throw new z(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Eo(s,r);return function(a,l){if(wv(a)===null){const c=sf(a);c!==null&&cC(a,c,l.field)}}(i,o),o}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(i,s){const r=i.explicitOrderBy.concat([s]);return new ra(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function I1(t,e="asc"){const n=e,i=qv("orderBy",t);return Jv._create(i,n)}class Zv extends Yv{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Zv(e,n,i)}_apply(e){return new ji(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function T1(t){return VV("limit",t),Zv._create("limit",t,"F")}function C1(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new z(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BI(e)&&n.indexOf("/")!==-1)throw new z(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(be.fromString(n));if(!j.isDocumentKey(i))throw new z(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Gl(t,new j(i))}if(n instanceof jt)return Gl(t,n._key);throw new z(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gf(n)}.`)}function D1(t,e){if(!Array.isArray(t)||t.length===0)throw new z(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lC(t,e){if(e.isInequality()){const i=sf(t),s=e.field;if(i!==null&&!i.isEqual(s))throw new z(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const r=wv(t);r!==null&&cC(t,s,r)}const n=function(i,s){for(const r of i)for(const o of r.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function cC(t,e,n){if(!n.isEqual(e))throw new z(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class ez{convertValue(e,n="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Vr(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertGeoPoint(e){return new Uv(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=yv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=Ts(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=be.fromString(e);Q(pT(i));const s=new Tr(i.get(1),i.get(3)),r=new j(i.popFirst(5));return s.isEqual(n)||Kt(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hC extends oC{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(qv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class th extends hC{data(e={}){return super.data(e)}}class dC{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new za(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new th(this._firestore,this._userDataWriter,i.key,i,new za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>{const a=new th(i._firestore,i._userDataWriter,o.doc.key,o.doc,new za(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new th(i._firestore,i._userDataWriter,o.doc.key,o.doc,new za(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:tz(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(t){t=Xt(t,jt);const e=Xt(t.firestore,ui);return LV(Lc(e),t._key).then(n=>fC(e,t,n))}class e0 extends ez{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function bp(t){t=Xt(t,ji);const e=Xt(t.firestore,ui),n=Lc(e),i=new e0(e);return aC(t._query),FV(n,t._query).then(s=>new dC(e,i,t,s))}function iz(t,e,n){t=Xt(t,jt);const i=Xt(t.firestore,ui),s=uC(t.converter,e,n);return xf(i,[nC(vf(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$t.none())])}function t0(t,e,n,...i){t=Xt(t,jt);const s=Xt(t.firestore,ui),r=vf(s);let o;return o=typeof(e=ht(e))=="string"||e instanceof yf?QV(r,"updateDoc",t._key,e,n,i):YV(r,"updateDoc",t._key,e),xf(s,[o.toMutation(t._key,$t.exists(!0))])}function n0(t){return xf(Xt(t.firestore,ui),[new lf(t._key,$t.none())])}function _f(t,e){const n=Xt(t.firestore,ui),i=Fi(t),s=uC(t.converter,e);return xf(n,[nC(vf(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,$t.exists(!1))]).then(()=>i)}function Jl(t,...e){var n,i,s;t=ht(t);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||E1(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(E1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(t instanceof jt)c=Xt(t.firestore,ui),u=Ac(t._key.path),l={next:h=>{e[o]&&e[o](fC(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Xt(t,ji);c=Xt(h.firestore,ui),u=h._query;const d=new e0(c);l={next:f=>{e[o]&&e[o](new dC(c,d,h,f))},error:e[o+1],complete:e[o+2]},aC(t._query)}return function(h,d,f,p){const g=new Bv(p),v=new Vv(d,g,f);return h.asyncQueue.enqueueAndForget(async()=>Lv(await ad(h),v)),()=>{g.Dc(),h.asyncQueue.enqueueAndForget(async()=>Fv(await ad(h),v))}}(Lc(c),u,a,l)}function xf(t,e){return function(n,i){const s=new $n;return n.asyncQueue.enqueueAndForget(async()=>EV(await NV(n),i,s)),s.promise}(Lc(t),e)}function fC(t,e,n){const i=n.docs.get(e._key),s=new e0(t);return new hC(t,s,e._key,i,new za(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){sa=n})(ta),No(new Sr("firestore",(n,{instanceIdentifier:i,options:s})=>{const r=n.getProvider("app").getImmediate(),o=new ui(new jL(n.getProvider("auth-internal")),new KL(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new z(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tr(a.options.projectId,l)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),xs(E_,"3.13.0",t),xs(E_,"3.13.0","esm2017")})();const sz={apiKey:{}.VITE_FIREBASE_API_KEY,authDomain:{}.VITE_FIREBASE_AUTH_DOMAIN,projectId:{}.VITE_FIREBASE_PROJECT_ID,storageBucket:{}.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:{}.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:{}.VITE_FIREBASE_APP_ID},pC=PE(sz),yu=AN(pC),st=jV(pC);UV(st).catch(()=>{console.warn("Offline persistence could not be enabled")});const gC=P.createContext(void 0),rz=({children:t})=>{const[e,n]=P.useState(null);P.useEffect(()=>(gO(yu,ak),vO(yu,n)),[]);const i=async()=>{const r=new vi;await VO(yu,r)},s=async()=>{await wO(yu)};return A.jsx(gC.Provider,{value:{user:e,login:i,logout:s},children:t})},Br=()=>{const t=P.useContext(gC);if(!t)throw new Error("useAuth must be inside AuthProvider");return t},oz=({children:t})=>{const{user:e}=Br();return e?t:A.jsx(zP,{to:"/login",replace:!0})},az=()=>{const{logout:t}=Br();return A.jsxs("div",{className:"flex h-screen",children:[A.jsx("aside",{className:"w-48 bg-gray-100 dark:bg-gray-800 p-4",children:A.jsxs("nav",{className:"space-y-2",children:[A.jsx(ip,{to:"/dashboard",className:"block",children:"Dashboard"}),A.jsx(ip,{to:"/settings",className:"block",children:"Settings"}),A.jsx(ip,{to:"/research",className:"block",children:"I+D"})]})}),A.jsxs("div",{className:"flex-1 flex flex-col",children:[A.jsxs("header",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between",children:[A.jsx("span",{className:"font-bold",children:"Fin Tracker"}),A.jsx("button",{onClick:t,className:"text-sm text-red-600",children:"Logout"})]}),A.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:A.jsx(BP,{})})]})]})};function lz(){const{login:t}=Br();return A.jsx("div",{className:"h-screen flex items-center justify-center",children:A.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Sign in with Google"})})}var mC={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,i)=>{t.exports=i()})(bD,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},s,r=!i.document&&!!i.postMessage,o=i.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(x){var E=S(x);E.chunkSize=parseInt(E.chunkSize),x.step||x.chunk||(E.chunkSize=null),this._handle=new g(E),(this._handle.streamer=this)._config=E}).call(this,_),this.parseChunk=function(x,E){var M=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<M){let K=this._config.newline;K||(O=this._config.quoteChar||'"',K=this._handle.guessLineEndings(x,O)),x=[...x.split(K).slice(M)].join(K)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(x))!==void 0&&(x=O),this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+x,O=(this._partialLine="",this._handle.parse(M,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(x=O.meta.cursor,M=(this._finished||(this._partialLine=M.substring(x-this._baseIndex),this._baseIndex=x),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)i.postMessage({results:O,workerId:c.WORKER_ID,finished:M});else if(k(this._config.chunk)&&!E){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!M||!k(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(x){k(this._config.error)?this._config.error(x):o&&this._config.error&&i.postMessage({workerId:c.WORKER_ID,error:x,finished:!1})}}function h(_){var x;(_=_||{}).chunkSize||(_.chunkSize=c.RemoteChunkSize),u.call(this,_),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(x=new XMLHttpRequest,this._config.withCredentials&&(x.withCredentials=this._config.withCredentials),r||(x.onload=I(this._chunkLoaded,this),x.onerror=I(this._chunkError,this)),x.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var E,M=this._config.downloadRequestHeaders;for(E in M)x.setRequestHeader(E,M[E])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,x.setRequestHeader("Range","bytes="+this._start+"-"+O));try{x.send(this._config.downloadRequestBody)}catch(K){this._chunkError(K.message)}r&&x.status===0&&this._chunkError()}},this._chunkLoaded=function(){x.readyState===4&&(x.status<200||400<=x.status?this._chunkError():(this._start+=this._config.chunkSize||x.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(x),this.parseChunk(x.responseText)))},this._chunkError=function(E){E=x.statusText||E,this._sendError(new Error(E))}}function d(_){(_=_||{}).chunkSize||(_.chunkSize=c.LocalChunkSize),u.call(this,_);var x,E,M=typeof FileReader<"u";this.stream=function(O){this._input=O,E=O.slice||O.webkitSlice||O.mozSlice,M?((x=new FileReader).onload=I(this._chunkLoaded,this),x.onerror=I(this._chunkError,this)):x=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,K=(this._config.chunkSize&&(K=Math.min(this._start+this._config.chunkSize,this._input.size),O=E.call(O,this._start,K)),x.readAsText(O,this._config.encoding));M||this._chunkLoaded({target:{result:K}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(x.error)}}function f(_){var x;u.call(this,_=_||{}),this.stream=function(E){return x=E,this._nextChunk()},this._nextChunk=function(){var E,M;if(!this._finished)return E=this._config.chunkSize,x=E?(M=x.substring(0,E),x.substring(E)):(M=x,""),this._finished=!x,this.parseChunk(M)}}function p(_){u.call(this,_=_||{});var x=[],E=!0,M=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){M&&x.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),x.length?this.parseChunk(x.shift()):E=!0},this._streamData=I(function(O){try{x.push(typeof O=="string"?O:O.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(x.shift()))}catch(K){this._streamError(K)}},this),this._streamError=I(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=I(function(){this._streamCleanUp(),M=!0,this._streamData("")},this),this._streamCleanUp=I(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(_){var x,E,M,O,K=Math.pow(2,53),ce=-K,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,q=this,N=0,R=0,H=!1,U=!1,C=[],$={data:[],errors:[],meta:{}};function X(Z){return _.skipEmptyLines==="greedy"?Z.join("").trim()==="":Z.length===1&&Z[0].length===0}function le(){if($&&M&&(rt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),M=!1),_.skipEmptyLines&&($.data=$.data.filter(function(Fe){return!X(Fe)})),ue()){let Fe=function(dt,$e){k(_.transformHeader)&&(dt=_.transformHeader(dt,$e)),C.push(dt)};var he=Fe;if($)if(Array.isArray($.data[0])){for(var Z=0;ue()&&Z<$.data.length;Z++)$.data[Z].forEach(Fe);$.data.splice(0,1)}else $.data.forEach(Fe)}function oe(Fe,dt){for(var $e=_.header?{}:[],Te=0;Te<Fe.length;Te++){var de=Te,Dt=Fe[Te],Dt=((xe,Ve)=>(ot=>(_.dynamicTypingFunction&&_.dynamicTyping[ot]===void 0&&(_.dynamicTyping[ot]=_.dynamicTypingFunction(ot)),(_.dynamicTyping[ot]||_.dynamicTyping)===!0))(xe)?Ve==="true"||Ve==="TRUE"||Ve!=="false"&&Ve!=="FALSE"&&((ot=>{if(J.test(ot)&&(ot=parseFloat(ot),ce<ot&&ot<K))return 1})(Ve)?parseFloat(Ve):ie.test(Ve)?new Date(Ve):Ve===""?null:Ve):Ve)(de=_.header?Te>=C.length?"__parsed_extra":C[Te]:de,Dt=_.transform?_.transform(Dt,de):Dt);de==="__parsed_extra"?($e[de]=$e[de]||[],$e[de].push(Dt)):$e[de]=Dt}return _.header&&(Te>C.length?rt("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+Te,R+dt):Te<C.length&&rt("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+Te,R+dt)),$e}var Ce;$&&(_.header||_.dynamicTyping||_.transform)&&(Ce=1,!$.data.length||Array.isArray($.data[0])?($.data=$.data.map(oe),Ce=$.data.length):$.data=oe($.data,0),_.header&&$.meta&&($.meta.fields=C),R+=Ce)}function ue(){return _.header&&C.length===0}function rt(Z,oe,Ce,he){Z={type:Z,code:oe,message:Ce},he!==void 0&&(Z.row=he),$.errors.push(Z)}k(_.step)&&(O=_.step,_.step=function(Z){$=Z,ue()?le():(le(),$.data.length!==0&&(N+=Z.data.length,_.preview&&N>_.preview?E.abort():($.data=$.data[0],O($,q))))}),this.parse=function(Z,oe,Ce){var he=_.quoteChar||'"',he=(_.newline||(_.newline=this.guessLineEndings(Z,he)),M=!1,_.delimiter?k(_.delimiter)&&(_.delimiter=_.delimiter(Z),$.meta.delimiter=_.delimiter):((he=((Fe,dt,$e,Te,de)=>{var Dt,xe,Ve,ot;de=de||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ur=0;Ur<de.length;Ur++){for(var Hn,la=de[Ur],At=0,Wn=0,ft=0,en=(Ve=void 0,new m({comments:Te,delimiter:la,newline:dt,preview:10}).parse(Fe)),hi=0;hi<en.data.length;hi++)$e&&X(en.data[hi])?ft++:(Hn=en.data[hi].length,Wn+=Hn,Ve===void 0?Ve=Hn:0<Hn&&(At+=Math.abs(Hn-Ve),Ve=Hn));0<en.data.length&&(Wn/=en.data.length-ft),(xe===void 0||At<=xe)&&(ot===void 0||ot<Wn)&&1.99<Wn&&(xe=At,Dt=la,ot=Wn)}return{successful:!!(_.delimiter=Dt),bestDelimiter:Dt}})(Z,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=he.bestDelimiter:(M=!0,_.delimiter=c.DefaultDelimiter),$.meta.delimiter=_.delimiter),S(_));return _.preview&&_.header&&he.preview++,x=Z,E=new m(he),$=E.parse(x,oe,Ce),le(),H?{meta:{paused:!0}}:$||{meta:{paused:!1}}},this.paused=function(){return H},this.pause=function(){H=!0,E.abort(),x=k(_.chunk)?"":x.substring(E.getCharIndex())},this.resume=function(){q.streamer._halted?(H=!1,q.streamer.parseChunk(x,!0)):setTimeout(q.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,E.abort(),$.meta.aborted=!0,k(_.complete)&&_.complete($),x=""},this.guessLineEndings=function(Fe,he){Fe=Fe.substring(0,1048576);var he=new RegExp(v(he)+"([^]*?)"+v(he),"gm"),Ce=(Fe=Fe.replace(he,"")).split("\r"),he=Fe.split(`
`),Fe=1<he.length&&he[0].length<Ce[0].length;if(Ce.length===1||Fe)return`
`;for(var dt=0,$e=0;$e<Ce.length;$e++)Ce[$e][0]===`
`&&dt++;return dt>=Ce.length/2?`\r
`:"\r"}}function v(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(_){var x=(_=_||{}).delimiter,E=_.newline,M=_.comments,O=_.step,K=_.preview,ce=_.fastMode,J=null,ie=!1,q=_.quoteChar==null?'"':_.quoteChar,N=q;if(_.escapeChar!==void 0&&(N=_.escapeChar),(typeof x!="string"||-1<c.BAD_DELIMITERS.indexOf(x))&&(x=","),M===x)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<c.BAD_DELIMITERS.indexOf(M))&&(M=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var R=0,H=!1;this.parse=function(U,C,$){if(typeof U!="string")throw new Error("Input must be a string");var X=U.length,le=x.length,ue=E.length,rt=M.length,Z=k(O),oe=[],Ce=[],he=[],Fe=R=0;if(!U)return At();if(ce||ce!==!1&&U.indexOf(q)===-1){for(var dt=U.split(E),$e=0;$e<dt.length;$e++){if(he=dt[$e],R+=he.length,$e!==dt.length-1)R+=E.length;else if($)return At();if(!M||he.substring(0,rt)!==M){if(Z){if(oe=[],ot(he.split(x)),Wn(),H)return At()}else ot(he.split(x));if(K&&K<=$e)return oe=oe.slice(0,K),At(!0)}}return At()}for(var Te=U.indexOf(x,R),de=U.indexOf(E,R),Dt=new RegExp(v(N)+v(q),"g"),xe=U.indexOf(q,R);;)if(U[R]===q)for(xe=R,R++;;){if((xe=U.indexOf(q,xe+1))===-1)return $||Ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:R}),Hn();if(xe===X-1)return Hn(U.substring(R,xe).replace(Dt,q));if(q===N&&U[xe+1]===N)xe++;else if(q===N||xe===0||U[xe-1]!==N){Te!==-1&&Te<xe+1&&(Te=U.indexOf(x,xe+1));var Ve=Ur((de=de!==-1&&de<xe+1?U.indexOf(E,xe+1):de)===-1?Te:Math.min(Te,de));if(U.substr(xe+1+Ve,le)===x){he.push(U.substring(R,xe).replace(Dt,q)),U[R=xe+1+Ve+le]!==q&&(xe=U.indexOf(q,R)),Te=U.indexOf(x,R),de=U.indexOf(E,R);break}if(Ve=Ur(de),U.substring(xe+1+Ve,xe+1+Ve+ue)===E){if(he.push(U.substring(R,xe).replace(Dt,q)),la(xe+1+Ve+ue),Te=U.indexOf(x,R),xe=U.indexOf(q,R),Z&&(Wn(),H))return At();if(K&&oe.length>=K)return At(!0);break}Ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:R}),xe++}}else if(M&&he.length===0&&U.substring(R,R+rt)===M){if(de===-1)return At();R=de+ue,de=U.indexOf(E,R),Te=U.indexOf(x,R)}else if(Te!==-1&&(Te<de||de===-1))he.push(U.substring(R,Te)),R=Te+le,Te=U.indexOf(x,R);else{if(de===-1)break;if(he.push(U.substring(R,de)),la(de+ue),Z&&(Wn(),H))return At();if(K&&oe.length>=K)return At(!0)}return Hn();function ot(ft){oe.push(ft),Fe=R}function Ur(ft){var en=0;return en=ft!==-1&&(ft=U.substring(xe+1,ft))&&ft.trim()===""?ft.length:en}function Hn(ft){return $||(ft===void 0&&(ft=U.substring(R)),he.push(ft),R=X,ot(he),Z&&Wn()),At()}function la(ft){R=ft,ot(he),he=[],de=U.indexOf(E,R)}function At(ft){if(_.header&&!C&&oe.length&&!ie){var en=oe[0],hi=Object.create(null),Df=new Set(en);let w0=!1;for(let Hr=0;Hr<en.length;Hr++){let Kn=en[Hr];if(hi[Kn=k(_.transformHeader)?_.transformHeader(Kn,Hr):Kn]){let ca,_0=hi[Kn];for(;ca=Kn+"_"+_0,_0++,Df.has(ca););Df.add(ca),en[Hr]=ca,hi[Kn]++,w0=!0,(J=J===null?{}:J)[ca]=Kn}else hi[Kn]=1,en[Hr]=Kn;Df.add(Kn)}w0&&console.warn("Duplicate headers found and renamed."),ie=!0}return{data:oe,errors:Ce,meta:{delimiter:x,linebreak:E,aborted:H,truncated:!!ft,cursor:Fe+(C||0),renamedHeaders:J}}}function Wn(){O(At()),oe=[],Ce=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return R}}function y(_){var x=_.data,E=a[x.workerId],M=!1;if(x.error)E.userError(x.error,x.file);else if(x.results&&x.results.data){var O={abort:function(){M=!0,w(x.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(k(E.userStep)){for(var K=0;K<x.results.data.length&&(E.userStep({data:x.results.data[K],errors:x.results.errors,meta:x.results.meta},O),!M);K++);delete x.results}else k(E.userChunk)&&(E.userChunk(x.results,O,x.file),delete x.results)}x.finished&&!M&&w(x.workerId,x.results)}function w(_,x){var E=a[_];k(E.userComplete)&&E.userComplete(x),E.terminate(),delete a[_]}function b(){throw new Error("Not implemented.")}function S(_){if(typeof _!="object"||_===null)return _;var x,E=Array.isArray(_)?[]:{};for(x in _)E[x]=S(_[x]);return E}function I(_,x){return function(){_.apply(x,arguments)}}function k(_){return typeof _=="function"}return c.parse=function(_,x){var E=(x=x||{}).dynamicTyping||!1;if(k(E)&&(x.dynamicTypingFunction=E,E={}),x.dynamicTyping=E,x.transform=!!k(x.transform)&&x.transform,!x.worker||!c.WORKERS_SUPPORTED)return E=null,c.NODE_STREAM_INPUT,typeof _=="string"?(_=(M=>M.charCodeAt(0)!==65279?M:M.slice(1))(_),E=new(x.download?h:f)(x)):_.readable===!0&&k(_.read)&&k(_.on)?E=new p(x):(i.File&&_ instanceof File||_ instanceof Object)&&(E=new d(x)),E.stream(_);(E=(()=>{var M;return!!c.WORKERS_SUPPORTED&&(M=(()=>{var O=i.URL||i.webkitURL||null,K=n.toString();return c.BLOB_URL||(c.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",K,")();"],{type:"text/javascript"})))})(),(M=new i.Worker(M)).onmessage=y,M.id=l++,a[M.id]=M)})()).userStep=x.step,E.userChunk=x.chunk,E.userComplete=x.complete,E.userError=x.error,x.step=k(x.step),x.chunk=k(x.chunk),x.complete=k(x.complete),x.error=k(x.error),delete x.worker,E.postMessage({input:_,config:x,workerId:E.id})},c.unparse=function(_,x){var E=!1,M=!0,O=",",K=`\r
`,ce='"',J=ce+ce,ie=!1,q=null,N=!1,R=((()=>{if(typeof x=="object"){if(typeof x.delimiter!="string"||c.BAD_DELIMITERS.filter(function(C){return x.delimiter.indexOf(C)!==-1}).length||(O=x.delimiter),typeof x.quotes!="boolean"&&typeof x.quotes!="function"&&!Array.isArray(x.quotes)||(E=x.quotes),typeof x.skipEmptyLines!="boolean"&&typeof x.skipEmptyLines!="string"||(ie=x.skipEmptyLines),typeof x.newline=="string"&&(K=x.newline),typeof x.quoteChar=="string"&&(ce=x.quoteChar),typeof x.header=="boolean"&&(M=x.header),Array.isArray(x.columns)){if(x.columns.length===0)throw new Error("Option columns is empty");q=x.columns}x.escapeChar!==void 0&&(J=x.escapeChar+ce),x.escapeFormulae instanceof RegExp?N=x.escapeFormulae:typeof x.escapeFormulae=="boolean"&&x.escapeFormulae&&(N=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(ce),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return H(null,_,ie);if(typeof _[0]=="object")return H(q||Object.keys(_[0]),_,ie)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||q),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),H(_.fields||[],_.data||[],ie);throw new Error("Unable to serialize unrecognized input");function H(C,$,X){var le="",ue=(typeof C=="string"&&(C=JSON.parse(C)),typeof $=="string"&&($=JSON.parse($)),Array.isArray(C)&&0<C.length),rt=!Array.isArray($[0]);if(ue&&M){for(var Z=0;Z<C.length;Z++)0<Z&&(le+=O),le+=U(C[Z],Z);0<$.length&&(le+=K)}for(var oe=0;oe<$.length;oe++){var Ce=(ue?C:$[oe]).length,he=!1,Fe=ue?Object.keys($[oe]).length===0:$[oe].length===0;if(X&&!ue&&(he=X==="greedy"?$[oe].join("").trim()==="":$[oe].length===1&&$[oe][0].length===0),X==="greedy"&&ue){for(var dt=[],$e=0;$e<Ce;$e++){var Te=rt?C[$e]:$e;dt.push($[oe][Te])}he=dt.join("").trim()===""}if(!he){for(var de=0;de<Ce;de++){0<de&&!Fe&&(le+=O);var Dt=ue&&rt?C[de]:de;le+=U($[oe][Dt],de)}oe<$.length-1&&(!X||0<Ce&&!Fe)&&(le+=K)}}return le}function U(C,$){var X,le;return C==null?"":C.constructor===Date?JSON.stringify(C).slice(1,25):(le=!1,N&&typeof C=="string"&&N.test(C)&&(C="'"+C,le=!0),X=C.toString().replace(R,J),(le=le||E===!0||typeof E=="function"&&E(C,$)||Array.isArray(E)&&E[$]||((ue,rt)=>{for(var Z=0;Z<rt.length;Z++)if(-1<ue.indexOf(rt[Z]))return!0;return!1})(X,c.BAD_DELIMITERS)||-1<X.indexOf(O)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?ce+X+ce:X)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!i.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=m,c.ParserHandle=g,c.NetworkStreamer=h,c.FileStreamer=d,c.StringStreamer=f,c.ReadableStreamStreamer=p,i.jQuery&&((s=i.jQuery).fn.parse=function(_){var x=_.config||{},E=[];return this.each(function(K){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var ce=0;ce<this.files.length;ce++)E.push({file:this.files[ce],inputElem:this,instanceConfig:s.extend({},x)})}),M(),this;function M(){if(E.length===0)k(_.complete)&&_.complete();else{var K,ce,J,ie,q=E[0];if(k(_.before)){var N=_.before(q.file,q.inputElem);if(typeof N=="object"){if(N.action==="abort")return K="AbortError",ce=q.file,J=q.inputElem,ie=N.reason,void(k(_.error)&&_.error({name:K},ce,J,ie));if(N.action==="skip")return void O();typeof N.config=="object"&&(q.instanceConfig=s.extend(q.instanceConfig,N.config))}else if(N==="skip")return void O()}var R=q.instanceConfig.complete;q.instanceConfig.complete=function(H){k(R)&&R(H,q.file,q.inputElem),O()},c.parse(q.file,q.instanceConfig)}}function O(){E.splice(0,1),M()}}),o&&(i.onmessage=function(_){_=_.data,c.WORKER_ID===void 0&&_&&(c.WORKER_ID=_.workerId),typeof _.input=="string"?i.postMessage({workerId:c.WORKER_ID,results:c.parse(_.input,_.config),finished:!0}):(i.File&&_.input instanceof File||_.input instanceof Object)&&(_=c.parse(_.input,_.config))&&i.postMessage({workerId:c.WORKER_ID,results:_,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(u.prototype)).constructor=p,c})})(mC);var cz=mC.exports;const yC=eb(cz);async function _m(t){const e=await bp(Cn(st,"users",t,"accounts")),n=await bp(Cn(st,"users",t,"tx")),i=await bp(Cn(st,"users",t,"goals"));return{accounts:e.docs.map(s=>({id:s.id,...s.data()})),transactions:n.docs.map(s=>({id:s.id,...s.data()})),goals:i.docs.map(s=>({id:s.id,...s.data()}))}}function uz(t){return new Blob([JSON.stringify(t,null,2)],{type:"application/json"})}function hz(t){const e=[];t.accounts.forEach(i=>e.push({collection:"accounts",...i})),t.transactions.forEach(i=>e.push({collection:"tx",...i})),t.goals.forEach(i=>e.push({collection:"goals",...i}));const n=yC.unparse(e);return new Blob([n],{type:"text/csv"})}async function dz(t,e){const n=await e.text(),i=yC.parse(n,{header:!0});if(!(!i.data||!Array.isArray(i.data)))for(const s of i.data){if(!s.collection)continue;const{collection:r,id:o,...a}=s,l=Cn(st,"users",t,r);o?await iz(Fi(l,o),a):await _f(l,a)}}async function fz(t,e){const n=await nz(Fi(st,"users",t,"driveToken"));if(!n.exists())return;const i=n.data().access_token,s={name:`fintracker_backup_${Date.now()}.json`},r="BOUNDARY",o=`--${r}\r
Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(s)+`\r
--${r}\r
Content-Type: application/json\r
\r
`+JSON.stringify(e)+`\r
--${r}--`;await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":`multipart/related; boundary=${r}`},body:o})}async function Ai(t){const e=await _m(t);await fz(t,e)}const pz=()=>{const{user:t}=Br(),[e,n]=P.useState([]);return P.useEffect(()=>{if(!t)return;const o=Cn(st,"users",t.uid,"accounts");return Jl(o,a=>{n(a.docs.map(l=>({id:l.id,...l.data()})))})},[t]),{accounts:e,addAccount:async o=>{if(!t)return;const a=Cn(st,"users",t.uid,"accounts");await _f(a,o),await Ai(t.uid)},updateAccount:async(o,a)=>{t&&(await t0(Fi(st,"users",t.uid,"accounts",o),a),await Ai(t.uid))},deleteAccount:async o=>{t&&(await n0(Fi(st,"users",t.uid,"accounts",o)),await Ai(t.uid))}}},gz=()=>{const{user:t}=Br(),[e,n]=P.useState([]);return P.useEffect(()=>{if(!t)return;const o=Cn(st,"users",t.uid,"tx");return Jl(o,a=>{n(a.docs.map(l=>({id:l.id,...l.data()})))})},[t]),{transactions:e,addTransaction:async o=>{if(!t)return;const a=Cn(st,"users",t.uid,"tx");await _f(a,o),await Ai(t.uid)},updateTransaction:async(o,a)=>{t&&(await t0(Fi(st,"users",t.uid,"tx",o),a),await Ai(t.uid))},deleteTransaction:async o=>{t&&(await n0(Fi(st,"users",t.uid,"tx",o)),await Ai(t.uid))}}},mz=()=>{const{user:t}=Br(),[e,n]=P.useState([]);return P.useEffect(()=>{if(!t)return;const o=Cn(st,"users",t.uid,"goals");return Jl(o,a=>{n(a.docs.map(l=>({id:l.id,...l.data()})))})},[t]),{goals:e,addGoal:async o=>{if(!t)return;const a=Cn(st,"users",t.uid,"goals");await _f(a,o),await Ai(t.uid)},updateGoal:async(o,a)=>{t&&(await t0(Fi(st,"users",t.uid,"goals",o),a),await Ai(t.uid))},deleteGoal:async o=>{t&&(await n0(Fi(st,"users",t.uid,"goals",o)),await Ai(t.uid))}}},yz=()=>{const[t,e]=P.useState(),[n,i]=P.useState();return P.useEffect(()=>{const s=k1(Cn(st,"rates","dailyUSD"),I1("__name__","desc"),T1(1));return Jl(s,r=>{if(!r.empty){const o=r.docs[0].data();e(o.rate)}})},[]),P.useEffect(()=>{const s=k1(Cn(st,"rates","mpYield"),I1("__name__","desc"),T1(1));return Jl(s,r=>{if(!r.empty){const o=r.docs[0].data();i(o.tna)}})},[]),{usdRate:t,mpTna:n}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $c(t){return t+.5|0}const os=(t,e,n)=>Math.max(Math.min(t,n),e);function Ba(t){return os($c(t*2.55),0,255)}function Ss(t){return os($c(t*255),0,255)}function yi(t){return os($c(t/2.55)/100,0,1)}function A1(t){return os($c(t*100),0,100)}const xn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xm=[..."0123456789ABCDEF"],vz=t=>xm[t&15],wz=t=>xm[(t&240)>>4]+xm[t&15],vu=t=>(t&240)>>4===(t&15),_z=t=>vu(t.r)&&vu(t.g)&&vu(t.b)&&vu(t.a);function xz(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&xn[t[1]]*17,g:255&xn[t[2]]*17,b:255&xn[t[3]]*17,a:e===5?xn[t[4]]*17:255}:(e===7||e===9)&&(n={r:xn[t[1]]<<4|xn[t[2]],g:xn[t[3]]<<4|xn[t[4]],b:xn[t[5]]<<4|xn[t[6]],a:e===9?xn[t[7]]<<4|xn[t[8]]:255})),n}const bz=(t,e)=>t<255?e(t):"";function Sz(t){var e=_z(t)?vz:wz;return t?"#"+e(t.r)+e(t.g)+e(t.b)+bz(t.a,e):void 0}const Ez=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vC(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function kz(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Iz(t,e,n){const i=vC(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function Tz(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function i0(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=Tz(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function s0(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ss)}function r0(t,e,n){return s0(vC,t,e,n)}function Cz(t,e,n){return s0(Iz,t,e,n)}function Dz(t,e,n){return s0(kz,t,e,n)}function wC(t){return(t%360+360)%360}function Az(t){const e=Ez.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ba(+e[5]):Ss(+e[5]));const s=wC(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Cz(s,r,o):e[1]==="hsv"?i=Dz(s,r,o):i=r0(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function Mz(t,e){var n=i0(t);n[0]=wC(n[0]+e),n=r0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Pz(t){if(!t)return;const e=i0(t),n=e[0],i=A1(e[1]),s=A1(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${yi(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const M1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},P1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Rz(){const t={},e=Object.keys(P1),n=Object.keys(M1);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,M1[r]);r=parseInt(P1[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let wu;function Oz(t){wu||(wu=Rz(),wu.transparent=[0,0,0,0]);const e=wu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Nz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Lz(t){const e=Nz.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ba(o):os(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Ba(i):os(i,0,255)),s=255&(e[4]?Ba(s):os(s,0,255)),r=255&(e[6]?Ba(r):os(r,0,255)),{r:i,g:s,b:r,a:n}}}function Fz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${yi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Sp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Yr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $z(t,e,n){const i=Yr(yi(t.r)),s=Yr(yi(t.g)),r=Yr(yi(t.b));return{r:Ss(Sp(i+n*(Yr(yi(e.r))-i))),g:Ss(Sp(s+n*(Yr(yi(e.g))-s))),b:Ss(Sp(r+n*(Yr(yi(e.b))-r))),a:t.a+n*(e.a-t.a)}}function _u(t,e,n){if(t){let i=i0(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=r0(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function _C(t,e){return t&&Object.assign(e||{},t)}function R1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ss(t[3]))):(e=_C(t,{r:0,g:0,b:0,a:1}),e.a=Ss(e.a)),e}function Vz(t){return t.charAt(0)==="r"?Lz(t):Az(t)}class Zl{constructor(e){if(e instanceof Zl)return e;const n=typeof e;let i;n==="object"?i=R1(e):n==="string"&&(i=xz(e)||Oz(e)||Vz(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=_C(this._rgb);return e&&(e.a=yi(e.a)),e}set rgb(e){this._rgb=R1(e)}rgbString(){return this._valid?Fz(this._rgb):void 0}hexString(){return this._valid?Sz(this._rgb):void 0}hslString(){return this._valid?Pz(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=$z(this._rgb,e._rgb,n)),this}clone(){return new Zl(this.rgb)}alpha(e){return this._rgb.a=Ss(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=$c(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _u(this._rgb,2,e),this}darken(e){return _u(this._rgb,2,-e),this}saturate(e){return _u(this._rgb,1,e),this}desaturate(e){return _u(this._rgb,1,-e),this}rotate(e){return Mz(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function di(){}const zz=(()=>{let t=0;return()=>t++})();function fe(t){return t==null}function Re(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Qe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function hn(t,e){return Qe(t)?t:e}function ne(t,e){return typeof t>"u"?e:t}const Bz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function De(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Se(t,e,n,i){let s,r,o;if(Re(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(me(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function cd(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ud(t){if(Re(t))return t.map(ud);if(me(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=ud(t[n[s]]);return e}return t}function bC(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function jz(t,e,n,i){if(!bC(t))return;const s=e[t],r=n[t];me(s)&&me(r)?ec(s,r,i):e[t]=ud(r)}function ec(t,e,n){const i=Re(e)?e:[e],s=i.length;if(!me(t))return t;n=n||{};const r=n.merger||jz;let o;for(let a=0;a<s;++a){if(o=i[a],!me(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function ll(t,e){return ec(t,e,{merger:Uz})}function Uz(t,e,n){if(!bC(t))return;const i=e[t],s=n[t];me(i)&&me(s)?ll(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ud(s))}const O1={"":t=>t,x:t=>t.x,y:t=>t.y};function Hz(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Wz(t){const e=Hz(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Ms(t,e){return(O1[e]||(O1[e]=Wz(e)))(t)}function o0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const tc=t=>typeof t<"u",Ps=t=>typeof t=="function",N1=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Kz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const _e=Math.PI,Ne=2*_e,qz=Ne+_e,hd=Number.POSITIVE_INFINITY,Gz=_e/180,Ze=_e/2,Us=_e/4,L1=_e*2/3,as=Math.log10,ai=Math.sign;function cl(t,e,n){return Math.abs(t-e)<n}function F1(t){const e=Math.round(t);t=cl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(as(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Yz(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function Qz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function qo(t){return!Qz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Xz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function SC(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Nn(t){return t*(_e/180)}function a0(t){return t*(180/_e)}function $1(t){if(!Qe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function EC(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*_e&&(r+=Ne),{angle:r,distance:s}}function bm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Jz(t,e){return(t-e+qz)%Ne-_e}function Nt(t){return(t%Ne+Ne)%Ne}function nc(t,e,n,i){const s=Nt(t),r=Nt(e),o=Nt(n),a=Nt(r-s),l=Nt(o-s),c=Nt(s-r),u=Nt(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function mt(t,e,n){return Math.max(e,Math.min(n,t))}function Zz(t){return mt(t,-32768,32767)}function Ii(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function l0(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Ti=(t,e,n,i)=>l0(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),eB=(t,e,n)=>l0(t,n,i=>t[i][e]>=n);function tB(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const kC=["push","pop","shift","splice","unshift"];function nB(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),kC.forEach(n=>{const i="_onData"+o0(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function V1(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(kC.forEach(r=>{delete t[r]}),delete t._chartjs)}function IC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const TC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function CC(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,TC.call(window,()=>{i=!1,t.apply(e,n)}))}}function iB(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const c0=t=>t==="start"?"left":t==="end"?"right":"center",Ot=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,sB=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function DC(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(s=Math.min(Ti(l,u,h).lo,n?i:Ti(e,u,o.getPixelForValue(h)).lo),c){const g=l.slice(0,s+1).reverse().findIndex(v=>!fe(v[a.axis]));s-=Math.max(0,g)}s=mt(s,0,i-1)}if(p){let g=Math.max(Ti(l,o.axis,d,!0).hi+1,n?0:Ti(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const v=l.slice(g-1).findIndex(m=>!fe(m[a.axis]));g+=Math.max(0,v)}r=mt(g,s,i)-s}else r=i-s}return{start:s,count:r}}function AC(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const xu=t=>t===0||t===1,z1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ne/n)),B1=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ne/n)+1,ul={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ze)+1,easeOutSine:t=>Math.sin(t*Ze),easeInOutSine:t=>-.5*(Math.cos(_e*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>xu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>xu(t)?t:z1(t,.075,.3),easeOutElastic:t=>xu(t)?t:B1(t,.075,.3),easeInOutElastic(t){return xu(t)?t:t<.5?.5*z1(t*2,.1125,.45):.5+.5*B1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ul.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ul.easeInBounce(t*2)*.5:ul.easeOutBounce(t*2-1)*.5+.5};function u0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function j1(t){return u0(t)?t:new Zl(t)}function Ep(t){return u0(t)?t:new Zl(t).saturate(.5).darken(.1).hexString()}const rB=["x","y","borderWidth","radius","tension"],oB=["color","borderColor","backgroundColor"];function aB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:oB},numbers:{type:"number",properties:rB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function lB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const U1=new Map;function cB(t,e){e=e||{};const n=t+JSON.stringify(e);let i=U1.get(n);return i||(i=new Intl.NumberFormat(t,e),U1.set(n,i)),i}function Vc(t,e,n){return cB(e,n).format(t)}const MC={values(t){return Re(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=uB(t,n)}const o=as(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Vc(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(as(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?MC.numeric.call(this,t,e,n):""}};function uB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var bf={formatters:MC};function hB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Rr=Object.create(null),Sm=Object.create(null);function hl(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function kp(t,e,n){return typeof e=="string"?ec(hl(t,e),n):ec(hl(t,""),e)}class dB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Ep(s.backgroundColor),this.hoverBorderColor=(i,s)=>Ep(s.borderColor),this.hoverColor=(i,s)=>Ep(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return kp(this,e,n)}get(e){return hl(this,e)}describe(e,n){return kp(Sm,e,n)}override(e,n){return kp(Rr,e,n)}route(e,n,i,s){const r=hl(this,e),o=hl(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return me(l)?Object.assign({},c,l):ne(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Be=new dB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[aB,lB,hB]);function fB(t){return!t||fe(t.size)||fe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function dd(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function pB(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Re(h))o=dd(t,s,r,o,h);else if(Re(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Re(d)&&(o=dd(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function Hs(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function H1(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Em(t,e,n,i){PC(t,e,n,i,null)}function PC(t,e,n,i,s){let r,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let v=(p||0)*Gz;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,g,0,0,Ne):t.arc(n,i,g,0,Ne),t.closePath();break;case"triangle":u=s?s/2:g,t.moveTo(n+Math.sin(v)*u,i-Math.cos(v)*g),v+=L1,t.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*g),v+=L1,t.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(v+Us)*l,h=Math.cos(v+Us)*(s?s/2-c:l),a=Math.sin(v+Us)*l,d=Math.sin(v+Us)*(s?s/2-c:l),t.arc(n-h,i-a,c,v-_e,v-Ze),t.arc(n+d,i-o,c,v-Ze,v),t.arc(n+h,i+a,c,v,v+Ze),t.arc(n-d,i+o,c,v+Ze,v+_e),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}v+=Us;case"rectRot":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":v+=Us;case"cross":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),v+=Us,h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(v)*g,a=Math.sin(v)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(v)*(s?s/2:g),i+Math.sin(v)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ci(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Sf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ef(t){t.restore()}function gB(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function mB(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function yB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),fe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function vB(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function wB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Or(t,e,n,i,s,r={}){const o=Re(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,yB(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&wB(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),fe(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),vB(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function ic(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*_e,_e,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,_e,Ze,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Ze,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-Ze,!0),t.lineTo(n+o.topLeft,i)}const _B=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bB(t,e){const n=(""+t).match(_B);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const SB=t=>+t||0;function h0(t,e){const n={},i=me(e),s=i?Object.keys(e):e,r=me(t)?i?o=>ne(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=SB(r(o));return n}function RC(t){return h0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mr(t){return h0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ht(t){const e=RC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ct(t,e){t=t||{},e=e||Be.font;let n=ne(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ne(t.style,e.style);i&&!(""+i).match(xB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ne(t.family,e.family),lineHeight:bB(ne(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ne(t.weight,e.weight),string:""};return s.string=fB(s),s}function ja(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Re(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function EB(t,e,n){const{min:i,max:s}=t,r=xC(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Bs(t,e){return Object.assign(Object.create(t),e)}function d0(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=FC("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>d0([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return NC(a,l,()=>PB(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return K1(a).includes(l)},ownKeys(a){return K1(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Go(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:OC(t,i),setContext:r=>Go(t,r,n,i),override:r=>Go(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return NC(r,o,()=>IB(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function OC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Ps(n)?n:()=>n,isIndexable:Ps(i)?i:()=>i}}const kB=(t,e)=>t?t+o0(e):e,f0=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function NC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function IB(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Ps(a)&&o.isScriptable(e)&&(a=TB(e,a,t,n)),Re(a)&&a.length&&(a=CB(e,a,t,o.isIndexable)),f0(e,a)&&(a=Go(a,s,r&&r[e],o)),a}function TB(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),f0(t,l)&&(l=p0(s._scopes,s,t,l)),l}function CB(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(me(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=p0(c,s,t,u);e.push(Go(h,r,o&&o[t],a))}}return e}function LC(t,e,n){return Ps(t)?t(e,n):t}const DB=(t,e)=>t===!0?e:typeof t=="string"?Ms(e,t):void 0;function AB(t,e,n,i,s){for(const r of e){const o=DB(n,r);if(o){t.add(o);const a=LC(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function p0(t,e,n,i){const s=e._rootScopes,r=LC(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=W1(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=W1(a,o,r,l,i),l===null)?!1:d0(Array.from(a),[""],s,r,()=>MB(e,n,i))}function W1(t,e,n,i,s){for(;n;)n=AB(t,e,n,i,s);return n}function MB(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Re(s)&&me(n)?n:s||{}}function PB(t,e,n,i){let s;for(const r of e)if(s=FC(kB(r,t),n),typeof s<"u")return f0(t,s)?p0(n,i,t,s):s}function FC(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function K1(t){let e=t._keys;return e||(e=t._keys=RB(t._scopes)),e}function RB(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function $C(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(Ms(u,r),c)};return o}const OB=Number.EPSILON||1e-14,Yo=(t,e)=>e<t.length&&!t[e].skip&&t[e],VC=t=>t==="x"?"y":"x";function NB(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=bm(r,s),l=bm(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function LB(t,e,n){const i=t.length;let s,r,o,a,l,c=Yo(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Yo(t,u+1),!(!l||!c)){if(cl(e[u],0,OB)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function FB(t,e,n="x"){const i=VC(n),s=t.length;let r,o,a,l=Yo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Yo(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}function $B(t,e="x"){const n=VC(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=Yo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Yo(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?ai(s[o-1])!==ai(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}LB(t,s,r),FB(t,r,e)}function bu(t,e,n){return Math.max(Math.min(t,n),e)}function VB(t,e){let n,i,s,r,o,a=Ci(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&Ci(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=bu(s.cp1x,e.left,e.right),s.cp1y=bu(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=bu(s.cp2x,e.left,e.right),s.cp2y=bu(s.cp2y,e.top,e.bottom)))}function zB(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")$B(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=NB(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&VB(t,n)}function g0(){return typeof window<"u"&&typeof document<"u"}function m0(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function fd(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const kf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function BB(t,e){return kf(t).getPropertyValue(e)}const jB=["top","right","bottom","left"];function yr(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=jB[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const UB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function HB(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(UB(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Js(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=kf(n),r=s.boxSizing==="border-box",o=yr(s,"padding"),a=yr(s,"border","width"),{x:l,y:c,box:u}=HB(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function WB(t,e,n){let i,s;if(e===void 0||n===void 0){const r=t&&m0(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=kf(r),l=yr(a,"border","width"),c=yr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=fd(a.maxWidth,r,"clientWidth"),s=fd(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||hd,maxHeight:s||hd}}const Su=t=>Math.round(t*10)/10;function KB(t,e,n,i){const s=kf(t),r=yr(s,"margin"),o=fd(s.maxWidth,t,"clientWidth")||hd,a=fd(s.maxHeight,t,"clientHeight")||hd,l=WB(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=yr(s,"border","width"),f=yr(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Su(Math.min(c,o,l.maxWidth)),u=Su(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Su(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Su(Math.floor(u*i))),{width:c,height:u}}function q1(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const qB=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};g0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function G1(t,e){const n=BB(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Zs(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function GB(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function YB(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Zs(t,s,n),a=Zs(s,r,n),l=Zs(r,e,n),c=Zs(o,a,n),u=Zs(a,l,n);return Zs(c,u,n)}const QB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},XB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function To(t,e,n){return t?QB(e,n):XB()}function zC(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function BC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function jC(t){return t==="angle"?{between:nc,compare:Jz,normalize:Nt}:{between:Ii,compare:(e,n)=>e-n,normalize:e=>e}}function Y1({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function JB(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=jC(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function UC(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=jC(i),{start:u,end:h,loop:d,style:f}=JB(t,e,n),p=[];let g=!1,v=null,m,y,w;const b=()=>l(s,w,m)&&a(s,w)!==0,S=()=>a(r,m)===0||l(r,w,m),I=()=>g||b(),k=()=>!g||S();for(let _=u,x=u;_<=h;++_)y=e[_%o],!y.skip&&(m=c(y[i]),m!==w&&(g=l(m,s,r),v===null&&I()&&(v=a(m,s)===0?_:x),v!==null&&k()&&(p.push(Y1({start:v,end:_,loop:d,count:o,style:f})),v=null),x=_,w=m));return v!==null&&p.push(Y1({start:v,end:h,loop:d,count:o,style:f})),p}function HC(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=UC(i[s],t.points,e);r.length&&n.push(...r)}return n}function ZB(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function e4(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function t4(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=ZB(n,s,r,i);if(i===!0)return Q1(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Q1(t,e4(n,o,l,c),n,e)}function Q1(t,e,n,i){return!i||!i.setContext||!n?e:n4(t,e,n,i)}function n4(t,e,n,i){const s=t._chart.getContext(),r=X1(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,h=e[0].start,d=h;function f(p,g,v,m){const y=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=y;for(;n[g%l].skip;)g+=y;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:v,style:m}),u=m,h=g%l)}}for(const p of e){h=a?h:p.start;let g=n[h%l],v;for(d=h+1;d<=p.end;d++){const m=n[d%l];v=X1(i.setContext(Bs(s,{type:"segment",p0:g,p1:m,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),i4(v,u)&&f(h,d-1,p.loop,u),g=m,u=v}h<d-1&&f(h,d-1,p.loop,u)}return c}function X1(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function i4(t,e){if(!e)return!1;const n=[],i=function(s,r){return u0(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Eu(t,e,n){return t.options.clip?t[n]:e[n]}function s4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Eu(n,e,"left"),right:Eu(n,e,"right"),top:Eu(i,e,"top"),bottom:Eu(i,e,"bottom")}:e}function WC(t,e){const n=e._clip;if(n.disabled)return!1;const i=s4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class r4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=TC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var fi=new r4;const J1="transparent",o4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=j1(t||J1),s=i.valid&&j1(e||J1);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class a4{constructor(e,n,i,s){const r=n[i];s=ja([e.to,s,r,e.from]);const o=ja([e.from,r,s]);this._active=!0,this._fn=e.fn||o4[e.type||typeof o],this._easing=ul[e.easing]||ul.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ja([e.to,n,s,e.from]),this._from=ja([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class KC{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys(Be.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!me(r))return;const o={};for(const a of n)o[a]=r[a];(Re(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=c4(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&l4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new a4(d,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return fi.add(this._chart,i),!0}}function l4(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function c4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Z1(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function u4(t,e,n){if(n===!1)return!1;const i=Z1(t,n),s=Z1(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function h4(t){let e,n,i,s;return me(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function qC(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function ex(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Qe(c)&&(r||e===0||ai(e)===ai(c))&&(e+=c)}return!u&&!i.all?0:e}function d4(t,e){const{iScale:n,vScale:i}=e,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:t[u]};return a}function Ip(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function f4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function p4(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function g4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function tx(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function nx(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=f4(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:g,[c]:v}=p,m=p._stacks||(p._stacks={});d=m[c]=g4(s,u,g),d[a]=v,d._top=tx(d,o,!0,i.type),d._bottom=tx(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=v}}function Tp(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function m4(t,e){return Bs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function y4(t,e,n){return Bs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ia(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Cp=t=>t==="reset"||t==="none",ix=(t,e)=>e?t:Object.assign({},t),v4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qC(n,!0),values:null};class Vn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ip(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ia(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=ne(i.xAxisID,Tp(e,"x")),o=n.yAxisID=ne(i.yAxisID,Tp(e,"y")),a=n.rAxisID=ne(i.rAxisID,Tp(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&V1(this._data,this),e._stacked&&Ia(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(me(n)){const s=this._cachedMeta;this._data=d4(n,s)}else if(i!==n){if(i){V1(i,this);const s=this._cachedMeta;Ia(s),s._parsed=[]}n&&Object.isExtensible(n)&&nB(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Ip(n.vScale,n),n.stack!==i.stack&&(s=!0,Ia(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&(nx(this,n._parsed),n._stacked=Ip(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{Re(s[e])?d=this.parseArrayData(i,s,e,n):me(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&nx(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,h[d]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],c[u]={x:r.parse(Ms(f,a),d),y:o.parse(Ms(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:qC(s,!0),values:n._stacks[e.axis]._visualValues};return ex(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=ex(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=v4(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=p4(a);let d,f;function p(){f=s[d];const g=f[a.axis];return!Qe(f[e.axis])||u>g||h<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],Qe(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=h4(ne(this.options.clip,u4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=y4(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=m4(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&tc(i);if(a)return ix(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Be.elements[e]),p=()=>this.getContext(i,s,n),g=c.resolveNamedOptions(d,f,p,h);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(ix(g,l))),g}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new KC(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Cp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){Cp(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!Cp(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Ia(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}V(Vn,"defaults",{}),V(Vn,"datasetElementType",null),V(Vn,"dataElementType",null);function w4(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=IC(i.sort((s,r)=>s-r))}return t._cache.$bar}function _4(t){const e=t.iScale,n=w4(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(tc(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function x4(t,e,n,i){const s=n.barThickness;let r,o;return fe(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function b4(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function S4(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function GC(t,e,n,i){return Re(t)?S4(t,e,n,i):e[n.axis]=n.parse(t,i),e}function sx(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(GC(d,h,r,c));return l}function Dp(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function E4(t,e,n){return t!==0?ai(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function k4(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function I4(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=k4(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[rx(u,o,a,l)]=!0,s=c)),r[rx(s,o,a,l)]=!0,t.borderSkipped=r}function rx(t,e,n,i){return i?(t=T4(t,e,n),t=ox(t,n,e)):t=ox(t,e,n),t}function T4(t,e,n){return t===e?n:t===n?e:t}function ox(t,e,n){return t==="start"?e:t==="end"?n:t}function C4(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class dl extends Vn{parsePrimitiveData(e,n,i,s){return sx(e,n,i,s)}parseArrayData(e,n,i,s){return sx(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,g;for(d=i,f=i+s;d<f;++d)g=n[d],p={},p[r.axis]=r.parse(Ms(g,c),d),h.push(GC(Ms(g,u),p,o,d));return h}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=Dp(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s);for(let f=n;f<n+i;f++){const p=this.getParsed(f),g=r||fe(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),m=(p._stacks||{})[a.axis],y={horizontal:c,base:g.base,enableBorderRadius:!m||Dp(p._custom)||o===m._top||o===m._bottom,x:c?g.head:v.center,y:c?v.center:g.head,height:c?v.size:Math.abs(g.size),width:c?Math.abs(g.size):v.size};d&&(y.options=h||this.resolveDataElementOptions(f,e[f].active?"active":s));const w=y.options||e[f].options;I4(y,w,m,o),C4(y,w,u.ratio),this.updateElement(e[f],f,y,s)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(f=>f[i.axis]===l),d=h&&h[u.vScale.axis];if(fe(d)||isNaN(d))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[ne(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||_4(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=Dp(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,p,g;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&ai(h)!==ai(c.barEnd)&&(d=0),d+=h);const v=!fe(r)&&!u?r:d;let m=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+f):p=m,g=p-m,Math.abs(g)<o){g=E4(g,n,a)*o,h===a&&(m-=g/2);const y=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),b=Math.min(y,w),S=Math.max(y,w);m=Math.max(Math.min(m,S),b),p=m+g,i&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(p)-n.getValueForPixel(m))}if(m===n.getPixelForValue(a)){const y=ai(g)*n.getLineWidthForValue(a)/2;m+=y,g-=y}return{size:g,base:m,head:p,center:p+g/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=ne(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=r?this._getStackCount(e):n.stackCount,h=s.barThickness==="flex"?b4(e,n,s,u*c):x4(e,n,s,u*c),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(ne(d,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+f;a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}V(dl,"id","bar"),V(dl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),V(dl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class nh extends Vn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,s){const r=super.parsePrimitiveData(e,n,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,n,i,s){const r=super.parseArrayData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=ne(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,n,i,s){const r=super.parseObjectData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=ne(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=o.axis,h=a.axis;for(let d=n;d<n+i;d++){const f=e[d],p=!r&&this.getParsed(d),g={},v=g[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),m=g[h]=r?a.getBasePixel():a.getPixelForValue(p[h]);g.skip=isNaN(v)||isNaN(m),c&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":s),r&&(g.options.radius=0)),this.updateElement(f,d,g,s)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return n!=="active"&&(s.radius=0),s.radius+=ne(i&&i._custom,r),s}}V(nh,"id","bubble"),V(nh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),V(nh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function D4(t,e,n){let i=1,s=1,r=0,o=0;if(e<Ne){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(w,b,S)=>nc(w,a,l,!0)?1:Math.max(b,b*n,S,S*n),p=(w,b,S)=>nc(w,a,l,!0)?-1:Math.min(b,b*n,S,S*n),g=f(0,c,h),v=f(Ze,u,d),m=p(_e,c,h),y=p(_e+Ze,u,d);i=(g-m)/2,s=(v-y)/2,r=-(g+m)/2,o=-(v+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class ur extends Vn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(me(i[e])){const{key:l="value"}=this._parsing;r=c=>+Ms(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Nn(this.options.rotation-90)}_getCircumference(){return Nn(this.options.circumference)}_getRotationExtents(){let e=Ne,n=-Ne;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Bz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=D4(h,u,l),v=(i.width-o)/d,m=(i.height-o)/f,y=Math.max(Math.min(v,m)/2,0),w=xC(this.options.radius,y),b=Math.max(w*l,0),S=(w-b)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,s.total=this.calculateTotal(),this.outerRadius=w-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/Ne)}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(n,s);let m=this._getRotation(),y;for(y=0;y<n;++y)m+=this._circumference(y,r);for(y=n;y<n+i;++y){const w=this._circumference(y,r),b=e[y],S={x:u+this.offsetX,y:h+this.offsetY,startAngle:m,endAngle:m+w,circumference:w,outerRadius:p,innerRadius:f};v&&(S.options=g||this.resolveDataElementOptions(y,b.active?"active":s)),m+=w,this.updateElement(b,y,S,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,s;for(s=0;s<n.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ne*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Vc(n._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(ne(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}V(ur,"id","doughnut"),V(ur,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),V(ur,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),V(ur,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class ih extends Vn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=DC(n,s,o);this._drawStart=a,this._drawCount=l,AC(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,v=qo(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||s==="none",y=n+i,w=e.length;let b=n>0&&this.getParsed(n-1);for(let S=0;S<w;++S){const I=e[S],k=m?I:{};if(S<n||S>=y){k.skip=!0;continue}const _=this.getParsed(S),x=fe(_[f]),E=k[d]=o.getPixelForValue(_[d],S),M=k[f]=r||x?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[f],S);k.skip=isNaN(E)||isNaN(M)||x,k.stop=S>0&&Math.abs(_[d]-b[d])>v,g&&(k.parsed=_,k.raw=c.data[S]),h&&(k.options=u||this.resolveDataElementOptions(S,I.active?"active":s)),m||this.updateElement(I,S,k,s),b=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}V(ih,"id","line"),V(ih,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),V(ih,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class fl extends Vn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Vc(n._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,n,i,s){return $C.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*_e;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,s,g);for(p=n;p<n+i;p++){const v=e[p];let m=f,y=f+this._computeAngle(p,s,g),w=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=y,r&&(l.animateScale&&(w=0),l.animateRotate&&(m=y=d));const b={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:m,endAngle:y,options:this.resolveDataElementOptions(p,v.active?"active":s)};this.updateElement(v,p,b,s)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?Nn(this.resolveDataElementOptions(e,n).angle||i):0}}V(fl,"id","polarArea"),V(fl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),V(fl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class pd extends ur{}V(pd,"id","pie"),V(pd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class sh extends Vn{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,s){return $C.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta,i=n.dataset,s=n.data||[],r=n.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,d=o?r.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,s)}}}V(sh,"id","radar"),V(sh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),V(sh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class rh extends Vn{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:r,count:o}=DC(n,i,s);if(this._drawStart=r,this._drawCount=o,AC(n)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(u),d=this.includeOptions(s,h),f=o.axis,p=a.axis,{spanGaps:g,segment:v}=this.options,m=qo(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none";let w=n>0&&this.getParsed(n-1);for(let b=n;b<n+i;++b){const S=e[b],I=this.getParsed(b),k=y?S:{},_=fe(I[p]),x=k[f]=o.getPixelForValue(I[f],b),E=k[p]=r||_?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[p],b);k.skip=isNaN(x)||isNaN(E)||_,k.stop=b>0&&Math.abs(I[f]-w[f])>m,v&&(k.parsed=I,k.raw=c.data[b]),d&&(k.options=h||this.resolveDataElementOptions(b,S.active?"active":s)),y||this.updateElement(S,b,k,s),w=I}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}}V(rh,"id","scatter"),V(rh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),V(rh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var A4=Object.freeze({__proto__:null,BarController:dl,BubbleController:nh,DoughnutController:ur,LineController:ih,PieController:pd,PolarAreaController:fl,RadarController:sh,ScatterController:rh});function Ws(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class y0{constructor(e){V(this,"options");this.options=e||{}}static override(e){Object.assign(y0.prototype,e)}init(){}formats(){return Ws()}parse(){return Ws()}format(){return Ws()}add(){return Ws()}diff(){return Ws()}startOf(){return Ws()}endOf(){return Ws()}}var M4={_date:y0};function P4(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?eB:Ti;if(i){if(s._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const d=c(r,e,n-h),f=c(r,e,n+h);return{lo:d.lo,hi:f.hi}}}}else{const u=c(r,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:d}=t,f=d.slice(0,u.lo+1).reverse().findIndex(g=>!fe(g[h.axis]));u.lo-=Math.max(0,f);const p=d.slice(u.hi).findIndex(g=>!fe(g[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function zc(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=P4(r[a],e,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function R4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ap(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||zc(t,n,e,function(a,l,c){!s&&!Ci(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function O4(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=EC(o,{x:e.x,y:e.y});nc(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return zc(t,n,e,r),s}function N4(t,e,n,i,s,r){let o=[];const a=R4(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!f)return;const v=a(e,p);v<l?(o=[{element:u,datasetIndex:h,index:d}],l=v):v===l&&o.push({element:u,datasetIndex:h,index:d})}return zc(t,n,e,c),o}function Mp(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?O4(t,e,n,s):N4(t,e,n,i,s,r)}function ax(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return zc(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var L4={evaluateInteractionItems:zc,modes:{index(t,e,n,i){const s=Js(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Ap(t,s,r,i,o):Mp(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=Js(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Ap(t,s,r,i,o):Mp(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=Js(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Ap(t,s,r,i,o)},nearest(t,e,n,i){const s=Js(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Mp(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=Js(e,t);return ax(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=Js(e,t);return ax(t,s,"y",n.intersect,i)}}};const YC=["left","top","right","bottom"];function Ta(t,e){return t.filter(n=>n.pos===e)}function lx(t,e){return t.filter(n=>YC.indexOf(n.pos)===-1&&n.box.axis===e)}function Ca(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function F4(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function $4(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!YC.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function V4(t,e){const n=$4(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function z4(t){const e=F4(t),n=Ca(e.filter(c=>c.box.fullSize),!0),i=Ca(Ta(e,"left"),!0),s=Ca(Ta(e,"right")),r=Ca(Ta(e,"top"),!0),o=Ca(Ta(e,"bottom")),a=lx(e,"x"),l=lx(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ta(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function cx(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function QC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function B4(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!me(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&QC(o,r.getPadding());const a=Math.max(0,e.outerWidth-cx(o,t,"left","right")),l=Math.max(0,e.outerHeight-cx(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function j4(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function U4(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Ua(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,U4(a.horizontal,e));const{same:h,other:d}=B4(e,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&Ua(s,e,n,i)||u}function ku(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function ux(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;tc(c.start)&&(o=c.start),l.fullSize?ku(l,s.left,o,n.outerWidth-s.right-s.left,d):ku(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;tc(c.start)&&(r=c.start),l.fullSize?ku(l,r,s.top,d,n.outerHeight-s.bottom-s.top):ku(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var Vt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=Ht(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=z4(t.boxes),l=a.vertical,c=a.horizontal;Se(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);QC(d,Ht(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=V4(l.concat(c),h);Ua(a.fullSize,f,h,p),Ua(l,f,h,p),Ua(c,f,h,p)&&Ua(l,f,h,p),j4(f),ux(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,ux(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Se(a.chartArea,g=>{const v=g.box;Object.assign(v,t.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class XC{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class H4 extends XC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const oh="$chartjs",W4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hx=t=>t===null||t==="";function K4(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[oh]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hx(s)){const r=G1(t,"width");r!==void 0&&(t.width=r)}if(hx(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=G1(t,"height");r!==void 0&&(t.height=r)}return t}const JC=qB?{passive:!0}:!1;function q4(t,e,n){t&&t.addEventListener(e,n,JC)}function G4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,JC)}function Y4(t,e){const n=W4[t.type]||t.type,{x:i,y:s}=Js(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function gd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Q4(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||gd(a.addedNodes,i),o=o&&!gd(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function X4(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||gd(a.removedNodes,i),o=o&&!gd(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const sc=new Map;let dx=0;function ZC(){const t=window.devicePixelRatio;t!==dx&&(dx=t,sc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function J4(t,e){sc.size||window.addEventListener("resize",ZC),sc.set(t,e)}function Z4(t){sc.delete(t),sc.size||window.removeEventListener("resize",ZC)}function ej(t,e,n){const i=t.canvas,s=i&&m0(i);if(!s)return;const r=CC((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),J4(t,r),o}function Pp(t,e,n){n&&n.disconnect(),e==="resize"&&Z4(t)}function tj(t,e,n){const i=t.canvas,s=CC(r=>{t.ctx!==null&&n(Y4(r,t))},t);return q4(i,e,s),s}class nj extends XC{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(K4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[oh])return!1;const i=n[oh].initial;["height","width"].forEach(r=>{const o=i[r];fe(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[oh],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:Q4,detach:X4,resize:ej}[n]||tj;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:Pp,detach:Pp,resize:Pp}[n]||G4)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return KB(e,n,i,s)}isAttached(e){const n=e&&m0(e);return!!(n&&n.isConnected)}}function ij(t){return!g0()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?H4:nj}class Un{constructor(){V(this,"x");V(this,"y");V(this,"active",!1);V(this,"options");V(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return qo(this.x)&&qo(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}V(Un,"defaults",{}),V(Un,"defaultRoutes");function sj(t,e){const n=t.options.ticks,i=rj(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?aj(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return lj(e,c,r,o/s),c;const u=oj(r,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Iu(e,c,u,fe(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Iu(e,c,u,r[h],r[h+1]);return Iu(e,c,u,l,fe(f)?e.length:l+f),c}return Iu(e,c,u),c}function rj(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function oj(t,e,n){const i=cj(t),s=e.length/n;if(!i)return Math.max(s,1);const r=Yz(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function aj(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function lj(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function Iu(t,e,n,i,s){const r=ne(i,0),o=Math.min(ne(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function cj(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const uj=t=>t==="left"?"right":t==="right"?"left":t,fx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,px=(t,e)=>Math.min(e||t,t);function gx(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function hj(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function dj(t,e){Se(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Da(t){return t.drawTicks?t.tickLength:0}function mx(t,e){if(!t.display)return 0;const n=ct(t.font,e),i=Ht(t.padding);return(Re(t.text)?t.text.length:1)*n.lineHeight+i.height}function fj(t,e){return Bs(t,{scale:e,type:"scale"})}function pj(t,e,n){return Bs(t,{tick:n,index:e,type:"tick"})}function gj(t,e,n){let i=c0(t);return(n&&e!=="right"||!n&&e==="right")&&(i=uj(i)),i}function mj(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const g=o-s,v=a-r;if(t.isHorizontal()){if(f=Ot(i,r,a),me(n)){const m=Object.keys(n)[0],y=n[m];p=u[m].getPixelForValue(y)+g-e}else n==="center"?p=(c.bottom+c.top)/2+g-e:p=fx(t,n,e);d=a-r}else{if(me(n)){const m=Object.keys(n)[0],y=n[m];f=u[m].getPixelForValue(y)-v+e}else n==="center"?f=(c.left+c.right)/2-v+e:f=fx(t,n,e);p=Ot(i,o,s),h=n==="left"?-Ze:Ze}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class jr extends Un{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=hn(e,Number.POSITIVE_INFINITY),n=hn(n,Number.NEGATIVE_INFINITY),i=hn(i,Number.POSITIVE_INFINITY),s=hn(s,Number.NEGATIVE_INFINITY),{min:hn(e,i),max:hn(n,s),minDefined:Qe(e),maxDefined:Qe(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:hn(n,hn(i,n)),max:hn(i,hn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){De(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=EB(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?gx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){De(this.options.afterUpdate,[this])}beforeSetDimensions(){De(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){De(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),De(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){De(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=De(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){De(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){De(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=px(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=mt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Da(e.grid)-n.padding-mx(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=a0(Math.min(Math.asin(mt((u.highest.height+6)/a,-1,1)),Math.asin(mt(l/c,-1,1))-Math.asin(mt(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){De(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){De(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=mx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Da(r)+l):(e.height=this.maxHeight,e.width=Da(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Nn(this.labelRotation),g=Math.cos(p),v=Math.sin(p);if(a){const m=i.mirror?0:v*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+m+f)}else{const m=i.mirror?0:g*h.width+v*d.height;e.width=Math.min(this.maxWidth,e.width+m+f)}this._calculatePadding(c,u,v,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*n.height):(d=i*e.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){De(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)fe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=gx(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/px(n,i));let c=0,u=0,h,d,f,p,g,v,m,y,w,b,S;for(h=0;h<n;h+=l){if(p=e[h].label,g=this._resolveTickFontOptions(h),s.font=v=g.string,m=r[v]=r[v]||{data:{},gc:[]},y=g.lineHeight,w=b=0,!fe(p)&&!Re(p))w=dd(s,m.data,m.gc,w,p),b=y;else if(Re(p))for(d=0,f=p.length;d<f;++d)S=p[d],!fe(S)&&!Re(S)&&(w=dd(s,m.data,m.gc,w,S),b+=y);o.push(w),a.push(b),c=Math.max(w,c),u=Math.max(b,u)}dj(r,n);const I=o.indexOf(c),k=a.indexOf(u),_=x=>({width:o[x]||0,height:a[x]||0});return{first:_(0),last:_(n-1),widest:_(I),highest:_(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Zz(this._alignToPixels?Hs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=pj(this.getContext(),e,i))}return this.$context||(this.$context=fj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Nn(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Da(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,v=g/2,m=function(ie){return Hs(i,ie,g)};let y,w,b,S,I,k,_,x,E,M,O,K;if(o==="top")y=m(this.bottom),k=this.bottom-d,x=y-v,M=m(e.top)+v,K=e.bottom;else if(o==="bottom")y=m(this.top),M=e.top,K=m(e.bottom)-v,k=y+v,x=this.top+d;else if(o==="left")y=m(this.right),I=this.right-d,_=y-v,E=m(e.left)+v,O=e.right;else if(o==="right")y=m(this.left),E=e.left,O=m(e.right)-v,I=y+v,_=this.left+d;else if(n==="x"){if(o==="center")y=m((e.top+e.bottom)/2+.5);else if(me(o)){const ie=Object.keys(o)[0],q=o[ie];y=m(this.chart.scales[ie].getPixelForValue(q))}M=e.top,K=e.bottom,k=y+v,x=k+d}else if(n==="y"){if(o==="center")y=m((e.left+e.right)/2);else if(me(o)){const ie=Object.keys(o)[0],q=o[ie];y=m(this.chart.scales[ie].getPixelForValue(q))}I=y-v,_=I-d,E=e.left,O=e.right}const ce=ne(s.ticks.maxTicksLimit,h),J=Math.max(1,Math.ceil(h/ce));for(w=0;w<h;w+=J){const ie=this.getContext(w),q=r.setContext(ie),N=a.setContext(ie),R=q.lineWidth,H=q.color,U=N.dash||[],C=N.dashOffset,$=q.tickWidth,X=q.tickColor,le=q.tickBorderDash||[],ue=q.tickBorderDashOffset;b=hj(this,w,l),b!==void 0&&(S=Hs(i,b,R),c?I=_=E=O=S:k=x=M=K=S,f.push({tx1:I,ty1:k,tx2:_,ty2:x,x1:E,y1:M,x2:O,y2:K,width:R,color:H,borderDash:U,borderDashOffset:C,tickWidth:$,tickColor:X,tickBorderDash:le,tickBorderDashOffset:ue}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Da(i.grid),f=d+u,p=h?-u:f,g=-Nn(this.labelRotation),v=[];let m,y,w,b,S,I,k,_,x,E,M,O,K="middle";if(s==="top")I=this.bottom-p,k=this._getXAxisLabelAlignment();else if(s==="bottom")I=this.top+p,k=this._getXAxisLabelAlignment();else if(s==="left"){const J=this._getYAxisLabelAlignment(d);k=J.textAlign,S=J.x}else if(s==="right"){const J=this._getYAxisLabelAlignment(d);k=J.textAlign,S=J.x}else if(n==="x"){if(s==="center")I=(e.top+e.bottom)/2+f;else if(me(s)){const J=Object.keys(s)[0],ie=s[J];I=this.chart.scales[J].getPixelForValue(ie)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")S=(e.left+e.right)/2-f;else if(me(s)){const J=Object.keys(s)[0],ie=s[J];S=this.chart.scales[J].getPixelForValue(ie)}k=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const ce=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){w=a[m],b=w.label;const J=r.setContext(this.getContext(m));_=this.getPixelForTick(m)+r.labelOffset,x=this._resolveTickFontOptions(m),E=x.lineHeight,M=Re(b)?b.length:1;const ie=M/2,q=J.color,N=J.textStrokeColor,R=J.textStrokeWidth;let H=k;o?(S=_,k==="inner"&&(m===y-1?H=this.options.reverse?"left":"right":m===0?H=this.options.reverse?"right":"left":H="center"),s==="top"?c==="near"||g!==0?O=-M*E+E/2:c==="center"?O=-ce.highest.height/2-ie*E+E:O=-ce.highest.height+E/2:c==="near"||g!==0?O=E/2:c==="center"?O=ce.highest.height/2-ie*E:O=ce.highest.height-M*E,h&&(O*=-1),g!==0&&!J.showLabelBackdrop&&(S+=E/2*Math.sin(g))):(I=_,O=(1-M)*E/2);let U;if(J.showLabelBackdrop){const C=Ht(J.backdropPadding),$=ce.heights[m],X=ce.widths[m];let le=O-C.top,ue=0-C.left;switch(K){case"middle":le-=$/2;break;case"bottom":le-=$;break}switch(k){case"center":ue-=X/2;break;case"right":ue-=X;break;case"inner":m===y-1?ue-=X:m>0&&(ue-=X/2);break}U={left:ue,top:le,width:X+C.width,height:$+C.height,color:J.backdropColor}}v.push({label:b,font:x,textOffset:O,options:{rotation:g,color:q,strokeColor:N,strokeWidth:R,textAlign:H,textBaseline:K,translation:[S,I],backdrop:U}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Nn(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Hs(e,this.left,o)-o/2,u=Hs(e,this.right,a)+a/2,h=d=l):(h=Hs(e,this.top,o)-o/2,d=Hs(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Sf(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Or(i,c,0,u,l,a)}s&&Ef(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=ct(i.font),o=Ht(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,Re(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=mj(this,l,n,a);Or(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:gj(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ne(e.grid&&e.grid.z,-1),s=ne(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==jr.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ct(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Tu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;wj(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,yj(e,o,i),this.override&&Be.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in Be[s]&&(delete Be[s][i],this.override&&delete Rr[i])}}function yj(t,e,n){const i=ec(Object.create(null),[n?Be.get(n):{},Be.get(e),t.defaults]);Be.set(e,i),t.defaultRoutes&&vj(e,t.defaultRoutes),t.descriptors&&Be.describe(e,t.descriptors)}function vj(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Be.route(r,s,l,a)})}function wj(t){return"id"in t&&"defaults"in t}class _j{constructor(){this.controllers=new Tu(Vn,"datasets",!0),this.elements=new Tu(Un,"elements"),this.plugins=new Tu(Object,"plugins"),this.scales=new Tu(jr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):Se(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=o0(e);De(i["before"+s],[],i),n[e](i),De(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Qn=new _j;class xj{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(De(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=ne(i.options&&i.options.plugins,{}),r=bj(i);return s===!1&&!n?[]:Ej(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function bj(t){const e={},n=[],i=Object.keys(Qn.plugins.items);for(let r=0;r<i.length;r++)n.push(Qn.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Sj(t,e){return!e&&t===!1?null:t===!0?{}:t}function Ej(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=Sj(i[l],s);c!==null&&r.push({plugin:a,options:kj(t.config,{plugin:a,local:n[l]},c,o)})}return r}function kj(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function km(t,e){const n=Be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Ij(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Tj(t,e){return t===e?"_index_":"_value_"}function yx(t){if(t==="x"||t==="y"||t==="r")return t}function Cj(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Im(t,...e){if(yx(t))return t;for(const n of e){const i=n.axis||Cj(n.position)||t.length>1&&yx(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Dj(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return vx(t,"x",n[0])||vx(t,"y",n[0])}return{}}function Aj(t,e){const n=Rr[t.type]||{scales:{}},i=e.scales||{},s=km(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Im(o,a,Dj(o,t),Be.scales[a.type]),c=Tj(l,s),u=n.scales||{};r[o]=ll(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||km(a,e),u=(Rr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=Ij(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),ll(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];ll(a,[Be.scales[a.type],Be.scale])}),r}function eD(t){const e=t.options||(t.options={});e.plugins=ne(e.plugins,{}),e.scales=Aj(t,e)}function tD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Mj(t){return t=t||{},t.data=tD(t.data),eD(t),t}const wx=new Map,nD=new Set;function Cu(t,e){let n=wx.get(t);return n||(n=e(),wx.set(t,n),nD.add(n)),n}const Aa=(t,e,n)=>{const i=Ms(e,n);i!==void 0&&t.add(i)};class Pj{constructor(e){this._config=Mj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Cu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Cu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Cu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Cu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Aa(l,e,h))),u.forEach(h=>Aa(l,s,h)),u.forEach(h=>Aa(l,Rr[r]||{},h)),u.forEach(h=>Aa(l,Be,h)),u.forEach(h=>Aa(l,Sm,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Rr[n]||{},Be.datasets[n]||{},{type:n},Be,Sm]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=_x(this._resolverCache,e,s);let l=o;if(Oj(o,n)){r.$shared=!1,i=Ps(i)?i():i;const c=this.createResolver(e,i,a);l=Go(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=_x(this._resolverCache,e,i);return me(n)?Go(r,n,void 0,s):r}}function _x(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:d0(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const Rj=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>Ps(t[e]));function Oj(t,e){const{isScriptable:n,isIndexable:i}=OC(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Ps(a)||Rj(a))||o&&Re(a))return!0}return!1}var Nj="4.5.0";const Lj=["top","bottom","left","right","chartArea"];function xx(t,e){return t==="top"||t==="bottom"||Lj.indexOf(t)===-1&&e==="x"}function bx(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Sx(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),De(n&&n.onComplete,[t],e)}function Fj(t){const e=t.chart,n=e.options.animation;De(n&&n.onProgress,[t],e)}function iD(t){return g0()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ah={},Ex=t=>{const e=iD(t);return Object.values(ah).filter(n=>n.canvas===e).pop()};function $j(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function Vj(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var qi;let If=(qi=class{static register(...e){Qn.add(...e),kx()}static unregister(...e){Qn.remove(...e),kx()}constructor(e,n){const i=this.config=new Pj(n),s=iD(e),r=Ex(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||ij(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=zz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=iB(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ah[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}fi.listen(this,"complete",Sx),fi.listen(this,"progress",Fj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return fe(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():q1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H1(this.canvas,this.ctx),this}stop(){return fi.stop(this),this}resize(e,n){fi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,q1(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),De(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Se(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Im(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Se(r,o=>{const a=o.options,l=a.id,c=Im(l,a),u=ne(a.type,o.dtype);(a.position===void 0||xx(a.position,c)!==xx(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Qn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Se(s,(o,a)=>{o||delete i[a]}),Se(i,o=>{Vt.configure(this,o,o.options),Vt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(bx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||km(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Qn.getController(a),{datasetElementType:c,dataElementType:u}=Be.datasets[a];Object.assign(l,{dataElementType:Qn.getElement(u),datasetElementType:c&&Qn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Se(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(bx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Se(this.scales,e=>{Vt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!N1(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;$j(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!N1(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Se(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ps(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fi.has(this)?this.attached&&!fi.running(this)&&fi.start(this):(this.draw(),Sx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=WC(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Sf(n,s),e.controller.draw(),s&&Ef(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Ci(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=L4.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Bs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);tc(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),fi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H1(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ah[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Se(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Se(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Se(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!cd(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=Kz(e),c=Vj(e,this._lastEvent,i,l);i&&(this._lastEvent=null,De(r.onHover,[e,a,this],this),l&&De(r.onClick,[e,a,this],this));const u=!cd(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},V(qi,"defaults",Be),V(qi,"instances",ah),V(qi,"overrides",Rr),V(qi,"registry",Qn),V(qi,"version",Nj),V(qi,"getChart",Ex),qi);function kx(){return Se(If.instances,t=>t._plugins.invalidate())}function zj(t,e,n){const{startAngle:i,x:s,y:r,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,Nt(i-n));if(t.beginPath(),t.arc(s,r,o-c/2,i+h/2,n-h/2),a>0){const d=Math.min(c/a,Nt(i-n));t.arc(s,r,a+c/2,n-d/2,i+d/2,!0)}else{const d=Math.min(c/2,o*Nt(i-n));if(u==="round")t.arc(s,r,d,n-_e/2,i+_e/2,!0);else if(u==="bevel"){const f=2*d*d,p=-f*Math.cos(n+_e/2)+s,g=-f*Math.sin(n+_e/2)+r,v=f*Math.cos(i+_e/2)+s,m=f*Math.sin(i+_e/2)+r;t.lineTo(p,g),t.lineTo(v,m)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function Bj(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(r,o,a,i-c,n+c),l>s?(c=s/l,t.arc(r,o,l,n+c,i-c,!0)):t.arc(r,o,s,n+Ze,i-Ze),t.closePath(),t.clip()}function jj(t){return h0(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Uj(t,e,n,i){const s=jj(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(n-Math.min(r,l))*i/2;return mt(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:mt(s.innerStart,0,o),innerEnd:mt(s.innerEnd,0,o)}}function Qr(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function md(t,e,n,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=s-l;if(i){const J=u>0?u-i:0,ie=h>0?h-i:0,q=(J+ie)/2,N=q!==0?p*q/(q+i):p;f=(p-N)/2}const g=Math.max(.001,p*h-n/_e)/h,v=(p-g)/2,m=l+v+f,y=s-v-f,{outerStart:w,outerEnd:b,innerStart:S,innerEnd:I}=Uj(e,d,h,y-m),k=h-w,_=h-b,x=m+w/k,E=y-b/_,M=d+S,O=d+I,K=m+S/M,ce=y-I/O;if(t.beginPath(),r){const J=(x+E)/2;if(t.arc(o,a,h,x,J),t.arc(o,a,h,J,E),b>0){const R=Qr(_,E,o,a);t.arc(R.x,R.y,b,E,y+Ze)}const ie=Qr(O,y,o,a);if(t.lineTo(ie.x,ie.y),I>0){const R=Qr(O,ce,o,a);t.arc(R.x,R.y,I,y+Ze,ce+Math.PI)}const q=(y-I/d+(m+S/d))/2;if(t.arc(o,a,d,y-I/d,q,!0),t.arc(o,a,d,q,m+S/d,!0),S>0){const R=Qr(M,K,o,a);t.arc(R.x,R.y,S,K+Math.PI,m-Ze)}const N=Qr(k,m,o,a);if(t.lineTo(N.x,N.y),w>0){const R=Qr(k,x,o,a);t.arc(R.x,R.y,w,m-Ze,x)}}else{t.moveTo(o,a);const J=Math.cos(x)*h+o,ie=Math.sin(x)*h+a;t.lineTo(J,ie);const q=Math.cos(E)*h+o,N=Math.sin(E)*h+a;t.lineTo(q,N)}t.closePath()}function Hj(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){md(t,e,n,i,l,s);for(let c=0;c<r;++c)t.fill();isNaN(a)||(l=o+(a%Ne||Ne))}return md(t,e,n,i,l,s),t.fill(),l}function Wj(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(r){md(t,e,n,i,g,s);for(let v=0;v<r;++v)t.stroke();isNaN(a)||(g=o+(a%Ne||Ne))}p&&Bj(t,e,g),l.selfJoin&&g-o>=_e&&f===0&&u!=="miter"&&zj(t,e,g),r||(md(t,e,n,i,g,s),t.stroke())}class Ha extends Un{constructor(n){super();V(this,"circumference");V(this,"endAngle");V(this,"fullCircles");V(this,"innerRadius");V(this,"outerRadius");V(this,"pixelMargin");V(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=EC(r,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,p=ne(d,c-l),g=nc(o,l,c)&&l!==c,v=p>=Ne||g,m=Ii(a,u+f,h+f);return v&&m}getCenterPoint(n){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(r+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Ne?Math.floor(s/Ne):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(_e,s||0)),u=r*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,Hj(n,this,u,o,a),Wj(n,this,u,o,a),n.restore()}}V(Ha,"id","arc"),V(Ha,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),V(Ha,"defaultRoutes",{backgroundColor:"backgroundColor"}),V(Ha,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function sD(t,e,n=e){t.lineCap=ne(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ne(n.borderDash,e.borderDash)),t.lineDashOffset=ne(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ne(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ne(n.borderWidth,e.borderWidth),t.strokeStyle=ne(n.borderColor,e.borderColor)}function Kj(t,e,n){t.lineTo(n.x,n.y)}function qj(t){return t.stepped?gB:t.tension||t.cubicInterpolationMode==="monotone"?mB:Kj}function rD(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Gj(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=rD(s,n,i),u=qj(r);let{move:h=!0,reverse:d}=i||{},f,p,g;for(f=0;f<=c;++f)p=s[(a+(d?c-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,g,p,d,r.stepped),g=p);return l&&(p=s[(a+(d?c:0))%o],u(t,g,p,d,r.stepped)),!!l}function Yj(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=rD(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,p,g,v,m;const y=b=>(o+(c?a-b:b))%r,w=()=>{g!==v&&(t.lineTo(u,v),t.lineTo(u,g),t.lineTo(u,m))};for(l&&(f=s[y(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[y(d)],f.skip)continue;const b=f.x,S=f.y,I=b|0;I===p?(S<g?g=S:S>v&&(v=S),u=(h*u+b)/++h):(w(),t.lineTo(b,S),p=I,h=0,g=v=S),m=S}w()}function Tm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Yj:Gj}function Qj(t){return t.stepped?GB:t.tension||t.cubicInterpolationMode==="monotone"?YB:Zs}function Xj(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),sD(t,e.options),t.stroke(s)}function Jj(t,e,n,i){const{segments:s,options:r}=e,o=Tm(e);for(const a of s)sD(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const Zj=typeof Path2D=="function";function eU(t,e,n,i){Zj&&!e.options.segment?Xj(t,e,n,i):Jj(t,e,n,i)}class ls extends Un{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;zB(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=t4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=HC(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=Qj(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],p=r[d];if(f===p){a.push(f);continue}const g=Math.abs((s-f[n])/(p[n]-f[n])),v=l(f,p,g,i.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Tm(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=Tm(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),eU(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}V(ls,"id","line"),V(ls,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),V(ls,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),V(ls,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ix(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class lh extends Un{constructor(n){super();V(this,"parsed");V(this,"skip");V(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return Ix(this,n,"x",i)}inYRange(n,i){return Ix(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!Ci(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Em(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}V(lh,"id","point"),V(lh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),V(lh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function oD(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-h,u=i+h):(h=r/2,a=n-h,l=n+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function cs(t,e,n,i){return t?0:mt(e,n,i)}function tU(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=RC(i);return{t:cs(s.top,r.top,0,n),r:cs(s.right,r.right,0,e),b:cs(s.bottom,r.bottom,0,n),l:cs(s.left,r.left,0,e)}}function nU(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=mr(s),o=Math.min(e,n),a=t.borderSkipped,l=i||me(s);return{topLeft:cs(!l||a.top||a.left,r.topLeft,0,o),topRight:cs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:cs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:cs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function iU(t){const e=oD(t),n=e.right-e.left,i=e.bottom-e.top,s=tU(t,n/2,i/2),r=nU(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Rp(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&oD(t,i);return a&&(s||Ii(e,a.left,a.right))&&(r||Ii(n,a.top,a.bottom))}function sU(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function rU(t,e){t.rect(e.x,e.y,e.w,e.h)}function Op(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class ch extends Un{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=iU(this),a=sU(o.radius)?ic:rU;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Op(o,n,r)),e.clip(),a(e,Op(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Op(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return Rp(this,e,n,i)}inXRange(e,n){return Rp(this,e,null,n)}inYRange(e,n){return Rp(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}V(ch,"id","bar"),V(ch,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),V(ch,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var oU=Object.freeze({__proto__:null,ArcElement:Ha,BarElement:ch,LineElement:ls,PointElement:lh});const Cm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Tx=Cm.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function aD(t){return Cm[t%Cm.length]}function lD(t){return Tx[t%Tx.length]}function aU(t,e){return t.borderColor=aD(e),t.backgroundColor=lD(e),++e}function lU(t,e){return t.backgroundColor=t.data.map(()=>aD(e++)),e}function cU(t,e){return t.backgroundColor=t.data.map(()=>lD(e++)),e}function uU(t){let e=0;return(n,i)=>{const s=t.getDatasetMeta(i).controller;s instanceof ur?e=lU(n,e):s instanceof fl?e=cU(n,e):s&&(e=aU(n,e))}}function Cx(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function hU(t){return t&&(t.borderColor||t.backgroundColor)}function dU(){return Be.borderColor!=="rgba(0,0,0,0.1)"||Be.backgroundColor!=="rgba(0,0,0,0.1)"}var fU={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:s}=t.config,{elements:r}=s,o=Cx(i)||hU(s)||r&&Cx(r)||dU();if(!n.forceOverride&&o)return;const a=uU(t);i.forEach(a)}};function pU(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let l=0;const c=e+n-1;let u=e,h,d,f,p,g;for(o[l++]=t[u],h=0;h<r-2;h++){let v=0,m=0,y;const w=Math.floor((h+1)*a)+1+e,b=Math.min(Math.floor((h+2)*a)+1,n)+e,S=b-w;for(y=w;y<b;y++)v+=t[y].x,m+=t[y].y;v/=S,m/=S;const I=Math.floor(h*a)+1+e,k=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:_,y:x}=t[u];for(f=p=-1,y=I;y<k;y++)p=.5*Math.abs((_-v)*(t[y].y-x)-(_-t[y].x)*(m-x)),p>f&&(f=p,d=t[y],g=y);o[l++]=d,u=g}return o[l++]=t[c],o}function gU(t,e,n,i){let s=0,r=0,o,a,l,c,u,h,d,f,p,g;const v=[],m=e+n-1,y=t[e].x,b=t[m].x-y;for(o=e;o<e+n;++o){a=t[o],l=(a.x-y)/b*i,c=a.y;const S=l|0;if(S===u)c<p?(p=c,h=o):c>g&&(g=c,d=o),s=(r*s+a.x)/++r;else{const I=o-1;if(!fe(h)&&!fe(d)){const k=Math.min(h,d),_=Math.max(h,d);k!==f&&k!==I&&v.push({...t[k],x:s}),_!==f&&_!==I&&v.push({...t[_],x:s})}o>0&&I!==f&&v.push(t[I]),v.push(a),u=S,r=0,p=g=c,h=d=f=o}}return v}function cD(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Dx(t){t.data.datasets.forEach(e=>{cD(e)})}function mU(t,e){const n=e.length;let i=0,s;const{iScale:r}=t,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=mt(Ti(e,r.axis,o).lo,0,n-1)),c?s=mt(Ti(e,r.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var yU={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Dx(t);return}const i=t.width;t.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=t.getDatasetMeta(r),c=o||s.data;if(ja([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=mU(l,c);const f=n.threshold||4*i;if(d<=f){cD(s);return}fe(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=pU(c,h,d,i,n);break;case"min-max":p=gU(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=p})},destroy(t){Dx(t)}};function vU(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Tf(l,c,s);const u=Dm(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=HC(e,u);for(const d of h){const f=Dm(n,r[d.start],r[d.end],d.loop),p=UC(a,s,f);for(const g of p)o.push({source:g,target:d,start:{[n]:Ax(u,f,"start",Math.max)},end:{[n]:Ax(u,f,"end",Math.min)}})}}return o}function Dm(t,e,n,i){if(i)return;let s=e[t],r=n[t];return t==="angle"&&(s=Nt(s),r=Nt(r)),{property:t,start:s,end:r}}function wU(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Tf(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function Tf(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Ax(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function uD(t,e){let n=[],i=!1;return Re(t)?(i=!0,n=t):n=wU(t,e),n.length?new ls({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Mx(t){return t&&t.fill!==!1}function _U(t,e,n){let s=t[e].fill;const r=[e];let o;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Qe(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function xU(t,e,n){const i=kU(t);if(me(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Qe(s)&&Math.floor(s)===s?bU(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function bU(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function SU(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:me(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function EU(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:me(t)?i=t.value:i=e.getBaseValue(),i}function kU(t){const e=t.options,n=e.fill;let i=ne(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function IU(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=TU(e,n);a.push(uD({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)CU(s,o[u],a)}return new ls({points:s,options:{}})}function TU(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function CU(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:l}=DU(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function DU(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],h=o[u.start][n],d=o[u.end][n];if(Ii(s,h,d)){a=s===h,l=s===d;break}}return{first:a,last:l,point:i}}class hD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:s,y:r,radius:o}=this;return n=n||{start:0,end:Ne},e.arc(s,r,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:s}=this,r=e.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function AU(t){const{chart:e,fill:n,line:i}=t;if(Qe(n))return MU(e,n);if(n==="stack")return IU(t);if(n==="shape")return!0;const s=PU(t);return s instanceof hD?s:uD(s,i)}function MU(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function PU(t){return(t.scale||{}).getPointPositionForValue?OU(t):RU(t)}function RU(t){const{scale:e={},fill:n}=t,i=SU(n,e);if(Qe(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function OU(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=EU(n,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new hD({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Np(t,e,n){const i=AU(e),{chart:s,index:r,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:d=h,below:f=h}=u||{},p=s.getDatasetMeta(r),g=WC(s,p);i&&o.points.length&&(Sf(t,n),NU(t,{line:o,target:i,above:d,below:f,area:n,scale:a,axis:l,clip:g}),Ef(t))}function NU(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=r;r!==s&&(c==="x"?(Px(t,i,o.top),Lp(t,{line:n,target:i,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Px(t,i,o.bottom)):c==="y"&&(Rx(t,i,o.left),Lp(t,{line:n,target:i,color:r,scale:a,property:c,clip:l}),t.restore(),t.save(),Rx(t,i,o.right),u=s)),Lp(t,{line:n,target:i,color:u,scale:a,property:c,clip:l}),t.restore()}function Px(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],h=s[Tf(l,c,s)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Rx(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],h=s[Tf(l,c,s)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Lp(t,e){const{line:n,target:i,property:s,color:r,scale:o,clip:a}=e,l=vU(n,i,s);for(const{source:c,target:u,start:h,end:d}of l){const{style:{backgroundColor:f=r}={}}=c,p=i!==!0;t.save(),t.fillStyle=f,LU(t,o,a,p&&Dm(s,h,d)),t.beginPath();const g=!!n.pathSegment(t,c);let v;if(p){g?t.closePath():Ox(t,i,d,s);const m=!!i.pathSegment(t,u,{move:g,reverse:!0});v=g&&m,v||Ox(t,i,h,s)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function LU(t,e,n,i){const s=e.chart.chartArea,{property:r,start:o,end:a}=i||{};if(r==="x"||r==="y"){let l,c,u,h;r==="x"?(l=o,c=s.top,u=a,h=s.bottom):(l=s.left,c=o,u=s.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function Ox(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var FU={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof ls&&(l={visible:t.isDatasetVisible(o),index:o,fill:xU(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=_U(s,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&Np(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Mx(r)&&Np(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!Mx(i)||n.drawTime!=="beforeDatasetDraw"||Np(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Nx=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},$U=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Lx extends Un{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=De(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=ct(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Nx(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,g)=>{const v=i+n/2+r.measureText(p.text).width;(g===0||c[c.length-1]+v+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((v,m)=>{const{itemWidth:y,itemHeight:w}=VU(i,n,r,v,s);m>0&&f+w+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[m]={left:p,top:f,col:g,width:y,height:w},d=Math.max(d,y),f+=w+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=To(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ot(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ot(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ot(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ot(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sf(e,this),this._draw(),Ef(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=Be.color,l=To(e.rtl,this.left,this.width),c=ct(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:v}=Nx(o,h),m=function(I,k,_){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();const x=ne(_.lineWidth,1);if(s.fillStyle=ne(_.fillStyle,a),s.lineCap=ne(_.lineCap,"butt"),s.lineDashOffset=ne(_.lineDashOffset,0),s.lineJoin=ne(_.lineJoin,"miter"),s.lineWidth=x,s.strokeStyle=ne(_.strokeStyle,a),s.setLineDash(ne(_.lineDash,[])),o.usePointStyle){const E={radius:g*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:x},M=l.xPlus(I,p/2),O=k+d;PC(s,E,M,O,o.pointStyleWidth&&p)}else{const E=k+Math.max((h-g)/2,0),M=l.leftForLtr(I,p),O=mr(_.borderRadius);s.beginPath(),Object.values(O).some(K=>K!==0)?ic(s,{x:M,y:E,w:p,h:g,radius:O}):s.rect(M,E,p,g),s.fill(),x!==0&&s.stroke()}s.restore()},y=function(I,k,_){Or(s,_.text,I,k+v/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},w=this.isHorizontal(),b=this._computeTitleHeight();w?f={x:Ot(r,this.left+u,this.right-i[0]),y:this.top+u+b,line:0}:f={x:this.left+u,y:Ot(r,this.top+b+u,this.bottom-n[0].height),line:0},zC(this.ctx,e.textDirection);const S=v+u;this.legendItems.forEach((I,k)=>{s.strokeStyle=I.fontColor,s.fillStyle=I.fontColor;const _=s.measureText(I.text).width,x=l.textAlign(I.textAlign||(I.textAlign=o.textAlign)),E=p+d+_;let M=f.x,O=f.y;l.setWidth(this.width),w?k>0&&M+E+u>this.right&&(O=f.y+=S,f.line++,M=f.x=Ot(r,this.left+u,this.right-i[f.line])):k>0&&O+S>this.bottom&&(M=f.x=M+n[f.line].width+u,f.line++,O=f.y=Ot(r,this.top+b+u,this.bottom-n[f.line].height));const K=l.x(M);if(m(K,O,I),M=sB(x,M+p+d,w?M+E:this.right,e.rtl),y(l.x(M),O,I),w)f.x+=E+u;else if(typeof I.text!="string"){const ce=c.lineHeight;f.y+=dD(I,ce)+u}else f.y+=S}),BC(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=ct(n.font),s=Ht(n.padding);if(!n.display)return;const r=To(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Ot(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);u=c+Ot(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Ot(a,h,h+d);o.textAlign=r.textAlign(c0(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Or(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=ct(e.font),i=Ht(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(Ii(e,this.left,this.right)&&Ii(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ii(e,s.left,s.left+s.width)&&Ii(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!jU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=$U(s,i);s&&!r&&De(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&De(n.onHover,[e,i,this],this)}else i&&De(n.onClick,[e,i,this],this)}}function VU(t,e,n,i,s){const r=zU(i,t,e,n),o=BU(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function zU(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function BU(t,e,n){let i=t;return typeof e.text!="string"&&(i=dD(e,n)),i}function dD(t,e){const n=t.text?t.text.length:0;return e*n}function jU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var UU={id:"legend",_element:Lx,start(t,e,n){const i=t.legend=new Lx({ctx:t.ctx,options:n,chart:t});Vt.configure(t,i,n),Vt.addBox(t,i)},stop(t){Vt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Vt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ht(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class v0 extends Un{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Re(i.text)?i.text.length:1;this._padding=Ht(i.padding);const r=s*ct(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ot(a,i,r),h=n+e,c=r-i):(o.position==="left"?(u=i+e,h=Ot(a,s,n),l=_e*-.5):(u=r-e,h=Ot(a,n,s),l=_e*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=ct(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Or(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:c0(n.align),textBaseline:"middle",translation:[o,a]})}}function HU(t,e){const n=new v0({ctx:t.ctx,options:e,chart:t});Vt.configure(t,n,e),Vt.addBox(t,n),t.titleBlock=n}var WU={id:"title",_element:v0,start(t,e,n){HU(t,n)},stop(t){const e=t.titleBlock;Vt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Vt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Du=new WeakMap;var KU={id:"subtitle",start(t,e,n){const i=new v0({ctx:t.ctx,options:n,chart:t});Vt.configure(t,i,n),Vt.addBox(t,i),Du.set(t,i)},stop(t){Vt.removeBox(t,Du.get(t)),Du.delete(t)},beforeUpdate(t,e,n){const i=Du.get(t);Vt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wa={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=bm(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Gn(t,e){return e&&(Re(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function pi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qU(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Fx(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=ct(e.bodyFont),c=ct(e.titleFont),u=ct(e.footerFont),h=r.length,d=s.length,f=i.length,p=Ht(e.padding);let g=p.height,v=0,m=i.reduce((b,S)=>b+S.before.length+S.lines.length+S.after.length,0);if(m+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),m){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*b+(m-f)*l.lineHeight+(m-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const w=function(b){v=Math.max(v,n.measureText(b).width+y)};return n.save(),n.font=c.string,Se(t.title,w),n.font=l.string,Se(t.beforeBody.concat(t.afterBody),w),y=e.displayColors?o+2+e.boxPadding:0,Se(i,b=>{Se(b.before,w),Se(b.lines,w),Se(b.after,w)}),y=0,n.font=u.string,Se(t.footer,w),n.restore(),v+=p.width,{width:v,height:g}}function GU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function YU(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function QU(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),YU(c,t,e,n)&&(c="center"),c}function $x(t,e,n){const i=n.yAlign||e.yAlign||GU(t,n);return{xAlign:n.xAlign||e.xAlign||QU(t,e,n,i),yAlign:i}}function XU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function JU(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Vx(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=mr(o);let p=XU(e,a);const g=JU(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+s:a==="right"&&(p+=Math.max(h,f)+s),{x:mt(p,0,i.width-e.width),y:mt(g,0,i.height-e.height)}}function Au(t,e,n){const i=Ht(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function zx(t){return Gn([],pi(t))}function ZU(t,e,n){return Bs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Bx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const fD={beforeTitle:di,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:di,beforeBody:di,beforeLabel:di,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return fe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:di,afterBody:di,beforeFooter:di,footer:di,afterFooter:di};function tn(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?fD[e].call(n,i):s}class Am extends Un{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new KC(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ZU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=tn(i,"beforeTitle",this,e),r=tn(i,"title",this,e),o=tn(i,"afterTitle",this,e);let a=[];return a=Gn(a,pi(s)),a=Gn(a,pi(r)),a=Gn(a,pi(o)),a}getBeforeBody(e,n){return zx(tn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return Se(e,r=>{const o={before:[],lines:[],after:[]},a=Bx(i,r);Gn(o.before,pi(tn(a,"beforeLabel",this,r))),Gn(o.lines,tn(a,"label",this,r)),Gn(o.after,pi(tn(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return zx(tn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=tn(i,"beforeFooter",this,e),r=tn(i,"footer",this,e),o=tn(i,"afterFooter",this,e);let a=[];return a=Gn(a,pi(s)),a=Gn(a,pi(r)),a=Gn(a,pi(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(qU(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Se(a,u=>{const h=Bx(e.callbacks,u);s.push(tn(h,"labelColor",this,u)),r.push(tn(h,"labelPointStyle",this,u)),o.push(tn(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Wa[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Fx(this,i),c=Object.assign({},a,l),u=$x(this.chart,i,c),h=Vx(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=mr(a),{x:d,y:f}=e,{width:p,height:g}=n;let v,m,y,w,b,S;return r==="center"?(b=f+g/2,s==="left"?(v=d,m=v-o,w=b+o,S=b-o):(v=d+p,m=v+o,w=b-o,S=b+o),y=v):(s==="left"?m=d+Math.max(l,u)+o:s==="right"?m=d+p-Math.max(c,h)-o:m=this.caretX,r==="top"?(w=f,b=w-o,v=m-o,y=m+o):(w=f+g,b=w+o,v=m+o,y=m-o),S=w),{x1:v,x2:m,x3:y,y1:w,y2:b,y3:S}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=To(i.rtl,this.x,this.width);for(e.x=Au(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=ct(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=ct(r.bodyFont),h=Au(this,"left",r),d=s.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(d,c)+c/2,m=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Em(e,g,v,m),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Em(e,g,v,m)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(d,c),v=s.leftForLtr(s.xPlus(d,1),c-2),m=mr(o.borderRadius);Object.values(m).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ic(e,{x:g,y:p,w:c,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ic(e,{x:v,y:p+1,w:c-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=ct(i.bodyFont);let d=h.lineHeight,f=0;const p=To(i.rtl,this.x,this.width),g=function(_){n.fillText(_,p.x(e.x+f),e.y+d/2),e.y+=d+r},v=p.textAlign(o);let m,y,w,b,S,I,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Au(this,v,i),n.fillStyle=i.bodyColor,Se(this.beforeBody,g),f=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,I=s.length;b<I;++b){for(m=s[b],y=this.labelTextColors[b],n.fillStyle=y,Se(m.before,g),w=m.lines,a&&w.length&&(this._drawColorBox(n,e,b,p,i),d=Math.max(h.lineHeight,l)),S=0,k=w.length;S<k;++S)g(w[S]),d=h.lineHeight;Se(m.after,g)}f=0,d=h.lineHeight,Se(this.afterBody,g),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=To(i.rtl,this.x,this.width);for(e.x=Au(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=ct(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=mr(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Wa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Fx(this,e),l=Object.assign({},o,this._size),c=$x(n,e,l),u=Vx(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ht(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),zC(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),BC(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!cd(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!cd(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=Wa[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}V(Am,"positioners",Wa);var e5={id:"tooltip",_element:Am,positioners:Wa,afterInit(t,e,n){n&&(t.tooltip=new Am({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},t5=Object.freeze({__proto__:null,Colors:fU,Decimation:yU,Filler:FU,Legend:UU,SubTitle:KU,Title:WU,Tooltip:e5});const n5=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function i5(t,e,n,i){const s=t.indexOf(e);if(s===-1)return n5(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const s5=(t,e)=>t===null?null:mt(Math.round(t),0,e);function jx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Mm extends jr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(fe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:i5(i,e,ne(n,e),this._addedLabels),s5(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return jx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}V(Mm,"id","category"),V(Mm,"defaults",{ticks:{callback:jx}});function r5(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:g,max:v}=e,m=!fe(o),y=!fe(a),w=!fe(c),b=(v-g)/(h+1);let S=F1((v-g)/p/f)*f,I,k,_,x;if(S<1e-14&&!m&&!y)return[{value:g},{value:v}];x=Math.ceil(v/S)-Math.floor(g/S),x>p&&(S=F1(x*S/p/f)*f),fe(l)||(I=Math.pow(10,l),S=Math.ceil(S*I)/I),s==="ticks"?(k=Math.floor(g/S)*S,_=Math.ceil(v/S)*S):(k=g,_=v),m&&y&&r&&Xz((a-o)/r,S/1e3)?(x=Math.round(Math.min((a-o)/S,u)),S=(a-o)/x,k=o,_=a):w?(k=m?o:k,_=y?a:_,x=c-1,S=(_-k)/x):(x=(_-k)/S,cl(x,Math.round(x),S/1e3)?x=Math.round(x):x=Math.ceil(x));const E=Math.max($1(S),$1(k));I=Math.pow(10,fe(l)?E:l),k=Math.round(k*I)/I,_=Math.round(_*I)/I;let M=0;for(m&&(d&&k!==o?(n.push({value:o}),k<o&&M++,cl(Math.round((k+M*S)*I)/I,o,Ux(o,b,t))&&M++):k<o&&M++);M<x;++M){const O=Math.round((k+M*S)*I)/I;if(y&&O>a)break;n.push({value:O})}return y&&d&&_!==a?n.length&&cl(n[n.length-1].value,a,Ux(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!y||_===a)&&n.push({value:_}),n}function Ux(t,e,{horizontal:n,minRotation:i}){const s=Nn(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class yd extends jr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return fe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=ai(s),c=ai(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=r5(s,r);return e.bounds==="ticks"&&SC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Vc(e,this.chart.options.locale,this.options.ticks.format)}}class Pm extends yd{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Qe(e)?e:0,this.max=Qe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Nn(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}V(Pm,"id","linear"),V(Pm,"defaults",{ticks:{callback:bf.formatters.numeric}});const rc=t=>Math.floor(as(t)),Ks=(t,e)=>Math.pow(10,rc(t)+e);function Hx(t){return t/Math.pow(10,rc(t))===1}function Wx(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function o5(t,e){const n=e-t;let i=rc(n);for(;Wx(t,e,i)>10;)i++;for(;Wx(t,e,i)<10;)i--;return Math.min(i,rc(t))}function a5(t,{min:e,max:n}){e=hn(t.min,e);const i=[],s=rc(e);let r=o5(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=hn(t.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:Hx(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=hn(t.max,d);return i.push({value:f,major:Hx(f),significand:h}),i}class Rm extends jr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=yd.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Qe(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Qe(e)?Math.max(0,e):null,this.max=Qe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qe(this._userMin)&&(this.min=e===Ks(this.min,0)?Ks(this.min,-1):Ks(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Ks(i,-1)),o(Ks(s,1)))),i<=0&&r(Ks(s,-1)),s<=0&&o(Ks(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=a5(n,this);return e.bounds==="ticks"&&SC(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Vc(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=as(e),this._valueRange=as(this.max)-as(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(as(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}V(Rm,"id","logarithmic"),V(Rm,"defaults",{ticks:{callback:bf.formatters.logarithmic,major:{enabled:!0}}});function Om(t){const e=t.ticks;if(e.display&&t.display){const n=Ht(e.backdropPadding);return ne(e.font&&e.font.size,Be.font.size)+n.height}return 0}function l5(t,e,n){return n=Re(n)?n:[n],{w:pB(t,e.string,n),h:n.length*e.lineHeight}}function Kx(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function c5(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?_e/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=ct(c.font),d=l5(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=Nt(t.getIndexAngle(l)+a),p=Math.round(a0(f)),g=Kx(p,u.x,d.w,0,180),v=Kx(p,u.y,d.h,90,270);u5(n,e,f,g,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=f5(t,i,s)}function u5(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function h5(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,l=t.getPointPosition(e,i+s+o,r),c=Math.round(a0(Nt(l.angle+Ze))),u=m5(l.y,a.h,c),h=p5(c),d=g5(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function d5(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(Ci({x:n,y:i},e)||Ci({x:n,y:r},e)||Ci({x:s,y:i},e)||Ci({x:s,y:r},e))}function f5(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Om(r)/2,additionalAngle:o?_e/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const h=h5(t,u,l);i.push(h),a==="auto"&&(h.visible=d5(h,c),h.visible&&(c=h))}return i}function p5(t){return t===0||t===180?"center":t<180?"left":"right"}function g5(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function m5(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function y5(t,e,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=e;if(!fe(a)){const l=mr(e.borderRadius),c=Ht(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),ic(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function v5(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=t._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(t.getPointLabelContext(s));y5(n,o,r);const a=ct(o.font),{x:l,y:c,textAlign:u}=r;Or(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function pD(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,Ne);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function w5(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),pD(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function _5(t,e,n){return Bs(t,{label:n,index:e,type:"pointLabel"})}class Ka extends yd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ht(Om(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Qe(e)&&!isNaN(e)?e:0,this.max=Qe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Om(this.options))}generateTickLabels(e){yd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=De(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?c5(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=Ne/(this._pointLabels.length||1),i=this.options.startAngle||0;return Nt(e*n+Nn(i))}getDistanceFromCenterForValue(e){if(fe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(fe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return _5(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-Ze+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),pD(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&v5(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),p=r.setContext(d);w5(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=ct(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=Ht(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Or(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}V(Ka,"id","radialLinear"),V(Ka,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),V(Ka,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),V(Ka,"descriptors",{angleLines:{_fallback:"grid"}});const Cf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rn=Object.keys(Cf);function qx(t,e){return t-e}function Gx(t,e){if(fe(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Qe(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(qo(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Yx(t,e,n,i){const s=rn.length;for(let r=rn.indexOf(t);r<s-1;++r){const o=Cf[rn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return rn[r]}return rn[s-1]}function x5(t,e,n,i,s){for(let r=rn.length-1;r>=rn.indexOf(n);r--){const o=rn[r];if(Cf[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return rn[n?rn.indexOf(n):0]}function b5(t){for(let e=rn.indexOf(t)+1,n=rn.length;e<n;++e)if(Cf[rn[e]].common)return rn[e]}function Qx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=l0(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function S5(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Xx(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:S5(t,i,s,n)}class oc extends jr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new M4._date(e.adapters.date);s.init(n),ll(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Gx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Qe(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Qe(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=tB(s,r,o);return this._unit=n.unit||(i.autoSkip?Yx(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):x5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:b5(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Xx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=mt(n,0,o),i=mt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Yx(r.minUnit,n,i,this._getLabelCapacity(n)),a=ne(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=qo(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)Qx(u,d,p);return(d===i||s.bounds==="ticks"||f===1)&&Qx(u,d,p),Object.keys(u).sort(qx).map(g=>+g)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return De(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=Nn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Xx(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(Gx(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return IC(e.sort(qx))}}V(oc,"id","time"),V(oc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Mu(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=Ti(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=Ti(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Nm extends oc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Mu(n,this.min),this._tableRange=Mu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Mu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Mu(this._table,i*this._tableRange+this._minPos,!0)}}V(Nm,"id","timeseries"),V(Nm,"defaults",oc.defaults);var E5=Object.freeze({__proto__:null,CategoryScale:Mm,LinearScale:Pm,LogarithmicScale:Rm,RadialLinearScale:Ka,TimeScale:oc,TimeSeriesScale:Nm});const k5=[A4,oU,t5,E5],gD="label";function Jx(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function I5(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function mD(t,e){t.labels=e}function yD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gD;const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function T5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gD;const n={labels:[],datasets:[]};return mD(n,t.labels),yD(n,t.datasets,e),n}function C5(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=P.useRef(null),p=P.useRef(null),g=()=>{f.current&&(p.current=new If(f.current,{type:o,data:T5(a,r),options:l&&{...l},plugins:c}),Jx(e,p.current))},v=()=>{Jx(e,null),p.current&&(p.current.destroy(),p.current=null)};return P.useEffect(()=>{!s&&p.current&&l&&I5(p.current,l)},[s,l]),P.useEffect(()=>{!s&&p.current&&mD(p.current.config.data,a.labels)},[s,a.labels]),P.useEffect(()=>{!s&&p.current&&a.datasets&&yD(p.current.config.data,a.datasets,r)},[s,a.datasets]),P.useEffect(()=>{p.current&&(s?(v(),setTimeout(g)):p.current.update(h))},[s,l,a.labels,a.datasets,h]),P.useEffect(()=>{p.current&&(v(),setTimeout(g))},[o]),P.useEffect(()=>(g(),()=>v()),[]),wd.createElement("canvas",{ref:f,role:"img",height:n,width:i,...d},u)}const D5=P.forwardRef(C5);function vD(t,e){return If.register(e),P.forwardRef((n,i)=>wd.createElement(D5,{...n,ref:i,type:t}))}const A5=vD("bar",dl),M5=vD("pie",pd);If.register(...k5);function Zx(){const{accounts:t,addAccount:e}=pz(),{transactions:n,addTransaction:i}=gz(),{goals:s}=mz(),[r,o]=P.useState(""),[a,l]=P.useState("cash"),[c,u]=P.useState("ARS"),[h,d]=P.useState(!1),[f,p]=P.useState(""),[g,v]=P.useState("income"),[m,y]=P.useState(""),[w,b]=P.useState("month"),[S,I]=P.useState(!1),{usdRate:k}=yz();P.useEffect(()=>{const C=$=>{$.key.toLowerCase()==="n"&&d(!0)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]);const _=async C=>{C.preventDefault(),r&&(await e({name:r,type:a,currency:c}),o(""))},x=async C=>{C.preventDefault();const $=parseFloat(f);!m||$<=0||(await i({type:g,amount:$,date:new Date().toISOString(),fromAccount:m}),p(""),d(!1))},E=new Date,M=(()=>w==="month"?new Date(E.getFullYear(),E.getMonth(),1):w==="quarter"?new Date(E.getFullYear(),E.getMonth()-2,1):new Date(E.getFullYear(),0,1))(),O=n.filter(C=>new Date(C.date)>=M),K={};O.forEach(C=>{const $=t.find(le=>le.id===C.fromAccount);if(!$)return;const X=C.type==="expense"||C.type==="asset_buy"||C.type==="fee"||C.type==="tax"?-1:1;K[$.currency]=(K[$.currency]||0)+X*C.amount});const J=Object.entries(K).map(([C,$])=>S&&C==="ARS"&&k?["USD",$/k]:[C,$]),ie=Array.from({length:12}).map((C,$)=>{const X=new Date(E.getFullYear(),E.getMonth()-(11-$),1);return`${X.getMonth()+1}/${String(X.getFullYear()).slice(2)}`}),q=Array(12).fill(0),N=Array(12).fill(0);n.forEach(C=>{const $=new Date(C.date),X=11-(E.getFullYear()*12+E.getMonth()-($.getFullYear()*12+$.getMonth()));X<0||X>11||(C.type==="income"&&(q[X]+=C.amount),C.type==="expense"&&(N[X]+=C.amount))});const R=new Date(E.getFullYear(),E.getMonth(),1),H={};n.filter(C=>C.type==="expense"&&new Date(C.date)>=R).forEach(C=>{const $=C.categoryId||"Uncategorized";H[$]=(H[$]||0)+C.amount});const U=s.map(C=>{const $=new Date(E.getFullYear(),E.getMonth(),1),X=n.filter(Z=>new Date(Z.date)>=$),le=X.filter(Z=>Z.type==="income").reduce((Z,oe)=>Z+oe.amount,0);let ue=0;if(C.targetType==="save_pct"){const Z=X.filter(oe=>oe.type==="expense").reduce((oe,Ce)=>oe+Ce.amount,0);le>0&&(ue=(le-Z)/le*100)}if(C.targetType==="invest_pct"){const Z=X.filter(oe=>oe.type==="asset_buy").reduce((oe,Ce)=>oe+Ce.amount,0);le>0&&(ue=Z/le*100)}const rt=Math.max(0,Math.min(100,ue/C.pct*100));return{id:C.id,pct:rt,goal:C.pct}});return A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard"}),A.jsxs("form",{onSubmit:_,className:"space-x-2 mb-6",children:[A.jsx("input",{value:r,onChange:C=>o(C.target.value),placeholder:"Account name",className:"border px-2 py-1"}),A.jsxs("select",{value:a,onChange:C=>l(C.target.value),className:"border px-2 py-1",children:[A.jsx("option",{value:"cash",children:"Cash"}),A.jsx("option",{value:"mercadopago_ars",children:"Mercadopago ARS"}),A.jsx("option",{value:"mp_usd",children:"MP USD"}),A.jsx("option",{value:"mp_reserva",children:"MP Reserva"}),A.jsx("option",{value:"binance",children:"Binance"}),A.jsx("option",{value:"balance_acc",children:"Balance Account"})]}),A.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"border px-2 py-1",children:[A.jsx("option",{value:"ARS",children:"ARS"}),A.jsx("option",{value:"USD",children:"USD"}),A.jsx("option",{value:"BTC",children:"BTC"})]}),A.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-2 py-1 rounded",children:"Add Account"})]}),A.jsx("ul",{className:"mb-8 space-y-1",children:t.map(C=>A.jsxs("li",{className:"border p-2",children:[C.name," - ",C.currency]},C.id))}),h&&A.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:A.jsxs("form",{onSubmit:x,className:"bg-white p-4 space-y-2 rounded",children:[A.jsxs("select",{value:m,onChange:C=>y(C.target.value),className:"border px-2 py-1 w-full",children:[A.jsx("option",{value:"",disabled:!0,children:"Select account"}),t.map(C=>A.jsx("option",{value:C.id,children:C.name},C.id))]}),A.jsx("input",{type:"number",value:f,onChange:C=>p(C.target.value),className:"border px-2 py-1 w-full",placeholder:"Amount",step:"0.01"}),A.jsxs("select",{value:g,onChange:C=>v(C.target.value),className:"border px-2 py-1 w-full",children:[A.jsx("option",{value:"income",children:"Income"}),A.jsx("option",{value:"expense",children:"Expense"})]}),A.jsxs("div",{className:"flex justify-end space-x-2",children:[A.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-2 py-1 border",children:"Cancel"}),A.jsx("button",{type:"submit",className:"px-2 py-1 bg-blue-500 text-white",children:"Add"})]})]})}),A.jsx("h2",{className:"font-semibold mb-2",children:"Transactions"}),A.jsx("ul",{className:"space-y-1",children:n.map(C=>A.jsxs("li",{className:"border p-2",children:[C.type," - ",C.amount]},C.id))}),A.jsxs("div",{className:"mt-8 space-y-6",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[A.jsxs("select",{value:w,onChange:C=>b(C.target.value),className:"border px-2 py-1",children:[A.jsx("option",{value:"month",children:"Mes"}),A.jsx("option",{value:"quarter",children:"Trimestre"}),A.jsx("option",{value:"year",children:"Año"})]}),A.jsxs("label",{className:"flex items-center space-x-1",children:[A.jsx("input",{type:"checkbox",checked:S,onChange:C=>I(C.target.checked)}),A.jsx("span",{children:"Mostrar en USD"})]})]}),A.jsx("ul",{className:"space-y-1",children:J.map(([C,$])=>A.jsxs("li",{className:"font-semibold",children:[C,": ",$.toFixed(2)]},C))})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Ingresos vs Gastos (12m)"}),A.jsx(A5,{data:{labels:ie,datasets:[{label:"Ingresos",data:q,backgroundColor:"#4ade80"},{label:"Gastos",data:N,backgroundColor:"#f87171"}]}})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Gasto por categoría (mes)"}),A.jsx(M5,{data:{labels:Object.keys(H),datasets:[{data:Object.values(H),backgroundColor:["#93c5fd","#fca5a5","#fdba74","#fde047","#86efac","#a5b4fc"]}]}})]}),U.length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Progreso de metas"}),A.jsx("ul",{className:"space-y-2",children:U.map(C=>A.jsxs("li",{className:"space-y-1",children:[A.jsx("div",{className:"h-2 bg-gray-200 rounded",children:A.jsx("div",{className:"h-2 bg-blue-500 rounded",style:{width:`${C.pct}%`}})}),A.jsxs("span",{children:[C.pct.toFixed(1),"% de objetivo ",C.goal,"%"]})]},C.id))})]})]})]})}function P5(){const{user:t}=Br(),[e,n]=P.useState(null),i=async()=>{if(!t)return;const o=await _m(t.uid),a=uz(o),l=URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download="fintracker_backup.json",c.click(),URL.revokeObjectURL(l)},s=async()=>{if(!t)return;const o=await _m(t.uid),a=hz(o),l=URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download="fintracker_backup.csv",c.click(),URL.revokeObjectURL(l)},r=async()=>{!t||!e||(await dz(t.uid,e),n(null))};return A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),A.jsx("button",{onClick:i,className:"border px-2 py-1 mr-2",children:"Descargar backup"}),A.jsx("button",{onClick:s,className:"border px-2 py-1 mr-2",children:"Exportar CSV"}),A.jsxs("div",{className:"mt-4",children:[A.jsx("input",{type:"file",accept:".csv",onChange:o=>{var a;return n(((a=o.target.files)==null?void 0:a[0])||null)}}),A.jsx("button",{onClick:r,className:"ml-2 border px-2 py-1",children:"Importar CSV"})]})]})}function R5(){const[t,e]=P.useState(!1);return A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Investigación y Desarrollo"}),A.jsx("button",{onClick:()=>e(!t),className:"border px-2 py-1",children:t?"Ocultar info":"Ver información"}),t&&A.jsxs("div",{className:"mt-4 space-y-2",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"font-semibold",children:"Funciones disponibles"}),A.jsxs("ul",{className:"list-disc ml-5",children:[A.jsx("li",{children:"Inicio de sesión con Google"}),A.jsx("li",{children:"Gestión de cuentas y transacciones"}),A.jsx("li",{children:"Exportación e importación de datos"})]})]}),A.jsxs("div",{className:"mt-4",children:[A.jsx("h2",{className:"font-semibold",children:"Próximas funciones"}),A.jsxs("ul",{className:"list-disc ml-5",children:[A.jsx("li",{children:"Integración con pagos instantáneos"}),A.jsx("li",{children:"Sincronización con cuentas externas (Binance, Mercado Pago)"}),A.jsx("li",{children:"Notificaciones y experiencia PWA"})]})]})]})]})}function O5(){return A.jsx(QP,{children:A.jsx(rz,{children:A.jsxs(UP,{children:[A.jsx(Ys,{path:"/login",element:A.jsx(lz,{})}),A.jsxs(Ys,{path:"/",element:A.jsx(oz,{children:A.jsx(az,{})}),children:[A.jsx(Ys,{path:"dashboard",element:A.jsx(Zx,{})}),A.jsx(Ys,{path:"settings",element:A.jsx(P5,{})}),A.jsx(Ys,{path:"research",element:A.jsx(R5,{})}),A.jsx(Ys,{index:!0,element:A.jsx(Zx,{})})]})]})})})}Fp.createRoot(document.getElementById("root")).render(A.jsx(wd.StrictMode,{children:A.jsx(O5,{})}));
